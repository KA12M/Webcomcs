var ys=Object.defineProperty;var ws=(s,t,a)=>t in s?ys(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var i=(s,t,a)=>(ws(s,typeof t!="symbol"?t+"":t,a),a);import{m as se,r as Ns,j as e,S as vs,L as Ss,u as Te,a as g,o as N,O as et,N as Lt,F as j,I as D,U as Ke,b as qt,c as be,d as L,B as C,T as oe,D as Be,A as Re,e as Jt,f as R,g as Cs,h as Ps,i as ks,k as _e,M as Ls,l as Is,n as _t,p as Fs,q as Rs,s as Ms,t as Es,v as Ds,w as $s,x as Ts,y as Bs,z as As,C as Hs,E as Yt,G as F,H as Ce,J as Se,K as tt,P as Us,Q as ue,R as $,V as q,W as zs,X as Os,Y as Gs,Z as Vs,_ as qs,$ as Js,a0 as E,a1 as Wt,a2 as ae,a3 as ge,a4 as _s,a5 as gt,a6 as ft,a7 as X,a8 as Ae,a9 as st,aa as Me,ab as ve,ac as Ys,ad as Ws,ae as at,af as je,ag as qe,ah as de,ai as Pe,aj as te,ak as Ks,al as Zs,am as Xs,an as J,ao as we,ap as Ne,aq as Kt,ar as bt,as as Zt,at as Qs,au as Ze,av as rt,aw as Ee,ax as $e,ay as Xt,az as fe,aA as ce,aB as ea,aC as ta,aD as sa,aE as He,aF as nt,aG as aa,aH as ra,aI as Qt,aJ as es,aK as jt,aL as na,aM as ia,aN as la,aO as oa,aP as ca,aQ as Ue,aR as yt,aS as da,aT as It,aU as ts,aV as ss,aW as ct,aX as ha,aY as ma,aZ as ua,a_ as xa,a$ as ga,b0 as ja,b1 as pa,b2 as fa,b3 as ie,b4 as le,b5 as ba,b6 as ya,b7 as wa,b8 as B,b9 as Na,ba as va,bb as pe,bc as u,bd as Sa,be as Ca,bf as Pa,bg as ka,bh as La,bi as Ia}from"./vendor-99c6513a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();const xe={baseURL:"/comsci/",baseAPI:"http://coms.kru.ac.th/comsci/api",urlUploadFile:"http://coms.kru.ac.th/comsci/api/uploadFile/image",mapboxKeyApi:"pk.eyJ1Ijoia2ExMm0iLCJhIjoiY2xleWwxY2xsMDYzYzQwbzh5cDg2NXZvbCJ9.NG6RqwlWPybevlN1ChKz9w",chatSocket:"http://coms.kru.ac.th/comsci/chat"};class Fa{constructor(){i(this,"token",window.localStorage.getItem("jwt"));i(this,"appLoaded",!1);i(this,"json",{});i(this,"loadDefaultJson",()=>{fetch(xe.baseURL+"json/default.json").then(t=>t.json()).then(t=>this.json=t).catch(()=>alert("json default not found."))});i(this,"setToken",t=>{t&&window.localStorage.setItem("jwt",t),this.token=t});i(this,"setAppLoaded",()=>{this.appLoaded=!0});se(this),Ns(()=>this.token,t=>{t?window.localStorage.setItem("jwt",t):window.localStorage.removeItem("jwt")})}}class Ra{constructor(){i(this,"handleOk",null);i(this,"modal",{open:!1,body:null,title:null});i(this,"openModal",(t,a=null)=>{this.modal.open=!0,this.modal.body=t,a&&(this.modal.title=a)});i(this,"closeModal",()=>{this.modal={open:!1,body:null,title:null}});se(this)}}const Ma={getCurrent:()=>S.get("/account"),login:s=>S.post("/account/login",s),register:s=>S.post("/account/register",s),updateMe:s=>S.put("/account",Ea(s)),hidden:()=>S.put("/account/hidden",{}),changePassword:s=>S.post("/account/resetPassword",s),editUser:s=>S.put("/account/editUser",s)},Ea=s=>{var t=new FormData;return Object.entries(s).forEach(([a,r])=>{(a==="student"||a==="lecturer")&&r?Object.entries(s[a]).forEach(([n,l])=>t.append(`Account[${a}][${n}]`,l)):a=="fileImages"?t.append("Account.FileImages",r):t.append(`Account[${a}]`,r)}),t},Da={list:s=>S.get("/profile",{params:s}),profile:s=>S.get(`/profile/${s}`)},$a={list:s=>S.get("/project",{params:s}),getOne:s=>S.get(`/project/${s}`),create:s=>S.postForm("/project",Ft(s)),edit:s=>S.putForm("/project",Ft(s)),delete:s=>S.delete(`/project/${s}`),hidden:s=>S.post(`/project/${s}/hidden`),getByUserName:s=>S.get(`/project/${s}/username`)},Ft=s=>{var t=new FormData;return Object.entries(s).forEach(([a,r])=>{a=="consultants"?r.forEach((n,l)=>t.append(`${a}[${l}].lecturerName`,n.lecturerName)):t.append(a,r)}),t},Ta={list:s=>S.get("/syllabus",{params:s}),getOne:s=>S.get(`/syllabus/${s}`),add:s=>S.post("/syllabus",Rt(s)),edit:s=>S.put("/syllabus",Rt(s)),delete:s=>S.delete(`/syllabus/${s}`),hidden:s=>S.post(`/syllabus/${s}/hidden`)},Rt=s=>(s.subjects=[],s.subjectGeneral&&s.subjectGeneral.map(t=>{t&&s.subjects.push({...t,subjectCategory:0})}),s.subjectSpecific&&s.subjectSpecific.map(t=>{t&&s.subjects.push({...t,subjectCategory:1})}),s.subjectFreeElective&&s.subjectFreeElective.map(t=>{t&&s.subjects.push({...t,subjectCategory:2})}),s.objectives=s.objective,s.occupations=s.occupation,s.year=s.year?new Date(s.year).getFullYear().toString():s.yearPreview,s),Ba={get:()=>S.get("/systemSetting"),editSetting:s=>S.putForm("/systemSetting",Aa(s))},Aa=s=>{var t=new FormData;return Object.entries(s).forEach(([a,r])=>{r&&t.append(a,r)}),t},Ha={list:s=>S.get("/homePhoto",{params:s}),getOne:s=>S.get(`/homePhoto/${s}`),add:s=>{let t=new FormData;t.append("title",s.title),t.append("FileImages",s.fileImage),S.post("/homePhoto",t,pt)},edit:s=>S.post("/homePhoto",s),enable:s=>S.patch(`/homePhoto/${s}/enable`),delete:s=>S.delete(`/homePhoto/${s}`)};class ze{constructor(t=1,a=10){i(this,"currentPage");i(this,"pageSize");this.currentPage=t,this.pageSize=a}}class Ua{constructor(t,a){i(this,"data");i(this,"pagination");this.data=t,this.pagination=a}}const za={list:s=>S.get("/news",{params:s}),getOne:s=>S.get(`/news/${s}`),create:s=>S.postForm("/news",Mt(s)),edit:s=>S.putForm("/news",Mt(s)),setMainPhoto:(s,t)=>S.patch(`/news/${s}/setMain/${t}`),hidden:s=>S.patch(`/news/${s}/hidden`),delete:s=>S.delete(`/news/${s}`),deletePhoto:s=>S.delete(`/news/${s}/photo`)},Mt=s=>{let t=new FormData;return Object.entries(s).forEach(([a,r])=>{a==="fileImages"&&r?r==null||r.forEach(n=>t.append("fileImages",n)):a==="newsPhotos"&&r?r.forEach((n,l)=>{Object.entries(n).forEach(([o,c])=>{t.append(`${a}[${l}][${o}]`,c)})}):r&&t.append(a,r)}),t},Oa=e.jsx(Ss,{style:{fontSize:36},spin:!0}),Ga=({message:s})=>e.jsxs("div",{className:"fixed top-0 left-0 right-0 bottom-0 w-full h-screen opacity-75 flex flex-col items-center justify-center",children:[e.jsx(vs,{className:"visually-hidden",indicator:Oa}),s]}),Va=()=>{const{pathname:s}=Te();return g.useEffect(()=>{window.scrollTo(0,0)},[s]),e.jsx(e.Fragment,{})},qa=()=>{const{commonStore:s,userStore:t,homePhotoStore:a,settingStore:r,comSciSubject:n}=w();return g.useEffect(()=>{a.GetPhotos(!0)},[]),g.useEffect(()=>{s.loadDefaultJson(),n.loadSubjects(),s.token?(r.loadSetting(),t.getUser().finally(s.setAppLoaded)):r.loadSetting().finally(s.setAppLoaded)},[s,t]),s.appLoaded?e.jsxs(e.Fragment,{children:[e.jsx(Va,{}),e.jsx(et,{})]}):e.jsx(Ga,{message:"กำลังดาวน์โหลด..."})},Ja=N(qa),dt=({roles:s})=>{let t=Te();const{userStore:{user:a}}=w();return a?s&&!(s!=null&&s.some(r=>{var n;return(n=a.roles)==null?void 0:n.includes(r)}))?e.jsx(Lt,{to:"/",state:{from:t}}):e.jsx(et,{}):e.jsx(Lt,{to:"/",state:{from:t}})},_a=({label:s,route:t,children:a,...r})=>e.jsxs("li",{onClick:()=>t&&M.navigate(t),...r,className:"block py-2 pl-3 text-sm pr-4 text-gray-700 rounded hover:bg-gray-200 md:hover:bg-transparent md:hover:text-blue-700 md:p-0 cursor-pointer",children:[s,a]}),De=N(_a),{Text:Ya}=oe,Wa=[{label:"บุคคลทั่วไป",value:0},{label:"นักศึกษา",value:1},{label:"อาจารย์",value:2}],Ka=({roleLect:s=!1})=>{const{modalStore:{closeModal:t,openModal:a},userStore:{Loading:r,register:n},accountStore:{addUser:l,loadingSubmit:o}}=w(),[c,h]=g.useState(),[d,x]=g.useState(),y=m=>{x(m)},p=async m=>{s?l({...m,role:d}).then(t).catch(b=>{h(b),console.log(b)}):await n({...m,role:d}).catch(b=>{h(b),console.log(b)})};return e.jsxs(j,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:p,children:[d===1&&e.jsx(j.Item,{name:"username",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"}],children:e.jsx(D,{prefix:e.jsx(Ke,{className:"site-form-item-icon"}),placeholder:"รหัสนักศึกษา"})}),e.jsx(j.Item,{name:"fullName",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"}],children:e.jsx(D,{prefix:e.jsx(Ke,{className:"site-form-item-icon"}),placeholder:"ชื่อ-นามสกุล"})}),e.jsx(j.Item,{name:"email",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"}],children:e.jsx(D,{prefix:e.jsx(Ke,{className:"site-form-item-icon"}),placeholder:"อีเมล"})}),e.jsx(j.Item,{name:"password",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"},{min:6,message:"รหัสผ่านอย่างน้อย 6 อักษร"}],children:e.jsx(D,{prefix:e.jsx(qt,{className:"site-form-item-icon"}),type:"password",placeholder:"รหัสผ่าน"})}),e.jsx(be,{className:"w-32 mb-4",onChange:y,options:Wa.map(m=>(!s&&m.value!=2,m)),value:d,defaultValue:"บุคคลทั่วไป"}),e.jsxs(j.Item,{children:[e.jsx(Ya,{type:"danger",children:c&&Array.from(c).map((m,b)=>e.jsx("p",{children:m},b))}),e.jsxs(L,{children:[e.jsx(C,{loading:r||o,type:"primary",htmlType:"submit",children:"ลงทะเบียน"}),!s&&e.jsx(C,{type:"default",htmlType:"button",onClick:()=>a(e.jsx(wt,{}),"เข้าสู่ระบบ"),children:"เข้าสู่ระบบ"})]})]})]})},as=N(Ka),Za=()=>{const{userStore:{login:s,Loading:t},modalStore:{openModal:a}}=w(),r=g.useRef(null);g.useEffect(()=>{var l;(l=r.current)==null||l.focus()},[]);const n=async l=>{await s({email:l.email,password:l.password})};return e.jsxs(j,{initialValues:{remember:!0,email:"",password:""},onFinish:n,children:[e.jsx(j.Item,{name:"email",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{ref:r,prefix:e.jsx(Ke,{}),placeholder:"อีเมล ชื่อผู้ใช้ และ รหัสนักศึกษา"})}),e.jsx(j.Item,{name:"password",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"},{min:6,message:"อย่างน้อย 6 ตัวอักษร"}],children:e.jsx(D,{prefix:e.jsx(qt,{}),type:"password",placeholder:"รหัสผ่าน"})}),e.jsx(j.Item,{children:e.jsxs(L,{children:[e.jsx(C,{loading:t,type:"primary",htmlType:"submit",children:"เข้าสู่ระบบ"}),e.jsx(C,{type:"default",htmlType:"button",onClick:()=>a(e.jsx(as,{}),"ลงทะเบียน"),children:"ลงทะเบียน"})]})})]})},wt=N(Za),z=xe.baseURL,f={home:z,account:`${z}account`,projects:`${z}projects`,projectForm:`${z}project-form`,students:`${z}student`,syllabus:`${z}syllabus`,lecturers:`${z}lecturer`,courses:`${z}courses`,news:`${z}newses`,coursesForm:`${z}courses/form`,studentJobHistory:`${z}student-job-history`,accountDetail:s=>`${z}account/${s}`,projectDetail:s=>`${z}projects/${s}`,projectFormEdit:s=>`${z}project-form/${s}`,newsDetail:s=>`${z}newses/${s}`,courseDetail:s=>`${z}courses/${s}`,generationDetail:s=>`${z}courses/${s}/generation`,coursesFormEdit:s=>`${z}courses/form/${s}`},K={home:`${z}secret`,userManage:`${z}secret/user`,projectManage:`${z}secret/project-manage`,newsManage:`${z}secret/news-manage`,homePhotoManage:`${z}secret/home-photo`,settingMange:`${z}secret/settings`,lecturerMange:`${z}secret/lecturer-manage`,syllabusManage:`${z}secret/syllabus-manage`,jobHistoryManage:`${z}secret/job-history`,comsciSubjectManage:`${z}secret/comsci-subject-manage`};var Q=(s=>(s[s.guest=0]="guest",s[s.student=1]="student",s[s.lecturer=2]="lecturer",s[s.admin=3]="admin",s))(Q||{});const Fe={0:{th:"ทั่วไป",en:"Guest"},1:{th:"นักศึกษา",en:"Student"},2:{th:"อาจารย์",en:"Lecturer"},3:{th:"แอดมิน",en:"Admin"}},Et={0:["neutral","ทั่วไป","gray"],1:["success","นักศึกษา","green"],2:["primary","อาจารย์","purple"],3:["danger","แอดมิน","red"]},Xa=({closeDrawer:s})=>{const{modalStore:{openModal:t},userStore:{user:a,logout:r}}=w(),n=[{key:"me",label:"บัญชี",onClick:()=>M.navigate(f.account)},a&&a.roles&&a.roles.some(l=>l==Fe[3].en)?{key:"3",label:"แอดมิน",onClick:()=>M.navigate(K.home)}:null,{key:"logout",danger:!0,label:"ออกจากระบบ",onClick:r}];return e.jsx("div",{className:"items-center justify-between w-full md:flex md:w-auto md:order-1",children:e.jsxs("ul",{className:"navbar",children:[e.jsx(De,{label:"หน้าหลัก",route:f.home}),e.jsx(De,{label:"หลักสูตรวิทยาการคอมพิวเตอร์",route:f.syllabus}),e.jsx(De,{label:"โครงการงานวิจัย",route:f.projects}),e.jsx(De,{label:"หลักสูตรอบรม",route:f.courses}),a?e.jsx(De,{children:e.jsx(Be,{menu:{items:n},children:e.jsx("a",{onClick:l=>l.preventDefault(),children:e.jsxs(L,{children:[e.jsxs(Re,{icon:a.image&&e.jsx("img",{src:a.image}),children:[a.fullName[0].toUpperCase(),a.fullName.split(" ").length>1&&a.fullName.split(" ")[1][0]]}),a.fullName.split(" ")[0],e.jsx(Jt,{})]})})})}):e.jsx(De,{label:"สมาชิก",onClick:()=>{s(),t(e.jsx(wt,{}),"เข้าสู่ระบบ")}})]})})},Dt=N(Xa),Qa=()=>{const{pathname:s}=Te(),{settingStore:{setting:t}}=w();g.useEffect(()=>{l()},[s]);const[a,r]=g.useState(!1),n=()=>{r(!0)},l=()=>{r(!1)};return e.jsx("nav",{className:"menu--bar",id:"public-navbar",children:e.jsxs("div",{className:"menu--container",children:[e.jsxs("div",{className:"menu--left",children:[e.jsx("img",{src:(t==null?void 0:t.logoPreview)||"/image/kru.png",className:"navbar-logo"}),e.jsx("span",{className:"text",children:e.jsx(R,{to:f.home,children:t==null?void 0:t.webName})})]}),e.jsx("div",{className:"rightMenu",children:e.jsx(Dt,{closeDrawer:l})}),e.jsx("div",{className:"barsMenu",children:e.jsx(C,{className:"items-center",onClick:n,children:e.jsx(Cs,{size:16})})}),e.jsx(Ps,{title:t==null?void 0:t.webName,placement:"right",closable:!1,onClose:l,open:a,width:"80%",children:e.jsx(Dt,{closeDrawer:l})})]})})},er=N(Qa),tr=({pageFacebook:s})=>e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e.jsxs("span",{className:"text-sm sm:text-center text-gray-400",children:["© 2023"," ",e.jsx("a",{href:s,target:"_blank",className:"hover:underline",children:"สาขาวิทยาการคอมพิวเตอร์"}),". มหาวิทยาลัยราชภัฏกาญจนบุรี."]}),e.jsx("div",{className:"flex mt-4 space-x-6 sm:justify-center sm:mt-0",children:e.jsxs("a",{href:s,target:"_blank",className:"text-gray-500   hover:text-white",children:[e.jsx(ks,{}),e.jsx("span",{className:"sr-only",children:"Facebook page"})]})})]}),sr=({setting:s})=>e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mb-6 text-sm font-semibold  uppercase text-white",children:"ติดต่อ"}),e.jsx("ul",{className:" text-gray-400",children:e.jsx("li",{className:"mb-4",children:e.jsx("a",{className:"hover:underline",href:(s==null?void 0:s.pageFacebook)||"",target:"_blank",children:"Facebook page"})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-6 text-sm font-semibold uppercase text-white",children:"เกี่ยวข้อง"}),e.jsxs("ul",{className:" text-gray-400",children:[e.jsx("li",{className:"mb-4",children:e.jsx("a",{href:(s==null?void 0:s.kruUrl)||"",target:"_blank",className:"hover:underline",children:"มหาวิทยาลัยราชภัฏกาญจนบุรี"})}),e.jsx("li",{children:e.jsx("a",{href:(s==null?void 0:s.registerUrl)||"",target:"_blank",className:"hover:underline",children:"สมัครเรียน"})})]})]})]}),ar=({logo:s,web:t})=>e.jsx("div",{className:"mb-6 md:mb-0",children:e.jsxs(R,{to:f.home,className:"flex items-center",children:[e.jsx("img",{src:s,className:"h-8 mr-3",alt:"logo"}),e.jsx("span",{className:"self-center text-2xl font-semibold whitespace-nowrap text-white",children:t||""})]})}),rr=()=>{const{settingStore:{setting:s}}=w();return e.jsx("footer",{className:"p-4 bg-gray-800 sm:p-6 bottom-0",children:e.jsxs("div",{className:"container grid px-6 mx-auto",children:[e.jsxs("div",{className:"md:flex md:justify-between",children:[e.jsx(ar,{logo:s==null?void 0:s.logoPreview,web:s==null?void 0:s.webName}),e.jsx(sr,{setting:s})]}),e.jsx("hr",{className:"my-6  sm:mx-auto border-gray-700 lg:my-8"}),e.jsx(tr,{pageFacebook:(s==null?void 0:s.pageFacebook)||""})]})})},nr=N(rr),ir=()=>e.jsxs("div",{className:"main-public",children:[e.jsx(er,{}),e.jsx(et,{}),e.jsx(nr,{})]}),lr=N(ir);function Z({children:s,className:t,hScreen:a=!0}){return e.jsx("main",{className:`${a&&"min-h-screen"} overflow-y-auto ${t}`,children:e.jsx("div",{className:"container grid px-6 mx-auto",children:s})})}function or({children:s}){return e.jsx("aside",{className:"z-30 flex-shrink-0 hidden w-64 overflow-y-auto bg-white  lg:block",children:s})}function cr({children:s}){const{sideBarStore:{isSidebarOpen:t,closeSidebar:a}}=w();return e.jsx(_e.Transition,{show:t,children:e.jsxs(e.Fragment,{children:[e.jsx(_e.Transition,{enter:"transition ease-in-out duration-150",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition ease-in-out duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx(_e.Backdrop,{onClick:a})}),e.jsx(_e.Transition,{enter:"transition ease-in-out duration-150",enterFrom:"opacity-0 transform -translate-x-20",enterTo:"opacity-100",leave:"transition ease-in-out duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0 transform -translate-x-20",children:e.jsx("aside",{className:"fixed inset-y-0 z-50 flex-shrink-0 w-64 mt-16 overflow-y-auto bg-white  lg:hidden",children:s})})]})})}const dr=N(cr),hr=[{key:"dashboard",label:"หลัก",icon:e.jsx(Is,{size:18}),onClick:()=>M.navigate(K.home)},{key:"user",label:"ผู้ใช้ในระบบ",icon:e.jsx(_t,{size:18}),onClick:()=>M.navigate(K.userManage)},{key:"job-history",label:"ประวัติการทำงาน",icon:e.jsx(Fs,{size:18}),onClick:()=>M.navigate(K.jobHistoryManage)},{key:"student-project-management",label:"โครงงานนักศึกษา",icon:e.jsx(Rs,{size:18}),onClick:()=>M.navigate(K.projectManage)},{key:"news-dashboard",label:"ข่าวประชาสัมพันธ์",icon:e.jsx(Ms,{size:18}),onClick:()=>M.navigate(K.newsManage)},{key:"syllabus-management",label:"หลักสูตร",icon:e.jsx(Es,{size:18}),onClick:()=>M.navigate(K.syllabusManage)},{key:"grp",label:"ระบบ",type:"group",children:[{key:"home-photo",label:"รูปภาพนห้าเว็บ",icon:e.jsx(Ds,{size:18}),onClick:()=>M.navigate(K.homePhotoManage)},{key:"comsci-subject",label:"สิ่งที่เรียน",icon:e.jsx($s,{}),onClick:()=>M.navigate(K.comsciSubjectManage)},{key:"lecturer-system",label:"อาจารย์",icon:e.jsx(Ts,{size:18}),onClick:()=>M.navigate(K.lecturerMange)},{key:"settings",label:"ตั้งค่าระบบ",icon:e.jsx(Bs,{size:18}),onClick:()=>M.navigate(K.settingMange)}]}],mr=()=>e.jsx(Ls,{defaultSelectedKeys:["1"],mode:"inline",items:hr});function ur(){const{settingStore:{setting:s}}=w();return e.jsxs("div",{className:"py-4 text-gray-500 ",children:[e.jsx(R,{className:"ml-6 text-lg font-bold text-gray-800 ",to:"/",children:s==null?void 0:s.webName}),e.jsx("ul",{className:"mt-6",children:e.jsx(mr,{})})]})}const $t=N(ur),xr=()=>e.jsxs(e.Fragment,{children:[e.jsx(or,{children:e.jsx($t,{})}),e.jsx(dr,{children:e.jsx($t,{})})]});function gr(){const{sideBarStore:{toggleSidebar:s},userStore:{user:t,logout:a}}=w(),r=[{key:"me",label:"บัญชี",onClick:()=>M.navigate(f.account)},t&&t.roles&&t.roles.some(n=>n=="Admin")?{key:"3",label:"แอดมิน",onClick:()=>M.navigate(K.home)}:null,{key:"logout",danger:!0,label:"ออกจากระบบ",onClick:a}];return e.jsx("header",{className:"z-40 py-4 bg-white shadow-bottom",children:e.jsxs("div",{className:"container flex items-center justify-between h-full px-6 mx-auto ",children:[e.jsx("button",{className:"p-1 mr-5 -ml-1 rounded-md lg:hidden focus:outline-none focus:shadow-outline-purple",onClick:s,"aria-label":"Menu",children:e.jsx(As,{className:"w-6 h-6","aria-hidden":"true"})}),e.jsx("div",{className:"flex justify-center flex-1 lg:mr-32"}),e.jsx("ul",{className:"flex items-center flex-shrink-0 space-x-6",children:e.jsx(Be,{menu:{items:r},className:"cursor-pointer",children:e.jsx("a",{onClick:n=>n.preventDefault(),children:e.jsxs(L,{children:[e.jsx(Re,{src:t.image,icon:t.fullName[0]}),t.fullName.split(" ")[0],e.jsx(Jt,{})]})})})})]})})}const jr=N(gr),pr=()=>{const{sideBarStore:{isSidebarOpen:s,closeSidebar:t},homePhotoStore:{GetPhotos:a}}=w();let r=Hs();return g.useEffect(()=>{a(!1),t()},[r]),e.jsxs("div",{className:`flex bg-gray-50 ${s?"overflow-hidden":""}`,children:[e.jsx(xr,{}),e.jsxs("div",{className:"flex flex-col flex-1 w-full",children:[e.jsx(jr,{}),e.jsx(Z,{className:"pb-8",children:e.jsx(et,{})})]})]})},fr=N(pr),br=({photo:s})=>e.jsx(Yt,{autoplay:!0,lazyLoad:"progressive",className:"carousel--image z-0",draggable:!0,children:s.length>0?s.map(t=>e.jsx("img",{className:"img",src:t.url},t.id)):e.jsx("img",{className:"img",src:xe.baseURL+"image/homepage.jpg"},s.id)}),yr=({title:s,image:t,url:a})=>e.jsxs(F,{xs:24,md:8,lg:6,className:"w-full relative overflow-clip",children:[e.jsx("img",{src:t,className:"rounded-xl shadow-md brightness-75 w-full h-full object-cover"}),e.jsx(R,{to:a,className:"bg-white rounded-full px-4 py-2 text-lg absolute bottom-4 text-indigo-600 font-semibold translate-x-3 shadow-lg",children:s})]}),Nt=(s,t=40)=>s.length>t?s.substring(0,t)+"...":s;function wr(s){const t=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return s.replace(t,function(a){return'<a href="'+a+'" target="_blank" >'+a+"</a>"})}function Nr(s){const t=new Date,a=new Date(s),r=a.getFullYear()+543;if(a.toDateString()===t.toDateString())return"วันนี้";const n=new Date(t);return n.setDate(n.getDate()-1),a.toDateString()===n.toDateString()?"เมื่อวาน":Ce(a,"EEE dd MMM ",{locale:Se})+r}const vr=s=>tt(wr(s)),rs=({news:s})=>e.jsx(F,{xs:24,md:12,lg:6,onClick:()=>M.navigate(f.newsDetail(s.id)),children:e.jsxs("div",{className:"bg-gray-50 shadow-md md:bg-white rounded-md mb-2 cursor-pointer hover:shadow-lg duration-300",children:[e.jsx("div",{className:"flex-shrink-0 overflow-clip",children:e.jsx("img",{src:s.mainImage,className:"object-cover object-top w-full h-48 rounded-lg rounded-b-none hover:brightness-75 transition duration-500 ease-in-out",loading:"lazy"})}),e.jsxs("div",{className:"py-1",children:[e.jsx("div",{className:"px-4 py-2",children:e.jsx("h2",{className:"font-bold mb-2 md:mt-4 text-2xl text-gray-800",children:Nt(s.title)})}),e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"text-sm ml-2",children:[e.jsx("p",{className:"text-black leading-none"}),e.jsx("p",{className:"text-gray-700",children:Us(new Date(s.createdAt),Date.now(),{addSuffix:!0,locale:Se})})]})}),e.jsx("div",{className:"bg-indigo-500 hover:bg-indigo-600 text-white rounded-full px-4 py-2 cursor-pointer",onClick:()=>M.navigate(f.newsDetail(s.id)),children:"อ่านเพิ่มเติม"})]})]})]})}),vt=()=>e.jsxs("div",{className:"grid grid-cols-1 gap-8 mt-8 xl:mt-12 xl:gap-12 sm:grid-cols-2 xl:grid-cols-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"w-full h-36 bg-gray-300 rounded-lg dark:bg-gray-600"}),e.jsx("h1",{className:"w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"}),e.jsx("p",{className:"w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"})]}),e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"w-full h-36 bg-gray-300 rounded-lg dark:bg-gray-600"}),e.jsx("h1",{className:"w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"}),e.jsx("p",{className:"w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"})]}),e.jsxs("div",{className:"w-full ",children:[e.jsx("div",{className:"w-full h-36 bg-gray-300 rounded-lg dark:bg-gray-600"}),e.jsx("h1",{className:"w-56 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"}),e.jsx("p",{className:"w-24 h-2 mt-4 bg-gray-200 rounded-lg dark:bg-gray-700"})]})]}),Sr=()=>{const{newsStore:{loadNewses:s,stopLoading:t,newsRegistry:a,loading:r,setPagingParams:n}}=w();return g.useEffect(()=>{s().then(t)},[]),e.jsxs("div",{className:"py-6  text-gray-400",children:[e.jsx(L,{wrap:!0,align:"center",children:e.jsx(ue,{level:2,children:e.jsx("span",{className:"border-l-4 border-gray-500 pl-4 rounded-sm",children:"ข่าวประชาสัมพันธ์"})})}),r?e.jsx($,{className:"py-4",children:e.jsx(F,{span:24,children:e.jsx(vt,{})})}):a.size>0?e.jsxs(e.Fragment,{children:[e.jsx($,{gutter:[16,16],children:Array.from(a.values()).map((l,o)=>o<4&&e.jsx(rs,{news:l},l.id))}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"py-2",children:a.size>4&&e.jsx(C,{type:"dashed",children:"เพิ่มเติม",onClick:()=>M.navigate(f.news)})})]}):e.jsx(q,{className:"shadow-md rounded-md py-8"})]})},Cr=N(Sr),Pr=()=>e.jsx("svg",{className:"w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})}),kr=()=>e.jsx("svg",{className:"w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lr=()=>e.jsxs("svg",{id:"marker","data-name":"marker",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"48",viewBox:"0 0 20 48",children:[e.jsx("g",{id:"mapbox-marker-icon",children:e.jsxs("g",{id:"icon",children:[e.jsx("ellipse",{id:"shadow",cx:"10",cy:"27",rx:"9",ry:"5",fill:"#c4c4c4",opacity:"0.3",style:{isolation:"isolate"}}),e.jsx("g",{id:"mask",opacity:"0.3",children:e.jsx("g",{id:"group",children:e.jsx("path",{id:"shadow-2","data-name":"shadow",fill:"#bfbfbf",d:"M10,32c5,0,9-2.2,9-5s-4-5-9-5-9,2.2-9,5S5,32,10,32Z",fillRule:"evenodd"})})}),e.jsx("path",{id:"color",fill:"#f84d4d",stroke:"#951212",strokeWidth:"0.5",d:"M19.25,10.4a13.0663,13.0663,0,0,1-1.4607,5.2235,41.5281,41.5281,0,0,1-3.2459,5.5483c-1.1829,1.7369-2.3662,3.2784-3.2541,4.3859-.4438.5536-.8135.9984-1.0721,1.3046-.0844.1-.157.1852-.2164.2545-.06-.07-.1325-.1564-.2173-.2578-.2587-.3088-.6284-.7571-1.0723-1.3147-.8879-1.1154-2.0714-2.6664-3.2543-4.41a42.2677,42.2677,0,0,1-3.2463-5.5535A12.978,12.978,0,0,1,.75,10.4,9.4659,9.4659,0,0,1,10,.75,9.4659,9.4659,0,0,1,19.25,10.4Z"}),e.jsx("path",{id:"circle",fill:"#fff",stroke:"#951212",strokeWidth:"0.5",d:"M13.55,10A3.55,3.55,0,1,1,10,6.45,3.5484,3.5484,0,0,1,13.55,10Z"})]})}),e.jsx("rect",{width:"20",height:"48",fill:"none"})]}),Ir=()=>e.jsx("svg",{className:"w-6 h-6 rotate-90",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})}),Ge={time:()=>e.jsx(kr,{}),more:()=>e.jsx(Pr,{}),markerPinRed:()=>e.jsx(Lr,{}),send:()=>e.jsx(Ir,{})},ns=({lat:s=0,lng:t=0,isOnClick:a=!1})=>{const{settingStore:{changeSetting:r}}=w();return e.jsxs("div",{className:"mt-8 mb-2",children:[e.jsxs("div",{className:"mb-4 px-4 rounded-sm border-l-4 border-green-500",children:[e.jsx("p",{className:"text-lg",children:"สาขาวิทยาการคอมพิวเตอร์, มหาวิทยาลัยราชภัฏกาญจนบุรี"}),a&&e.jsxs("p",{children:[s,", ",s]})]}),e.jsxs(zs,{mapboxAccessToken:xe.mapboxKeyApi,mapStyle:"mapbox://styles/mapbox/streets-v12",initialViewState:{latitude:s,longitude:t,zoom:16},cursor:"mouse",style:{height:420},touchZoomRotate:!1,scrollZoom:!1,onClick:n=>{a&&r({latAndLng:n.lngLat})},children:[e.jsx(Os,{latitude:s,longitude:t,children:e.jsx(Ge.markerPinRed,{})}),e.jsx(Gs,{containerId:"map-container"}),e.jsx(Vs,{}),e.jsx(qs,{})]})]})},St=({url:s})=>e.jsx(Js,{controls:!0,height:"16rem",width:"100%",url:s}),Fr=({youtube:s=[]})=>e.jsx($,{gutter:[18,18],className:"py-12 ",children:s.map((t,a)=>e.jsx(F,{xs:24,md:8,lg:6,children:e.jsx(St,{url:t})},a))}),Rr=()=>{const{commonStore:{json:s},comSciSubject:{comsciSubjectRegistry:t}}=w();return e.jsx("section",{className:"py-20 bg-stone-100 overflow-x-clip",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-10 mx-auto items-center max-w-6xl ",children:[e.jsxs("div",{className:"px-4 md:mr-6",children:[e.jsx("h3",{className:"text-4xl pr-6 sm:leading-snug tracking-tight font-bold text-black",children:s["what-study"].title}),e.jsx("p",{className:"mt-4 text-stone-800 text-xl font-medium",children:s["what-study"].subTitle})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-indigo-500 transform -translate-x-10 relative h-64"}),e.jsx("div",{className:"transform rounded-md bg-white rotate-3 scale-110 translate-x-10 md:shadow-2xl -ml-4 -mt-44 p-12  space-y-2",children:e.jsx("div",{className:"px-4 sm:px-0 grid grid-cols-5 sm:grid-cols-4 gap-2 sm:gap-8 max-w-5xl mx-auto",children:Array.from(t.values()).map((a,r)=>e.jsx("img",{src:a.iconPreview},r))})})]})]})})},Mr=N(Rr),Er=()=>{const{homePhotoStore:{Photos:s},settingStore:{setting:t},commonStore:{json:a}}=w();return e.jsxs(e.Fragment,{children:[e.jsx(br,{photo:s}),e.jsxs(Z,{children:[e.jsx($,{gutter:[16,16],className:"my-8",children:Array.from(a["card-menu"]||[]).map((r,n)=>e.jsx(yr,{title:r.title,image:xe.baseURL+r.image,url:r.url},n))}),e.jsx(Cr,{}),e.jsx(Mr,{}),e.jsx(Fr,{youtube:t==null?void 0:t.youtubeList}),a["open-map-box"]&&e.jsx(ns,{lat:t==null?void 0:t.latAndLng.lat,lng:t==null?void 0:t.latAndLng.lng})]})]})},Dr=N(Er);function ye({path:s=[],text:t,tail:a,children:r}){return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"mt-6",children:[e.jsx(E.Item,{children:e.jsx(R,{to:K.home,children:"หน้าหลัก"})}),s.map((n,l)=>e.jsx(E.Item,{children:e.jsx(R,{to:n.route,children:n.label})},l)),e.jsx(E.Item,{children:t}),a&&e.jsx(E.Item,{children:a})]}),e.jsx("h1",{className:"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200",children:t})]})}const $r=({mapTable:s})=>{const{accountStore:{loadAccounts:t,setSearch:a,setPagingParams:r,setRole:n,pagingParams:l,predicate:o},modalStore:{openModal:c}}=w(),h=x=>{a(x),r(1,l.pageSize),t().then(s)},d=x=>{n(x),t().then(s)};return e.jsxs(L,{className:"py-4 px-2",wrap:!0,children:[e.jsx(D.Search,{allowClear:!0,defaultValue:o.get("search"),placeholder:"ค้นหา",onSearch:h,required:!0}),e.jsx(be,{defaultValue:"",style:{width:120},onChange:d,options:[{value:"",label:"ทั้งหมด"},{value:"0",label:"ทั่วไป"},{value:"1",label:"นักศึกษา"},{value:"2",label:"อาจารย์"},{value:"3",label:"แอดมิน"}]}),e.jsx(C,{type:"primary",shape:"round",children:"เพิ่มผู้ใช้",onClick:()=>c(e.jsx(as,{roleLect:!0}),"ลงทะเบียนผู้ใช้")})]})},Tr=N($r),Br=({data:s,columns:t})=>{const{accountStore:{loading:a,pagination:r,pagingParams:n,setPagingParams:l}}=w();return e.jsx(Wt,{className:"shadow-34 rounded-lg",title:()=>`รายชื่อ (${r==null?void 0:r.totalItems})`,pagination:{className:"mr-4",current:r==null?void 0:r.currentPage,total:r==null?void 0:r.totalItems,pageSize:n.pageSize,onChange:l,showSizeChanger:!0,pageSizeOptions:[10,30,50],style:{marginRight:8,marginLeft:8}},dataSource:s,columns:t,loading:a,locale:{emptyText:a?e.jsx(ae,{active:!0}):e.jsx(q,{})},scroll:{x:750}})},Ar=N(Br),{confirm:Hr}=Ae,Ur=({username:s,roleCurrent:t})=>{const{accountStore:{loadingSubmit:a,editUser:r},modalStore:{closeModal:n}}=w(),[l,o]=g.useState(!1),[c]=ge(),h=d=>{Hr({centered:!0,title:"ยืนยัน",icon:e.jsx(ft,{}),content:"ข้อมูลของผู้ใช้จะถูกแก้ไข",onOk:()=>{let x={currentUsername:s};Object.entries(d).forEach(([y,p])=>{p&&(x[y]=p)}),r(x).then(async()=>{X.success("สำเร็จ"),n()})}})};return e.jsxs(j,{form:c,layout:"vertical",initialValues:{email:"",username:"",password:"",role:t},onFinish:h,onFieldsChange:()=>o(!0),children:[e.jsx(j.Item,{label:"ชื่อผู้ใช้ หรือ รหัสนักศึกษา",name:"username",children:e.jsx(D,{prefix:e.jsx(_t,{})})}),e.jsx(j.Item,{label:"อีเมล",name:"email",rules:[{type:"email",message:"รูปแบบอีเมลไม่ถูกต้อง"}],children:e.jsx(D,{prefix:e.jsx(_s,{})})}),e.jsx(j.Item,{label:"รหัสผ่าน",name:"password",rules:[{min:6,message:"อย่างน้อย 6 ตัวอักษร"}],children:e.jsx(D,{prefix:e.jsx(gt,{}),type:"password"})}),e.jsx(j.Item,{label:"สถานะ",name:"role",children:e.jsxs(be,{children:[e.jsx(be.Option,{value:0,children:"ทั่วไป"}),e.jsx(be.Option,{value:1,children:"นักศึกษา"}),e.jsx(be.Option,{value:2,children:"อาจารย์"})]})}),e.jsx(j.Item,{children:e.jsx(C,{disabled:!l,loading:a,shape:"round",type:"primary",htmlType:"submit",children:"บันทึก"})})]})},zr=N(Ur),Or=()=>{const{modalStore:{openModal:s},accountStore:{loadAccounts:t,setTable:a,tableBody:r,accountsRegistry:n,pagingParams:l}}=w(),o=[{title:"ลำดับ",key:"index",dataIndex:"index"},{title:"ชื่อ-นามสกุล",key:"fullName",dataIndex:"fullName"},{title:"อีเมล",key:"email",dataIndex:"email"},{title:"สถานะ",key:"isRole",dataIndex:"isRole"},{title:"จัดการ",key:"action",render:h=>e.jsxs(L,{wrap:!0,children:[e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:()=>{},disabled:h.role==Q.admin,children:e.jsx(C,{danger:!0,disabled:h.role==Q.admin,shape:"round",children:e.jsx(ve,{size:18}),type:"primary"})}),e.jsx(Be,{disabled:h.role==Q.admin,menu:{items:[{key:"1",label:"แก้ไข",onClick:()=>s(e.jsx(zr,{username:h.key,roleCurrent:h.role}))}]},placement:"top",arrow:!0,children:e.jsx(C,{shape:"round",children:e.jsx(Ys,{})})})]})}];g.useEffect(()=>{t().then(c)},[l]);const c=()=>{const h=[];Array.from(n.values()).forEach((d,x)=>h.push({key:d.username,role:d.isRole,index:(l.currentPage-1)*l.pageSize+(x+1),fullName:e.jsxs(L,{wrap:!0,children:[e.jsx(R,{to:f.accountDetail(d.username),children:e.jsx(Re,{src:d.image,icon:d.fullName[0]})}),e.jsx(R,{to:f.accountDetail(d.username),children:d.fullName})]}),email:d.email,isRole:e.jsx(st,{color:"#faad14",style:{backgroundColor:"#faad14"},children:e.jsx("p",{children:Fe[d.isRole].th})})})),a(h)};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"ตารางรายชื่อผู้ใช้"}),e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsxs(F,{span:24,children:[e.jsx(Tr,{mapTable:c}),e.jsx(Ar,{data:r,columns:o})]})})]})},Gr=N(Or),Vr=({preview:s,formBody:t,onUploadChange:a,handleFieldsChange:r,submitLoading:n,handleSubmit:l})=>e.jsxs(j,{className:"form-photo",initialValues:{title:t.title},onFinish:l,onFieldsChange:r,children:[e.jsx(j.Item,{label:"เกี่ยวกับ",name:"title",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{prefix:e.jsx(Ws,{})})}),e.jsx(at,{grid:!0,modalTitle:"สัดส่วนรูปภาพ",aspect:21/9,quality:100,modalWidth:780,children:e.jsxs(je.Dragger,{name:"FileImage",beforeUpload:a,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"คลิกหรือลากไฟล์ไปยังพื้นที่นี้เพื่ออัปโหลด"}),e.jsx("p",{className:"ant-upload-hint",children:"รองรับการอัปโหลดครั้งเดียว"})]})}),s&&e.jsx("div",{className:"rounded-lg py-8 px-2",children:e.jsx(de,{width:"100%",src:URL.createObjectURL(s)})}),e.jsx(j.Item,{className:"my-4",children:e.jsx(C,{shape:"round",loading:n,type:"primary",htmlType:"submit",children:"บันทึก"})})]}),ke=({data:s,columns:t,isLoading:a,pagination:r=!1,title:n})=>e.jsx(Wt,{className:"shadow-md rounded-lg",pagination:r,title:n,dataSource:s,columns:t,loading:a,locale:{emptyText:a?e.jsx(ae,{active:!0}):e.jsx(q,{})},scroll:{x:750}}),qr=()=>{const s=[{title:"รูปภาพ",key:"url",dataIndex:"url"},{title:"เกี่ยวกับ",key:"title",dataIndex:"title"},{title:"แสดง",key:"isEnable",dataIndex:"isEnable"},{title:"จัดการ",key:"action",render:Y=>e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลรูปภาพจะถูกลบออกจากระบบ",onConfirm:()=>o(Y.key).then(k),children:e.jsx(te,{placement:"right",title:"ลบ",children:e.jsx(C,{shape:"round",danger:!0,children:e.jsx(ve,{size:18}),type:"primary"})})})}],{homePhotoStore:{GetPhotos:t,photoRegistry:a,tableBody:r,hidden:n,setTable:l,deletePhoto:o,formBody:c,submitLoading:h,clearFormBody:d,addPhoto:x,isLoading:y}}=w(),[p,m]=g.useState(!1),[b,v]=g.useState(c.fileImage);g.useEffect(()=>{t(!1).then(k)},[]);const k=()=>{var ee;const Y=[];(ee=Array.from(a.values()))==null||ee.forEach(G=>Y.push({key:G.id,title:G.title,url:e.jsx(de,{className:"rounded-lg ",width:240,src:G.url||"error"}),isEnable:e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:G.isEnable,onChange:()=>n(G).then(k)})})),l(Y)},I=()=>m(!p),O=Y=>{c.fileImage=Y,v(Y)},T=()=>{x().then(()=>{t(!1).then(k),v(void 0),d(),I()})},U=Y=>{var ee;c.title=(ee=Y.find(G=>G.name=="title"))==null?void 0:ee.value};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"รูปภาพหน้าเว็บ"}),e.jsx(L,{className:"mb-4",children:e.jsx(C,{shape:"round",type:p?"default":"primary",onClick:I,children:p?"กลับ":"เพิ่ม"})}),p?e.jsx("div",{className:"shadow-46 rounded-lg ",children:e.jsx(Vr,{preview:b,formBody:c,submitLoading:h,onUploadChange:O,handleSubmit:T,handleFieldsChange:U})}):e.jsx($,{className:"shadow-46 rounded-lg",children:e.jsx(F,{span:24,children:e.jsx(de.PreviewGroup,{children:e.jsx(ke,{data:r,columns:s,isLoading:y})})})})]})},Jr=N(qr),ht=({onChange:s,keyCurrent:t,value:a})=>{const[r,n]=g.useState(!1),[l,o]=g.useState(""),c=d=>{n(!0),o(d)},h=d=>{s(d),n(!1),o("")};return e.jsx(Ks,{editable:{icon:e.jsx(Zs,{size:18}),enterIcon:e.jsx(Xs,{size:18}),tooltip:"กดเพื่อแก้ไข",onStart:()=>c(t),onChange:h},children:r&&l==t?a:e.jsx(oe.Link,{href:a&&a,target:"_blank",children:a&&a})})},_r=({setting:s,preview:t,changeSetting:a,handleUploadFile:r})=>e.jsxs(J,{bordered:!0,children:[e.jsx(J.Item,{label:"โลโก้",children:e.jsxs(L,{wrap:!0,children:[e.jsx(de,{src:t?URL.createObjectURL(t):s&&s.logoPreview,width:120}),e.jsx(je,{showUploadList:!1,beforeUpload:r,children:e.jsx(C,{type:"default",children:"อัพโหลด"})})]})}),e.jsx(J.Item,{label:"ชื่อเว็บ",children:e.jsx(ht,{keyCurrent:"webName",value:s&&s.webName,onChange:n=>{a({...s,webName:n})}})}),e.jsx(J.Item,{label:"ลิ้งเว็บมหาวิทยาลัย",children:e.jsx(ht,{keyCurrent:"kru",value:s&&s.kruUrl,onChange:n=>{a({...s,kruUrl:n})}})}),e.jsx(J.Item,{label:"ลิ้งเว็บสมัครเรียน",children:e.jsx(ht,{keyCurrent:"reg",value:s&&s.registerUrl,onChange:n=>{a({...s,registerUrl:n})}})})]}),Yr=N(_r),is=s=>{const t=[];return s&&s.forEach(a=>t.push({title:a.title,description:a.description,cover:e.jsx("img",{src:xe.baseURL+a.pathImage,alt:a.pathImage})})),t},Wr=({tags:s})=>{const{settingStore:{changeSetting:t},commonStore:{json:a}}=w(),[r,n]=g.useState(""),l=g.useRef(null),[o,c]=g.useState(!1),[h,d]=g.useState(!1);g.useEffect(()=>{var m;o&&((m=l.current)==null||m.focus())},[]);const x=m=>{const b=s.filter((v,k)=>k!=m);t({youtubeList:b})},y=()=>{r.length>0&&(t({youtubeList:[...s,r]}),c(!1),n(""))},p=(m,b)=>e.jsx("span",{className:"inline-block",children:e.jsx(we,{closable:!0,onClose:v=>{v.preventDefault(),x(b)},children:m})},m);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-8",children:[o?e.jsx(D,{ref:l,type:"text",size:"small",style:{width:102},value:r,onChange:m=>n(m.target.value),onBlur:y,onPressEnter:y}):e.jsxs(L,{children:[e.jsxs(we,{className:"border-dashed",onClick:()=>c(!0),children:[e.jsx(Ne,{})," เพิ่ม"]}),e.jsx(Kt,{className:"cursor-pointer",onClick:()=>d(!0)})]}),e.jsx(bt,{enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:m=>{(m.type==="appear"||m.type==="enter")&&(m.target.style="display: inline-block")},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,className:"mt-4",children:s.map(p)}),e.jsx(Zt,{animated:!0,open:h,onClose:()=>d(!1),steps:is(a["youtube-guidelines"])})]}),e.jsx($,{gutter:[18,18],wrap:!0,children:s.map((m,b)=>e.jsx(F,{className:"w-full",sm:24,md:8,lg:6,children:e.jsx(St,{url:m})},b))})]})},Kr=N(Wr),Zr=()=>{const{settingStore:{loadSetting:s,updateSetting:t,setting:a,changeSetting:r,loading:n}}=w(),[l,o]=g.useState(void 0);g.useEffect(()=>{s()},[]);const c=(d,x)=>{o(d)},h=()=>{t({...a,fileImages:l,logoPreview:l?URL.createObjectURL(l):a==null?void 0:a.logoPreview}).then(()=>{X.success("บันทึกเรียบร้อย"),o(void 0)})};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"ตั้งค่าระบบ"}),e.jsx(C,{className:"mb-4 w-20",shape:"round",type:"primary",loading:n,onClick:h,children:"บันทึก"}),e.jsx("div",{className:"shadow-lg rounded-xl",children:e.jsxs("div",{className:"py-4 px-2 md:py-8 md:px-4 xl:py-12 xl:px-8",children:[e.jsx(Yr,{preview:l,handleUploadFile:c,setting:a,changeSetting:r}),e.jsx(Kr,{tags:a.youtubeList||[]}),e.jsx("div",{className:"h-10"}),e.jsx(ns,{lat:a==null?void 0:a.latAndLng.lat,lng:a==null?void 0:a.latAndLng.lng,isOnClick:!0}),e.jsx("div",{className:"h-6"})]})})]})},Xr=N(Zr),{Text:Qr}=oe,en=({user:s,onSubmit:t,loading:a})=>{const[r,n]=g.useState(),[l,o]=g.useState(),c=d=>{o(d)},h=async()=>{await t({...s,fileImages:l}).then(()=>{n(l),o(void 0)})};return e.jsxs(L,{align:"start",size:20,children:[e.jsx(st.Ribbon,{text:Et[s==null?void 0:s.isRole][1],color:Et[s==null?void 0:s.isRole][2],children:e.jsx(at,{modalTitle:"สัดส่วนรูปภาพ",quality:100,children:e.jsx(je,{disabled:!(s!=null&&s.isMe),name:"fileImages",showUploadList:!1,beforeUpload:c,children:e.jsx(de,{width:120,className:"rounded-lg shadow-46",src:l&&URL.createObjectURL(l)||r&&URL.createObjectURL(r)||(s==null?void 0:s.imagePreview)||"/image/blank-profile.png",preview:(s==null?void 0:s.image)!=null&&!(s!=null&&s.isMe)})})})}),e.jsxs("div",{className:"py-2",children:[e.jsx(ue,{level:2,children:e.jsx("p",{children:s==null?void 0:s.fullName})}),e.jsx(Qr,{children:e.jsx("p",{children:s==null?void 0:s.email})}),l&&e.jsx(C,{loading:a,type:"primary",shape:"round",onClick:h,children:"บันทึก"})]})]})},tn=N(en),sn=({user:s})=>e.jsxs(J,{size:"default",children:[e.jsx(J.Item,{label:"ชื่อ-นามสกุล",children:s.fullName}),Q.student==s.isRole&&e.jsx(J.Item,{label:"รหัสนักศึกษา",children:s.username}),e.jsx(J.Item,{label:"ประวัติ",children:s.bio}),Q.student==s.isRole?e.jsxs(e.Fragment,{children:[e.jsx(J.Item,{label:"ปีการศึกษา",children:s.student&&s.student.yearEdu}),e.jsx(J.Item,{label:"การศึกษาระดับมัธยม",children:s.student&&s.student.oldEdu}),e.jsx(J.Item,{label:"ที่อยู่",children:s.student&&s.student.address})]}):Q.lecturer==s.isRole&&e.jsxs(e.Fragment,{children:[e.jsx(J.Item,{label:"ความชำนาญ",children:s.lecturer&&s.lecturer.expert}),e.jsx(J.Item,{label:"การศึกษา",children:s.lecturer&&s.lecturer.lvEdu}),e.jsx(J.Item,{label:"ตำแหน่ง",children:s.lecturer&&s.lecturer.position}),e.jsx(J.Item,{label:"ติดต่อ",children:s.lecturer&&s.lecturer.contact})]})]}),an=({label:s,name:t,required:a=!1,errors:r,onChange:n,value:l})=>e.jsx(j.Item,{label:s,required:!0,rules:[{required:a,message:r[t]}],children:e.jsx(D,{name:t,onChange:n,value:l})}),rn=({onSubmit:s,initialValues:t,setEditMode:a,loadingSubmitted:r,isRole:n})=>{const l=async o=>{console.log(o),await s({fullName:o.fullName,bio:o.bio,student:o.student,lecturer:o.lecturer}).then(()=>a(!1)).catch(()=>alert())};return e.jsx(Qs,{enableReinitialize:!0,initialValues:t,onSubmit:l,validate:o=>{let c={};return o.fullName||(c.fullName="กรุณากรอกข้อมูล"),c},children:({handleSubmit:o,handleChange:c,dirty:h,isValid:d,values:x,setFieldValue:y,errors:p})=>e.jsxs(j,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onFinish:o,children:[e.jsx(an,{name:"fullName",label:"ชื่อ-นามสกุล",required:!0,errors:p,onChange:c,value:x.fullName}),e.jsx(j.Item,{label:"ประวัติ",children:e.jsx(Ze,{name:"bio",onChange:c,rows:2,value:x.bio||""})}),n==Q.student?e.jsxs(e.Fragment,{children:[e.jsx(j.Item,{label:"ปีการศึกษา",children:e.jsx(rt,{name:"student.yearEdu",picker:"year",onChange:m=>y("student.yearEdu",m==null?void 0:m.year())})}),e.jsx(j.Item,{label:"การศึกษาระดับมัธยม",children:e.jsx(D,{name:"student.oldEdu",value:x.student&&x.student.oldEdu,onChange:m=>y("student.oldEdu",m.target.value)})}),e.jsx(j.Item,{label:"ที่อยู่",children:e.jsx(Ze,{rows:2,name:"student.address",value:x.student&&x.student.address,onChange:m=>y("student.address",m.target.value)})})]}):n==Q.lecturer&&e.jsxs(e.Fragment,{children:[e.jsx(j.Item,{label:"ชำนาญ",children:e.jsx(D,{name:"lecturer.expert",value:x.lecturer&&x.lecturer.expert,onChange:m=>y("lecturer.expert",m.target.value)})}),e.jsx(j.Item,{label:"ระดับการศึกษา",children:e.jsx(D,{name:"lecturer.lvEdu",value:x.lecturer&&x.lecturer.lvEdu,onChange:m=>y("lecturer.lvEdu",m.target.value)})}),e.jsx(j.Item,{label:"ตำแหน่ง",children:e.jsx(D,{name:"lecturer.position",value:x.lecturer&&x.lecturer.position,onChange:m=>y("lecturer.position",m.target.value)})}),e.jsx(j.Item,{label:"ติดต่อ",children:e.jsx(Ze,{rows:2,name:"lecturer.contact",value:x.lecturer&&x.lecturer.contact,onChange:m=>y("lecturer.contact",m.target.value)})})]}),e.jsx(j.Item,{children:e.jsx(C,{loading:r,type:"primary",htmlType:"submit",shape:"round",disabled:!h||!d,children:"บันทึก"})})]})})},nn=({project:s,keyWordHidden:t=!1})=>{const{userStore:{user:a},projectStore:{deleteProject:r}}=w(),n=()=>{Ae.confirm({title:"ลบโครงงานวิจัย?",content:`ข้อมูลโครงงานวิจัย ${s.nameTH} จะถูกลบออกจากระบบ`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:e.jsx(ft,{}),async onOk(){await r(s.id)}})};return e.jsxs("section",{className:"relative bg-white w-full space-y-3 px-6 py-4 rounded-3xl shadow-lg border flex flex-col overflow-clip",children:[e.jsx("img",{src:s.imagePreview,className:"w-full h-32 object-cover rounded-xl hover:brightness-75 transition cursor-pointer",onClick:()=>M.navigate(f.projectDetail(s.id))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold",children:s.nameTH}),(a==null?void 0:a.username)==s.student.username&&e.jsxs(L,{wrap:!0,className:"font-extrabold",children:[e.jsx("p",{className:"bg-gray-200 rounded-full p-2 cursor-pointer group",onClick:()=>M.navigate(f.projectFormEdit(s.id)),children:e.jsx(Ee,{})}),e.jsx("p",{className:"bg-gray-200 rounded-full p-2 cursor-pointer group",onClick:n,children:e.jsx(ve,{})})]})]}),!t&&e.jsx(L,{wrap:!0,children:s.keyWordList.map((l,o)=>e.jsx("div",{className:"bg-blue-400 text-white text-md px-4 rounded-3xl",children:l},o))}),e.jsx("div",{className:"text-gray-600 font-light"}),e.jsx("button",{className:"bg-gray-800 hover:bg-gray-900 transition text-white py-1 rounded-2xl",onClick:()=>M.navigate(`/project/${s.id}`),children:"ดูเพิ่มเติม"})]})},ls=N(nn),ln=({projects:s})=>e.jsx($,{gutter:[16,16],wrap:!0,children:s.map((t,a)=>e.jsx(F,{className:"w-full",sm:24,md:12,lg:8,children:e.jsx(ls,{project:t,keyWordHidden:!0})},a))}),on=N(ln),cn=({projects:s})=>{const{userStore:{profile:t}}=w();return e.jsxs(e.Fragment,{children:[e.jsxs($,{justify:"space-between",className:"mb-4",children:[e.jsx(F,{children:e.jsx(ue,{level:4,children:e.jsxs("p",{children:["โครงงานวิจัย (",s.length,")"]})})}),e.jsx(F,{children:t.isMe&&e.jsx(C,{onClick:()=>M.navigate(f.projectForm),shape:"round",type:"primary",children:"สร้างโครงงาน"})})]}),s.length<1?e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE}):e.jsx(on,{projects:s})]})},dn=N(cn);class hn{constructor(){i(this,"currentPassword","");i(this,"newPasswords","")}}const mn=()=>{const[s]=ge(),{userStore:{loadingSubmit:t,resetPassword:a}}=w(),r=n=>{a(n).then(()=>{X.success("สำเร็จ"),s.resetFields()})};return e.jsxs(j,{layout:"vertical",form:s,initialValues:new hn,onFinish:r,children:[e.jsx(j.Item,{label:"รหัสผ่านปัจจุบัน",name:"currentPassword",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{prefix:e.jsx(gt,{}),type:"password"})}),e.jsx(j.Item,{label:"รหัสผ่านใหม่",name:"newPassword",rules:[{required:!0,message:"กรุณากรอกข้อมูล!"},{min:6,message:"อย่างน้อย 6 ตัวอักษร"}],children:e.jsx(D,{prefix:e.jsx(gt,{}),type:"password"})}),e.jsx(j.Item,{children:e.jsx(C,{loading:t,shape:"round",type:"primary",htmlType:"submit",children:"บันทึก"})})]})},un=N(mn),xn=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"lg:w-96",children:[e.jsx(ue,{level:4,children:e.jsx("p",{children:"เปลี่ยนรหัสผ่าน"})}),e.jsx(un,{})]})}),gn=N(xn),mt=({name:s,label:t,required:a=!1})=>e.jsx(j.Item,{label:t,name:s,required:a,rules:[a&&{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{})}),jn=({setFormMode:s})=>{const{jobHistoryStore:{updateJobHistory:t,submittingLoading:a},userStore:{profile:r}}=w(),[n]=ge();g.useEffect(()=>{if(r!=null&&r.jobHistory){let o={...r.jobHistory,date:$e(r.jobHistory.date)};n.setFieldsValue(o)}},[]);const l=o=>{t(o).then(()=>s(!1))};return e.jsxs(j,{className:"py-4",layout:"vertical",form:n,onFinish:l,children:[e.jsx(mt,{label:"ชื่องาน",name:"jobName",required:!0}),e.jsx(mt,{label:"ชื่อบริษัท",name:"company",required:!0}),e.jsx(mt,{label:"ตำแหน่ง",name:"position",required:!0}),e.jsx(j.Item,{label:"วันที่เริ่มงาน",name:"date",required:!0,children:e.jsx(rt,{picker:"month",format:"MMMM, YYYY"})}),e.jsx(j.Item,{label:"รายละเอียด",name:"description",children:e.jsx(Ze,{rows:2})}),e.jsx(j.Item,{children:e.jsx(C,{shape:"round",type:"primary",htmlType:"submit",children:"บันทึก",loading:a})})]})},pn=N(jn),fn=()=>{const{userStore:{profile:s},jobHistoryStore:{meRemoveJobHistory:t}}=w(),{jobHistory:a}=s,[r,n]=g.useState(!1);return e.jsxs(e.Fragment,{children:[s.isMe&&!a&&e.jsx(C,{onClick:()=>n(!r),shape:"round",type:"dashed",children:"เพิ่มประวัติการทำงาน"}),r?e.jsx(pn,{setFormMode:n}):a?e.jsx(Xt,{title:a.jobName,extra:(s==null?void 0:s.isMe)&&e.jsxs(L,{wrap:!0,children:[e.jsx(C,{shape:"round",type:"primary",onClick:()=>n(!r),children:e.jsx(Ee,{})}),e.jsx(Me,{title:"ลบ",placement:"topRight",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:t,children:e.jsx(C,{shape:"round",type:"primary",danger:!0,children:e.jsx(ve,{})})})]}),children:e.jsxs(J,{children:[e.jsx(J.Item,{label:"บริษัท",children:a.company}),e.jsx(J.Item,{label:"ตำแหน่ง",children:a.position}),e.jsx(J.Item,{label:"รายละเอียด",children:a.description}),e.jsx(J.Item,{label:"วันที่เริ่มทำงาน",children:Ce(new Date(a.date),`MMMM ${new Date(a.date).getFullYear()+543}`,{locale:Se})})]})}):e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE})]})},bn=N(fn),yn=({course:s})=>{const{userStore:{user:t},courseStore:{deleteCourse:a}}=w(),r=()=>{Ae.confirm({centered:!0,title:"ยืนยัน",content:`ข้อมูลหลักสูตร ${s.title} และข้อมูลการรับลงทะเบียนจะถูกลบออกจากระบบ`,onOk:()=>a(s.id)})};return e.jsxs("div",{className:"relative bg-white shadow-md rounded-2xl p-2 cursor-pointer hover:transform hover:scale-105 hover:shadow-lg duration-300",children:[e.jsxs("div",{className:"overflow-x-hidden rounded-2xl relative",children:[e.jsx("img",{className:"h-40 rounded-2xl w-full object-cover object-top hover:brightness-75 transition duration-500 ease-in-out",onClick:()=>M.navigate(f.courseDetail(s.id)),src:s.image,loading:"lazy"}),(t==null?void 0:t.username)==s.lecturer.username&&e.jsx("p",{className:"absolute right-2 top-2 bg-white rounded-full p-2 cursor-pointer group",onClick:r,children:e.jsx(ve,{})})]}),e.jsxs("div",{className:"mt-4 pl-2 mb-2 flex justify-between ",children:[e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-gray-900 mb-0",children:s.title})}),e.jsx("div",{className:"flex flex-col-reverse mb-1 mr-4 group cursor-pointer",children:(t==null?void 0:t.username)==s.lecturer.username&&e.jsx(Ee,{onClick:()=>M.navigate(f.coursesFormEdit(s.id))})})]})]})},os=N(yn),wn=()=>{const{courseStore:{courseRegistry:s,clearRegistry:t,loading:a,loadCourses:r,setPredicate:n},userStore:{profile:l}}=w();return g.useEffect(()=>{n("hostUsername",l==null?void 0:l.username),t(),r()},[]),e.jsxs(e.Fragment,{children:[(l==null?void 0:l.isMe)&&l.isRole==Q.lecturer&&e.jsx(L,{wrap:!0,className:"mb-4",children:e.jsx(C,{type:"primary",shape:"round",children:"หลักสูตรใหม่",onClick:()=>M.navigate(f.coursesForm)})}),a?e.jsx(ae,{active:!0}):Array.from(s.values()).length<1&&e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}),e.jsx($,{className:"mb-4",gutter:[16,16],children:Array.from(s.values()).map((o,c)=>e.jsx(F,{xs:24,sm:12,md:8,lg:6,className:"w-ful",children:e.jsx(os,{course:o})},c))})]})},Nn=N(wn),vn=()=>{const{username:s}=fe(),{pathname:t}=Te(),{userStore:{user:a,profile:r,Loading:n,loadingSubmit:l,accountTabCurrent:o,loadProfile:c,updateMe:h,setAccountTabCurrent:d},projectStore:{projectRegistry:x}}=w(),[y,p]=g.useState(!1);if(g.useEffect(()=>{s||a?c(s||(a==null?void 0:a.username)):M.navigate("*")},[t]),!r||n)return e.jsx(Z,{children:e.jsx(ae,{active:!0,className:"py-8"})});const m=[{label:"ข้อมูลส่วนตัว",key:"0",children:e.jsxs(e.Fragment,{children:[e.jsxs($,{justify:"space-between",children:[e.jsx(F,{children:e.jsx(ue,{level:4,children:e.jsx("p",{children:"ข้อมูลส่วนตัว"})})}),e.jsx(F,{children:r.isMe&&e.jsx(C,{onClick:()=>p(!y),shape:"round",type:y?"default":"primary",children:y?"กลับ":"แก้ไข"})})]}),e.jsx("div",{children:y?e.jsx(rn,{onSubmit:h,initialValues:r,setEditMode:p,loadingSubmitted:l,isRole:r.isRole}):e.jsx(sn,{user:r})})]})}];return Q.student==r.isRole?(m.push({label:"โครงงานวิจัย",key:"projects",children:e.jsx(dn,{projects:Array.from(x.values())})}),m.push({label:"ประวัติการทำงาน",key:"job-history",children:e.jsx(bn,{})})):Q.lecturer==r.isRole&&m.push({label:"หลักสูตรระยะสั้น",key:"course-manage",children:e.jsx(Nn,{})}),r.isMe&&m.push({label:"ตั้งค่า",key:"settings",children:e.jsx(gn,{})}),e.jsx(Z,{children:e.jsx("div",{className:"shadow-lg rounded-xl min-h-screen bg-white mb-4 lg:py-12 lg:px-16 md:py-4 md:px-8 py-4 px-2",children:e.jsxs(L,{wrap:!0,direction:"vertical",className:"w-full",children:[e.jsx(tn,{user:r,onSubmit:h,loading:l}),e.jsx(ce,{plain:!0}),e.jsx(ea,{defaultActiveKey:o,onChange:d,tabPosition:"left",items:m})]})})})},Tt=N(vn),Sn=({photos:s})=>e.jsxs(de.PreviewGroup,{children:[e.jsx(ue,{level:5,className:"mt-8",children:e.jsx("span",{children:"รูปภาพ"})}),e.jsx($,{wrap:!0,gutter:[16,16],children:s.map(t=>e.jsx(F,{xs:24,md:12,lg:6,children:e.jsx(de,{src:t.previewURL,className:"rounded-xl object-cover object-top shadow-46",width:"100%",height:240})},t.id))})]}),A=s=>"http://coms.kru.ac.th/comsci/api".split("api")[0]+"image-upload/"+s,Ct=s=>"http://coms.kru.ac.th/comsci/api".split("api")[0]+"file-upload/"+s,cs=s=>e.jsxs(e.Fragment,{children:[Ce(new Date(s),"d MMMM yyyy HH:mm",{locale:Se}),ta(new Date(s),{addSuffix:!0,locale:Se})]}),Cn=({newsSelected:s})=>{var t,a,r,n,l,o;return e.jsxs("main",{className:"mt-8",children:[e.jsxs("div",{className:"mb-4 md:mb-0 w-full mx-auto relative",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-semibold text-gray-800 leading-tight",children:s.title}),e.jsx("div",{className:"py-2 text-gray-700 inline-flex items-center justify-center mb-2",children:e.jsxs(L,{children:[e.jsx(sa,{}),cs(s.createdAt)]})})]}),e.jsx("img",{src:A(s.mainImage),className:"w-full object-cover lg:rounded",style:{height:"28em"}})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-12",children:[e.jsxs("div",{className:"px-4 lg:px-0 mt-12 text-gray-700 text-lg leading-relaxed w-full lg:w-3/4",children:[e.jsx("div",{className:"border-l-4 border-gray-500 pl-4 mb-6 italic rounded",children:s.subTitle}),e.jsx("p",{className:"pb-6",children:tt(s.body)})]}),e.jsx("div",{className:"w-full lg:w-1/4 m-auto mt-12 max-w-screen-sm",children:e.jsx("div",{className:"p-2 px-4 border-t border-b md:border md:rounded",children:e.jsxs("div",{className:"flex py-2",children:[e.jsx(R,{to:f.accountDetail((t=s.author)==null?void 0:t.username),children:(a=s.author)!=null&&a.image?e.jsx("img",{src:A((r=s.author)==null?void 0:r.image),className:"h-10 w-10 rounded-full mr-2 object-cover"}):e.jsx("div",{className:"avatar-initials w-10 h-10 mr-2 rounded-full flex items-center justify-center bg-gray-500 text-lg text-white font-bold",children:(n=s.author)==null?void 0:n.fullName.charAt(0)})}),e.jsxs("div",{children:[e.jsx(R,{to:f.accountDetail((l=s.author)==null?void 0:l.username),children:e.jsx("p",{className:"font-semibold text-gray-700 text-sm",children:(o=s.author)==null?void 0:o.fullName})}),e.jsx("p",{className:"font-semibold text-gray-600 text-xs",children:"ผู้เขียน"})]})]})})})]})]})},Pn=()=>{const{id:s}=fe(),{newsStore:{loadNews:t,newsSelected:a,clearSelectNews:r,loading:n}}=w();return g.useEffect(()=>(s&&t(s),()=>r()),[s,t,r]),!a||n?e.jsx(Z,{children:e.jsx("div",{className:"px-2 py-2 md:py-8 md:px-20 bg-white shadow-46 rounded-lg h-screen",children:e.jsx(ae,{active:!0})})}):e.jsxs(Z,{className:"pb-4",children:[e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.news,children:"ข่าวประชาสัมพันธ์"})}),e.jsx(E.Item,{children:e.jsx("span",{children:Nt(a.subTitle,40)})})]}),e.jsx(Cn,{newsSelected:a}),a.newsPhotos.length>0&&e.jsx(Sn,{photos:a==null?void 0:a.newsPhotos})]})},kn=N(Pn),Ln=({submitLoading:s,editCurrent:t,preview:a,handleUploadFiles:r,removeFileImage:n,handleValuesChange:l,handleSubmit:o,setEditCurrent:c,formBody:h})=>{var k;const{newsStore:{clearFormBody:d,clearSelectNews:x,setFormBody:y,deletePhotoNews:p}}=w(),[m]=ge();g.useEffect(()=>(t&&m.setFieldsValue(h),()=>{t&&(x(),d(),c(null))}),[]);const b=I=>{var O;y({newsPhotos:(O=h.newsPhotos)==null?void 0:O.map(T=>Object.assign(T,{isMain:I===T.id}))})},v=async I=>{await p(I).then(()=>{X.success("สำเร็จ",2)})};return e.jsxs(j,{form:m,className:"py-4 px-2 md:py-8 md:px-4 xl:py-12 xl:px-8 shadow-46 rounded-lg",layout:"vertical",onValuesChange:l,onFinish:o,children:[e.jsxs($,{gutter:[16,16],children:[e.jsxs(F,{xs:24,lg:12,children:[e.jsx(j.Item,{name:"title",label:"หัวข้อ",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{showCount:!0,maxLength:120,autoSize:{minRows:1,maxRows:4}})}),e.jsx(j.Item,{name:"subTitle",label:"รายละเอียดเพิ่มเติม",children:e.jsx(D.TextArea,{showCount:!0,maxLength:300,autoSize:{minRows:1,maxRows:4}})}),e.jsx(j.Item,{name:"body",label:"เนื้อหา",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(He,{value:m.getFieldValue("body")})})]}),e.jsx(F,{xs:24,lg:12,children:e.jsx(j.Item,{label:"อัพโหลดรูปภาพ",valuePropName:"fileList",required:!0,children:e.jsxs(e.Fragment,{children:[e.jsxs(je.Dragger,{multiple:!0,showUploadList:!1,beforeUpload:r,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"คลิ้กหรือลากไฟล์ไปยังพื้นที่นี้เพื่ออัปโหลด"}),e.jsx("p",{className:"ant-upload-hint",children:"รองรับการอัปโหลดหลายครั้ง"})]}),a&&e.jsx($,{gutter:[16,16],className:"mt-4",children:a.map((I,O)=>e.jsx(F,{xs:12,md:8,lg:6,children:e.jsxs("div",{className:"relative rounded-md shadow-md w-full h-36",children:[e.jsx("img",{className:"w-full h-full object-cover rounded-md shadow-md",src:URL.createObjectURL(I)}),e.jsx(te,{placement:"top",title:"นำออก",children:e.jsx("button",{type:"button",onClick:()=>n(O),className:"absolute top-2 right-2 text-gray-600 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.364 5.636a.996.996 0 0 0-1.414 0L12 10.586 7.05 5.636a.996.996 0 1 0-1.414 1.414L10.586 12l-4.95 4.95a.996.996 0 1 0 1.414 1.414L12 13.414l4.95 4.95a.996.996 0 1 0 1.414-1.414L13.414 12l4.95-4.95a.996.996 0 0 0 0-1.414z"})})})})]})},O))}),t&&e.jsx($,{gutter:[16,16],className:"mt-4",children:(k=h.newsPhotos)==null?void 0:k.map((I,O)=>e.jsx(F,{xs:12,md:8,lg:6,children:e.jsxs("div",{className:"relative rounded-md shadow-md w-full h-36",children:[e.jsx("img",{className:"w-full h-full object-cover rounded-md shadow-md",src:I.previewURL}),e.jsx(te,{placement:"top",title:"นำออก",children:e.jsx("button",{type:"button",onClick:()=>v(I.id),disabled:I.isMain,className:"absolute top-2 right-2 text-gray-600 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.364 5.636a.996.996 0 0 0-1.414 0L12 10.586 7.05 5.636a.996.996 0 1 0-1.414 1.414L10.586 12l-4.95 4.95a.996.996 0 1 0 1.414 1.414L12 13.414l4.95 4.95a.996.996 0 1 0 1.414-1.414L13.414 12l4.95-4.95a.996.996 0 0 0 0-1.414z"})})})}),e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx(te,{placement:"top",title:"ตั้งเป็นรูปปก",children:e.jsx(Pe,{disabled:I.isMain,onClick:()=>b(I.id),defaultChecked:I.isMain})})})]})},O))})]})})})]}),e.jsx(j.Item,{className:"my-4",children:e.jsx(C,{loading:s,shape:"round",type:"primary",htmlType:"submit",children:"บันทึก"})})]})},In=({deleteNews:s,mapTable:t,setCurrentEdit:a})=>[{title:"ประชาสัมพันธ์",key:"mainImage",dataIndex:"mainImage"},{title:"หัวข้อ",key:"title",dataIndex:"title"},{title:"วันที่",key:"createdAt",dataIndex:"createdAt"},{title:"แสดง",key:"isHidden",dataIndex:"isHidden"},{title:"จัดการ",key:"action",render:r=>e.jsxs(L,{wrap:!0,children:[e.jsx(te,{placement:"top",title:"รายละเอียด",children:e.jsx(C,{shape:"round",type:"default",children:e.jsx(nt,{size:18}),onClick:()=>M.navigate(f.newsDetail(r.key))})}),e.jsx(te,{placement:"top",title:"แก้ไข",children:e.jsx(C,{shape:"round",type:"primary",color:"yellow",onClick:()=>a(r.key),children:e.jsx(Ee,{size:18})})}),e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:()=>s(r.key).then(t),children:e.jsx(te,{placement:"right",title:"ลบ",children:e.jsx(C,{shape:"round",danger:!0,children:e.jsx(ve,{size:18}),type:"primary"})})})]})}],Fn=()=>{const{newsStore:{setTable:s,loadNewses:t,hidden:a,setPagingParams:r,deleteNews:n,addNews:l,setSearch:o,loadNews:c,newsRegistry:h,tableBody:d,loading:x,predicate:y,pagination:p,pagingParams:m,submitLoading:b,formBody:v,setEditCurrentNews:k,editNews:I,setFormBody:O}}=w(),[T,U]=g.useState(),[Y,ee]=g.useState(!1),[G,H]=g.useState(v.fileImages);g.useEffect(()=>{y.set("ShowAll",!0),t().then(he)},[m]);const he=()=>{let me=[];Array.from(h.values()).forEach(ne=>{me.push({key:ne.id,title:Nt(ne.title),createdAt:e.jsx(L,{children:cs(ne.createdAt)}),isHidden:e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:!ne.isHidden,onChange:()=>a(ne).then(he)}),mainImage:e.jsx(de,{className:"items-center object-cover object-top rounded-lg ",src:ne.mainImage,width:160,height:90})})}),s(me)},Je=()=>ee(!Y),lt=(me,ne)=>{H(ne),O({fileImages:ne})},ot=me=>{let ne=v.fileImages.filter((Xl,bs)=>bs!=me);O({fileImages:ne}),H(ne)},Oe=(me,ne)=>{O({...ne})},_=async()=>{try{T?await I(T):await l(),H(void 0),Je(),t().then(he)}catch(me){X.error(me,2)}},re=me=>{h.clear(),o(me),r(1,m.pageSize),t().then(he)},fs=me=>{c(me).then(()=>{U(me),ee(!0),k()})};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"ข่าวประชาสัมพันธ์",tail:T&&v.title}),e.jsx(L,{wrap:!0,className:"mb-4",children:e.jsx(C,{shape:"round",type:Y?"default":"primary",onClick:Je,children:Y?"กลับ":"เพิ่ม"})}),Y?e.jsx(Ln,{editCurrent:T,setEditCurrent:U,formBody:v,preview:G,submitLoading:b,handleSubmit:_,handleValuesChange:Oe,handleUploadFiles:lt,removeFileImage:ot}):e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsxs(F,{span:24,children:[e.jsx(L,{wrap:!0,className:"py-4 px-2",children:e.jsx(D.Search,{allowClear:!0,defaultValue:y.get("Search"),placeholder:"ค้นหา",onSearch:re,required:!0})}),e.jsx(de.PreviewGroup,{children:e.jsx(ke,{data:d,isLoading:x,columns:In({deleteNews:n,mapTable:he,setCurrentEdit:fs}),pagination:{current:p==null?void 0:p.currentPage,total:p==null?void 0:p.totalItems,pageSize:m.pageSize,onChange:r,showSizeChanger:!0,pageSizeOptions:[10,30,50],style:{marginRight:8,marginLeft:8}}})})]})})]})},Rn=N(Fn),Mn=()=>e.jsx(aa,{status:"404",title:"404",subTitle:"ขออภัย หน้าที่คุณเยี่ยมชมไม่มีอยู่",extra:e.jsx(C,{type:"primary",onClick:()=>M.navigate(f.home),children:"กลับหน้าหลัก"})}),En=({setProjectSelect:s})=>[{title:"ลำดับ",key:"index",dataIndex:"index"},{title:"โครงงาน",key:"nameTH",dataIndex:"nameTH"},{title:"นักศึกษา",key:"student",dataIndex:"student"},{title:"วันที่",key:"createdAt",dataIndex:"createdAt"},{title:"แสดง",key:"isUsed",dataIndex:"isUsed"},{title:"จัดการ",key:"manage",render:t=>e.jsx(L,{wrap:!0,children:e.jsx(te,{placement:"top",title:"รายละเอียด",children:e.jsx(C,{shape:"round",type:"default",children:e.jsx(nt,{size:18}),onClick:()=>{s(t.key),M.navigate(f.projectDetail(t.key))}})})})}],Dn=({mapTable:s})=>{const{projectStore:{predicate:t,pagingParams:a,projectRegistry:r,setPagingParams:n,loadProjects:l,setPredicate:o}}=w(),c=h=>{r.clear(),o({search:h}),n(1,a.pageSize),l().then(s)};return e.jsx(L,{wrap:!0,className:"px-2 py-4",children:e.jsx(D.Search,{allowClear:!0,className:"mb-2",defaultValue:t.get("search"),placeholder:"ค้นหา",onSearch:c,required:!0})})},$n=()=>{const{projectStore:{loadProjects:s,setTable:t,hidden:a,setProjectSelect:r,setPagingParams:n,setPredicate:l,tableBody:o,loading:c,projectRegistry:h,pagination:d,pagingParams:x}}=w();g.useEffect(()=>{l({showHidden:!0}),s().then(y)},[x]);const y=()=>{let p=[];Array.from(h.values()).forEach((m,b)=>{p.push({key:m.id,index:(x.currentPage-1)*x.pageSize+(b+1),nameTH:e.jsx(L,{wrap:!0,children:e.jsx(R,{to:f.projectDetail(m.id),children:m.nameTH})}),student:e.jsxs(L,{wrap:!0,children:[e.jsx(Re,{src:m.student.image,icon:m.student.fullName[0]}),e.jsx(R,{to:f.accountDetail(m.student.username),children:m.student.fullName})]}),isUsed:e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:m.isUsed,onChange:()=>a(m)}),createdAt:Ce(new Date(m.createdAt),"d MMMM yyyy HH:mm",{locale:Se})})}),t(p)};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"โครงงานนักศึกษา"}),e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsxs(F,{span:24,children:[e.jsx(Dn,{mapTable:y}),e.jsx(ke,{isLoading:c,data:o,columns:En({setProjectSelect:r}),pagination:{current:d==null?void 0:d.currentPage,total:d==null?void 0:d.totalItems,pageSize:x.pageSize,onChange:n,showSizeChanger:!0,pageSizeOptions:[10,30,50],style:{marginRight:8,marginLeft:8}}})]})})]})},Tn=N($n),Bn=({project:s})=>e.jsxs("div",{className:"mb-4",children:[e.jsx(de,{className:"rounded-lg",width:"100%",src:s.imagePreview,alt:s.nameTH}),e.jsxs("div",{className:"flex bg-white shadow-lg rounded-lg overflow-hidden my-2",children:[e.jsx("div",{className:"w-2 bg-gray-800"}),e.jsxs("div",{className:"flex items-center px-2 py-3",children:[e.jsx("img",{className:"w-12 h-12 object-cover rounded-full",src:s.student.image}),e.jsxs("div",{className:"mx-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.jsx(R,{to:`/account/${s.student.username}`,children:s.student.fullName})}),e.jsx("p",{className:"text-gray-600",children:s.student.email})]})]})]})]}),An=({project:s})=>e.jsxs(e.Fragment,{children:[e.jsx(ue,{level:2,children:e.jsx("p",{children:s.nameTH})}),e.jsx(ce,{})]}),Hn=({project:s})=>e.jsxs(e.Fragment,{children:[e.jsx(St,{url:s.videoUrl}),e.jsxs(L,{className:"py-4",children:[e.jsx(we,{onClick:()=>window.open(s.webUrl),className:"cursor-pointer",icon:e.jsx(ra,{size:36}),color:"#55acee",children:"Web"}),e.jsx(we,{onClick:()=>window.open("https://youtu.be/"+s.videoUrl),className:"cursor-pointer",icon:e.jsx(Qt,{size:36}),color:"#cd201f",children:"Youtube"}),e.jsx(we,{onClick:()=>window.open(s.githubUrl),className:"cursor-pointer",icon:e.jsx(es,{size:36}),color:"#24292F",children:"Github"})]})]}),Un=()=>{const{projectStore:{projectSelected:s}}=w();return e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"rounded-lg bg-red-300 text-white p-8 my-12 flex flex-col md:flex-row space-between items-center justify-between relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col lg:ml-14 xl:ml-28 max-w-sm lg:max-w-xl z-10",children:[e.jsx("h4",{className:"text-4xl text-center md:text-left font-bold text-white md:pb-2",children:s==null?void 0:s.nameTH}),e.jsx("p",{className:"text-center md:text-left text-white opacity-70 md:pb-6",children:s==null?void 0:s.nameEN})]}),e.jsx("div",{className:"pt-8 md:pt-0 justify-center lg:ml-auto z-10",children:e.jsxs("a",{href:Ct(s==null?void 0:s.pdf),target:"_blank",download:!0,className:"flex items-center px-8 py-4 text-center text-sm text-red-300 uppercase bg-white font-display rounded-full transition duration-200 hover:bg-red-600 hover:text-white",children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9.75081 17.2493C9.55189 17.2493 9.36116 17.1702 9.22052 17.0295L6.22027 14.0293C6.08364 13.8878 6.00803 13.6984 6.00974 13.5017C6.01145 13.305 6.09034 13.1169 6.22941 12.9778C6.36847 12.8388 6.55661 12.7599 6.75327 12.7582C6.94993 12.7565 7.1394 12.8321 7.28086 12.9687L9.75081 15.4387L12.2208 12.9687C12.3622 12.8321 12.5517 12.7565 12.7484 12.7582C12.945 12.7599 13.1332 12.8388 13.2722 12.9778C13.4113 13.1169 13.4902 13.305 13.4919 13.5017C13.4936 13.6984 13.418 13.8878 13.2814 14.0293L10.2811 17.0295C10.1405 17.1702 9.94972 17.2493 9.75081 17.2493Z",fill:"currentColor"}),e.jsx("path",{d:"M9.75081 17.2493C9.55189 17.2493 9.36116 17.1702 9.22052 17.0295C9.07986 16.8889 9.00075 16.6982 9.00075 16.4992V8.99862C9.00075 8.79969 9.07977 8.60891 9.22044 8.46825C9.3611 8.32758 9.55187 8.24856 9.7508 8.24856C9.94973 8.24856 10.1405 8.32758 10.2812 8.46825C10.4219 8.60891 10.5009 8.79969 10.5009 8.99862V16.4992C10.5009 16.6982 10.4218 16.8889 10.2811 17.0295C10.1405 17.1702 9.94972 17.2493 9.75081 17.2493Z",fill:"currentColor"}),e.jsx("path",{d:"M14.2512 20.2496H5.25044C5.05151 20.2496 4.86073 20.1705 4.72006 20.0299C4.5794 19.8892 4.50038 19.6984 4.50038 19.4995C4.50038 19.3006 4.5794 19.1098 4.72006 18.9691C4.86073 18.8285 5.05151 18.7494 5.25044 18.7494H14.2512C14.4501 18.7494 14.6409 18.8285 14.7816 18.9691C14.9222 19.1098 15.0012 19.3006 15.0012 19.4995C15.0012 19.6984 14.9222 19.8892 14.7816 20.0299C14.6409 20.1705 14.4501 20.2496 14.2512 20.2496Z",fill:"currentColor"}),e.jsx("path",{d:"M17.5777 23.9999H1.92616C1.42235 24.0057 0.936772 23.8116 0.575754 23.4602C0.214737 23.1087 0.00770565 22.6285 0 22.1247V6.71618C0.00215083 6.05974 0.262716 5.43055 0.725307 4.96479L4.96391 0.726183C5.19337 0.495213 5.46641 0.312101 5.76718 0.187465C6.06796 0.062829 6.39048 -0.000846655 6.71606 0.000126796H17.577C18.0806 -0.00568399 18.566 0.188433 18.9268 0.539932C19.2876 0.891432 19.4943 1.37164 19.5016 1.87528V22.127C19.4939 22.6302 19.2871 23.1098 18.9265 23.4608C18.5659 23.8119 18.0809 24.0057 17.5777 23.9999ZM6.71606 1.498C6.58773 1.49756 6.46059 1.52259 6.34201 1.57165C6.22343 1.6207 6.11576 1.69281 6.02524 1.78377L1.7859 6.02313C1.60348 6.20684 1.5008 6.45504 1.50013 6.71393V22.1225C1.50764 22.2284 1.55654 22.3271 1.63626 22.3973C1.71598 22.4675 1.82012 22.5035 1.92616 22.4975H17.577C17.6829 22.5035 17.7868 22.4674 17.8663 22.3972C17.9458 22.327 17.9944 22.2283 18.0015 22.1225V1.87078C17.9944 1.76497 17.9458 1.66624 17.8663 1.59603C17.7868 1.52582 17.6829 1.48978 17.577 1.49575L6.71606 1.498Z",fill:"currentColor"}),e.jsx("path",{d:"M5.62547 7.4985H3.00025C2.80132 7.4985 2.61054 7.41947 2.46988 7.27881C2.32921 7.13814 2.25019 6.94736 2.25019 6.74843C2.25019 6.54951 2.32921 6.35872 2.46988 6.21806C2.61054 6.0774 2.80132 5.99837 3.00025 5.99837H5.62547C5.72493 5.99837 5.82032 5.95886 5.89065 5.88853C5.96098 5.8182 6.0005 5.7228 6.0005 5.62334V2.99812C6.0005 2.79919 6.07952 2.60841 6.22019 2.46775C6.36085 2.32708 6.55163 2.24806 6.75056 2.24806C6.94949 2.24806 7.14027 2.32708 7.28094 2.46775C7.4216 2.60841 7.50063 2.79919 7.50063 2.99812V5.62334C7.50063 6.12066 7.30306 6.59762 6.9514 6.94928C6.59974 7.30094 6.12279 7.4985 5.62547 7.4985Z",fill:"currentColor"})]}),e.jsx("span",{children:"PDF"})]})}),e.jsx("div",{className:"absolute bg-red-400 opacity-60 w-96 h-96 -top-10 -right-16 md:w-[800px] md:h-[800px] md:left-[45%] md:top-[-150%] rounded-full shadow-2xl z-0"})]})})},zn=N(Un),On=({project:s})=>e.jsxs("div",{className:"mb-4",children:[e.jsx(Xt,{className:"mb-4 ",title:"รายละเอียด",children:tt(s.description)}),s.keyWordList.length>0&&e.jsx(jt,{bordered:!0,size:"small",className:"mb-4 border-gray",dataSource:s.keyWordList,renderItem:t=>e.jsx("p",{children:t}),header:e.jsx(ue,{level:5,children:e.jsx("p",{children:"เกี่ยวข้อง"})})}),s.consultants.length>0&&e.jsx(jt,{bordered:!0,size:"small",className:"mb-4 border-gray",dataSource:s.consultants,renderItem:t=>t.lecturerName,rowKey:t=>t.id,header:e.jsx(ue,{level:5,children:e.jsx("p",{children:"ที่ปรึกษา"})})})]}),Gn=()=>{const{id:s}=fe(),{projectStore:{projectSelected:t,loading:a,loadProject:r,clearProjectSelected:n}}=w();return g.useEffect(()=>(s&&!t&&r(s),()=>{n()}),[s]),!t||a?e.jsx(Z,{children:e.jsx("div",{className:"px-2 py-2 md:py-8 md:px-20 bg-white shadow-46 rounded-lg h-screen",children:e.jsx(ae,{active:!0})})}):e.jsxs(Z,{children:[e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.projects,children:"โครงงานวิจัย"})}),e.jsx(E.Item,{children:e.jsx("span",{children:t.nameTH})})]}),e.jsxs("div",{className:"p-4  bg-white shadow-46 rounded-lg",children:[e.jsx(An,{project:t}),e.jsxs($,{gutter:[16,16],children:[e.jsxs(F,{span:24,md:12,lg:8,children:[e.jsx(Bn,{project:t}),e.jsx(Hn,{project:t})]}),e.jsx(F,{span:24,md:12,lg:16,children:e.jsx(On,{project:t})})]}),e.jsx(zn,{})]})]})},Vn=N(Gn),qn={0:"PDF",1:"Youtube",2:"Github"},Jn=s=>[e.jsx(na,{onClick:()=>window.open(Ct(s.pdf))}),e.jsx(Qt,{onClick:()=>window.open("https://youtu.be/"+s.videoUrl)}),e.jsx(es,{onClick:()=>window.open(s.githubUrl)})].map((a,r)=>e.jsx(te,{title:qn[r],children:a},r)),_n=[{title:"โครงงาน",key:"image",dataIndex:"image"},{title:"ชื่อโครงงาน",key:"nameTH",dataIndex:"nameTH"},{title:"นักศึกษา",key:"student",dataIndex:"student"},{title:"เพิ่มเติม",key:"actions",dataIndex:"actions"}],Yn=({projects:s,loading:t})=>{let a=s.map(r=>({key:r.id,image:e.jsx(de,{height:"120px",width:"120px",className:"object-cover object-top cursor-pointer rounded-md shadow-34",preview:!1,src:r.imagePreview,onClick:()=>M.navigate(`/project/${r.id}`)}),nameTH:e.jsx(R,{to:f.projectDetail(r.id),children:r.nameTH}),student:e.jsxs(L,{wrap:!0,children:[e.jsx(Re,{src:r.student.image,icon:r.student.fullName[0]}),e.jsx(R,{to:f.accountDetail(r.student.username),children:r.student.fullName})]}),actions:e.jsxs(L,{wrap:!0,children:[...Jn(r)]})}));return e.jsx(ke,{isLoading:t,columns:_n,data:a})},Wn=({projects:s,showMode:t,loading:a})=>{const r={0:s.map((n,l)=>e.jsx(F,{sm:12,md:8,lg:6,className:"w-full",children:e.jsx(ls,{project:n})},l)),1:e.jsx(F,{span:24,children:e.jsx(Yn,{projects:s,loading:a})})};return e.jsx($,{gutter:[16,16],className:"mb-4",children:r[t]})},Kn=({setShowMode:s})=>{var p;const{projectStore:{pagingParams:t,predicate:a,showMode:r,loading:n,setPagingParams:l,setPredicate:o,loadProjects:c},userStore:{user:h}}=w(),d=m=>{o({search:m}),l(1,t.pageSize)},x=m=>{o({year:m&&m.year()||""}),c()},y=()=>{o({year:"",search:""}),c()};return e.jsxs(L,{wrap:!0,children:[e.jsx(D.Search,{allowClear:!0,placeholder:"ค้าหาชื่อโครงงาน ชื่อนักศึกษา",onSearch:d,defaultValue:a.get("search")}),e.jsx(rt,{picker:"year",placeholder:"ปีการศึกษา",onChange:x}),e.jsx(ia,{options:[{value:0,icon:e.jsx(la,{})},{value:1,icon:e.jsx(oa,{})}],onChange:s,defaultValue:r}),e.jsx(C,{icon:e.jsx(ca,{}),loading:n,onClick:y}),(h==null?void 0:h.roles)&&((p=h.roles)==null?void 0:p.includes(Fe[Q.student].en))&&e.jsx(C,{onClick:()=>M.navigate(f.projectForm),shape:"round",type:"primary",children:"สร้างโครงงาน"})]})},Zn=N(Kn),Xn=()=>{const{projectStore:{pagination:s,pagingParams:t,projectRegistry:a,loading:r,predicate:n,showMode:l,loadProjects:o,setPagingParams:c,setShowMode:h}}=w();return g.useEffect(()=>{o()},[t,n]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container grid px-6 mx-auto",children:e.jsxs(E,{className:"my-8",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx("span",{children:"โครงงานวิจัย"})})]})})}),e.jsx(Z,{hScreen:!1,children:e.jsx($,{className:"mb-4 pt-8",children:e.jsxs(F,{span:24,children:[e.jsx(ue,{level:3,children:e.jsx("p",{children:"โครงงานวิจัยนักศึกษา"})}),e.jsx("div",{className:"mb-4",children:e.jsx(Zn,{setShowMode:h})}),r&&Array.from(a.values()).length<1?e.jsx(ae,{active:!0}):Array.from(a.values()).length<1?e.jsx(jt,{className:"h-48 mb-4"}):e.jsx(Wn,{loading:r,showMode:l,projects:Array.from(a.values())}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:s==null?void 0:s.totalItems,current:s==null?void 0:s.currentPage,pageSize:t.pageSize,onChange:c})]})})})]})},Qn=N(Xn),it=({label:s,className:t})=>e.jsx("div",{className:`avatar-initials w-10 h-10 rounded-full flex items-center justify-center bg-gray-500 text-lg text-white font-bold ${t}`,children:s&&s.charAt(0)}),ei=({student:s})=>e.jsx(F,{sm:24,md:12,lg:6,className:"w-full p-2",children:e.jsxs("div",{className:"bg-white px-6 py-8 rounded-lg shadow-lg text-center ",children:[e.jsx("div",{className:"mb-3 flex justify-center",children:s.image?e.jsx("img",{className:"w-24 h-24 mx-auto rounded-full",src:s.image,alt:s.fullName}):e.jsx(it,{label:s.fullName,className:"w-24 h-24"})}),e.jsx("h2",{className:"text-xl font-medium text-gray-700",children:s.fullName}),e.jsx("span",{className:"text-blue-500 block mb-5",children:s.email}),e.jsx(R,{to:f.accountDetail(s.username),className:"px-4 py-2 bg-blue-500 text-white rounded-full",children:"ดูโปรไฟล์"})]})}),ti=({students:s})=>e.jsx($,{children:s.map((t,a)=>e.jsx(ei,{student:t},a))}),Ye={[f.students]:"นักศึกษา",[f.lecturers]:"อาจารย์ประจำสาขาวิทยาการคอมพิวเตอร์",[f.studentJobHistory]:"ประวัติการทำงานของนักศึกษา"},Pt=()=>{const{pathname:s}=Te(),t=[{key:"1",label:e.jsx(R,{to:f.students,children:Ye[f.students]})},{key:"2",label:e.jsx(R,{to:f.lecturers,children:Ye[f.lecturers]})},{key:"3",label:e.jsx(R,{to:f.studentJobHistory,children:Ye[f.studentJobHistory]})}];return e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:e.jsxs(L,{children:[e.jsx(yt,{}),e.jsx("span",{children:"หน้าหลัก"})]})})}),e.jsx(E.Item,{menu:{items:t},children:e.jsx("span",{className:"cursor-pointer",children:Ye[s]})})]})},si=()=>{const{accountStore:{pagingParams:s,loading:t,accountsRegistry:a,setPredicate:r,loadAccounts:n,pagination:l,setPagingParams:o}}=w();return g.useEffect(()=>{r({role:"1"}),n()},[s]),e.jsxs(Z,{children:[e.jsx(Pt,{}),e.jsxs("section",{className:"min-h-screen bg-gray-100 py-8 px-4",children:[e.jsx("h1",{className:"text-center font-bold text-3xl text-indigo-500",children:"นักศึกษา"}),e.jsx("h3",{className:"text-center mb-4",children:"สาขาวิทยาการคอมพิวเตอร์"}),t&&a.size<1?e.jsx(ae,{active:!0}):e.jsx(ti,{students:Array.from(a.values())}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:l==null?void 0:l.totalItems,current:l==null?void 0:l.currentPage,pageSize:s.pageSize,onChange:o})]})]})},ai=N(si);function ri({children:s}){return e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300",children:s})}const ni=()=>e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"แผงควบคุม"}),e.jsx(ri,{children:"Responsive cards"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[e.jsxs("div",{className:"flex items-start rounded-xl bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-blue-100 bg-blue-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"font-semibold",children:"574 Messages"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Last opened 4 days ago"})]})]}),e.jsxs("div",{className:"flex items-start rounded-xl bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"font-semibold",children:"1823 Users"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Last checked 3 days ago"})]})]}),e.jsxs("div",{className:"flex items-start rounded-xl bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"font-semibold",children:"548 Posts"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Last authored 1 day ago"})]})]}),e.jsxs("div",{className:"flex items-start rounded-xl bg-white p-4 shadow-lg",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full border border-indigo-100 bg-indigo-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"font-semibold",children:"129 Comments"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Last commented 8 days ago"})]})]})]}),e.jsx("div",{className:"grid gap-6 mb-8 md:grid-cols-2 xl:grid-cols-4"}),e.jsx("div",{className:"grid gap-6 mb-8 md:grid-cols-2"})]}),ii=({handleRemove:s,setCurrentEdit:t,setEditMode:a,handleSetHidden:r})=>[{title:"อาจารย์",key:"lecturer",dataIndex:"lecturer"},{title:"คำนำหน้า",key:"prefixed",dataIndex:"prefixed"},{title:"ชื่อ-นามสกุล",key:"name",dataIndex:"name"},{title:"ตำแหน่ง",key:"position",dataIndex:"position"},{title:"แสดง",key:"hidden",render:n=>e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:!n.hidden,onChange:()=>r(n.key)})},{title:"จัดการ",key:"manage",render:n=>e.jsxs(L,{wrap:!0,children:[e.jsx(C,{shape:"round",type:"primary",children:e.jsx(Ee,{size:18}),onClick:()=>{t(n.key),a(n.key)}}),e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:()=>s(n.key),children:e.jsx(C,{danger:!0,type:"primary",shape:"round",children:e.jsx(ve,{size:18})})})]})}],li=({setEditMode:s,mapTable:t,currentEdit:a,setCurrentEdit:r})=>{const{lecturerStore:{submitLoading:n,lecturerRegistry:l,positionList:o,addLecturer:c,loadLecturers:h,editLecturer:d,prefixList:x}}=w(),[y,p]=g.useState(),[m,b]=g.useState(),[v]=ge(),[k,I]=g.useState(x()),[O,T]=g.useState(o),[U,Y]=g.useState(""),[ee,G]=g.useState(""),H=g.useRef(null);g.useEffect(()=>{if(a){let _=l.get(a);v.setFieldsValue(_),b(_==null?void 0:_.imagePreview)}return()=>{a&&Oe()}},[]);const he=_=>{var re;_.preventDefault(),U&&(I([...k,U]),Y(""),(re=H.current)==null||re.focus())},Je=_=>{var re;_.preventDefault(),ee&&(T([...O,ee]),G(""),(re=H.current)==null||re.focus())},lt=_=>{let re=Object.assign(_,{id:a,fileImage:y});a?d(re).then(Oe).then(h).then(t):c(re).then(Oe).then(h).then(t)},ot=_=>{p(_),b(URL.createObjectURL(_))},Oe=()=>{s(!1),p(null),r(null),v.resetFields()};return e.jsxs(j,{form:v,className:"p-8",layout:"vertical",onFinish:lt,children:[e.jsx(j.Item,{children:e.jsx(at,{modalTitle:"สัดส่วนรูปภาพ",quality:100,children:e.jsx(je,{listType:"picture-card",showUploadList:!1,beforeUpload:ot,children:m?e.jsx(de,{style:{width:120,height:100},className:"object-top object-cover rounded-lg",src:m,preview:!1}):e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsx("div",{style:{marginTop:8},children:"อัพโหลดรูปภาพ"})]})})})}),e.jsx(j.Item,{name:"prefix",label:"คำนำหน้าชื่อ",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(be,{style:{width:300},placeholder:"คำนำหน้าชื่อ",options:k.map(_=>({label:_,value:_})),dropdownRender:_=>e.jsxs(e.Fragment,{children:[_,e.jsx(ce,{style:{margin:"8px 0"}}),e.jsxs(L,{style:{padding:"0 8px 4px"},children:[e.jsx(D,{value:U,ref:H,onChange:re=>Y(re.target.value),placeholder:"กรอกคำนำหน้าชื่อ"}),e.jsx(C,{type:"text",icon:e.jsx(Ne,{}),onClick:he,children:"เพิ่ม"})]})]})})}),e.jsx(j.Item,{name:"fullName",label:"ชื่อ-นามสกุล",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{})}),e.jsx(j.Item,{name:"position",label:"ตำแหน่ง",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(be,{style:{width:300},placeholder:"ตำแหน่ง",options:O.map(_=>({label:_,value:_})),dropdownRender:_=>e.jsxs(e.Fragment,{children:[_,e.jsx(ce,{style:{margin:"8px 0"}}),e.jsxs(L,{style:{padding:"0 8px 4px"},children:[e.jsx(D,{value:ee,ref:H,onChange:re=>G(re.target.value),placeholder:"กรอกชื่อตำแหน่ง"}),e.jsx(C,{type:"text",icon:e.jsx(Ne,{}),onClick:Je,children:"เพิ่ม"})]})]})})}),e.jsx(j.Item,{name:"expert",label:"รายละเอียดเพิ่มเติม",children:e.jsx(He,{value:v.getFieldValue("export")})}),e.jsx(j.Item,{children:e.jsx(C,{loading:n,shape:"round",type:"primary",htmlType:"submit",children:"บันทึก"})})]})},oi=N(li),ci=({mapTable:s})=>{const{lecturerStore:{predicate:t,loadLecturers:a,positionList:r}}=w();return e.jsxs(L,{wrap:!0,className:"py-4 px-2",children:[e.jsx(D.Search,{allowClear:!0,defaultValue:t.get("search"),placeholder:"ค้นหา",onSearch:n=>{t.set("search",n),a().then(s)}}),e.jsx(be,{showSearch:!0,allowClear:!0,style:{width:200},placeholder:"ตำแหน่ง",filterOption:(n,l)=>((l==null?void 0:l.label)??"").includes(n),filterSort:(n,l)=>((n==null?void 0:n.label)??"").toLowerCase().localeCompare(((l==null?void 0:l.label)??"").toLowerCase()),onClear:()=>{t.set("position",""),a().then(s)},onChange:n=>{t.set("position",n),a().then(s)},options:[...r.map(n=>({value:n,label:n}))]})]})},di=N(ci),hi=()=>{const{lecturerStore:{lecturerRegistry:s,tableBody:t,predicate:a,loading:r,setTable:n,loadLecturers:l,removeLecturer:o,setHidden:c,setPositionList:h}}=w(),[d,x]=g.useState(!1),[y,p]=g.useState(null);g.useEffect(()=>{a.set("showHidden",!0),l().then(m).then(h)},[]);const m=()=>{let k=Array.from(s.values()).map(I=>({key:I.id,lecturer:e.jsx(Re,{src:I.image&&I.imagePreview,icon:I.fullName[0]}),prefixed:I.prefix,name:I.fullName,hidden:I.hidden,position:I.position}));n(k)},b=k=>{c(k).then(m)},v=k=>{o(k).then(m)};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"อาจารย์"}),e.jsx(L,{wrap:!0,className:"mb-4",children:e.jsx(C,{onClick:()=>x(!d),shape:"round",type:d?"default":"primary",children:d?"กลับ":"เพิ่ม"})}),e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsx(F,{span:24,children:d?e.jsx(oi,{currentEdit:y,setEditMode:x,mapTable:m,setCurrentEdit:p}):e.jsxs(e.Fragment,{children:[e.jsx(di,{mapTable:m}),e.jsx(ke,{data:t,columns:ii({handleRemove:v,setCurrentEdit:p,setEditMode:x,handleSetHidden:b}),isLoading:r})]})})})]})},mi=N(hi),ui=s=>e.jsx($,{className:"",gutter:[16,16],children:Object.entries(s).map(([t,a])=>a.map(r=>e.jsx(F,{className:"py-4",xs:24,md:12,lg:6,children:e.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 mb-12 hover-grayscale-0 wow fadeInUp","data-wow-duration":"1s",style:{visibility:"visible",animationDuration:"1s",animationName:"fadeInUp"},children:[e.jsx("div",{className:"relative overflow-hidden px-6",children:e.jsx("img",{src:A(r.image),className:"w-36 h-auto mx-auto rounded-full bg-gray-50",alt:r.fullName})}),e.jsxs("div",{className:"pt-6 text-center",children:[e.jsx("p",{className:"text-lg leading-normal font-bold mb-1",children:`${r.prefix} ${r.fullName}`}),e.jsx("p",{className:"text-gray-500 leading-relaxed font-light",children:r.position})]})]})},r.id)))}),xi=()=>{const{lecturerStore:{groupedLecturers:s,loadLecturers:t,predicate:a,loading:r}}=w();return g.useEffect(()=>{a.set("showHidden",!1),t()},[]),e.jsxs(Z,{children:[e.jsx(Pt,{}),e.jsxs("section",{className:"min-h-screen bg-gray-100 py-8 px-4",children:[e.jsx("h1",{className:"text-center font-bold text-3xl text-indigo-500",children:"อาจารย์ประจำสาขา"}),e.jsx("h3",{className:"text-center mb-4",children:"สาขาวิทยาการคอมพิวเตอร์"}),r?e.jsx(ae,{active:!0}):ui(s),!r&&Object.keys(s).length<1&&e.jsx(Z,{children:e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"})})]})]})},gi=N(xi),ji=({syllabus:s})=>{const t={0:["objective","วัตถุประสงค์ของหลักสูตรอหลักสูตร"],1:["occupation","อาชีพที่สามารถประกอบอาชีพได้หลังสำเร็จการศึกษา"]};return e.jsxs(e.Fragment,{children:[e.jsxs(J,{column:1,title:"ชื่อปริญญาและสาขาวิชา",children:[e.jsx(J.Item,{label:"ภาษาไทย",children:s==null?void 0:s.degreeTH}),e.jsx(J.Item,{label:"ภาษาอังกฤษ",children:s==null?void 0:s.degreeEN})]}),Array.from({length:2}).map((a,r)=>s[t[r][0]].length>0?e.jsxs("div",{children:[e.jsx(ce,{}),e.jsx(J,{column:1,title:t[r][1],children:s[t[r][0]].map((n,l)=>e.jsx(J.Item,{children:e.jsxs(L,{children:[`${l+1})`,n]})},n))})]},r):null),e.jsx("div",{className:"mb-4"})]})};var Xe=(s=>(s[s.general=0]="general",s[s.specific=1]="specific",s[s.freeElective=2]="freeElective",s))(Xe||{});const Qe={0:"หมวดวิชาศึกษาทั่วไป",1:"หมวดวิชาเฉพาะ",2:"หมวดวิชาเลือกเสรี"},pi=({syllabus:s})=>{const t={tooltip:{trigger:"item"},legend:{top:"top"},series:[{name:"หน่วยกิต",type:"pie",radius:"50%",data:[{value:s.subjectGeneralSum,name:Qe[Xe.general]},{value:s.subjectSpecificSum,name:Qe[Xe.specific]},{value:s.subjectFreeElectiveSum,name:Qe[Xe.freeElective]}],label:{show:!0,formatter:"{c}%"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return e.jsx(da,{option:t,style:{height:"400px",width:"100%"},opts:{renderer:"svg"}})},fi=({syllabus:s})=>{const t=Qe,a={0:"subjectGeneral",1:"subjectSpecific",2:"subjectFreeElective"};return e.jsx(It,{accordion:!0,className:"flex flex-col",children:Array.from({length:3}).map((r,n)=>e.jsx(It.Panel,{header:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:t[n]}),e.jsxs("div",{children:["ไม่น้อยกว่า ",s[`${a[n]}Sum`]," หน่วยกิต"]})]}),children:s[a[n]].map((l,o)=>e.jsxs("div",{className:"px-6 flex justify-between",children:[e.jsx("div",{children:l.name}),e.jsxs("div",{children:[l.credit," หน่วยกิต"]})]},o))},n))})},bi=({syllabus:s})=>s?e.jsxs(e.Fragment,{children:[e.jsx(ue,{level:4,children:e.jsx("p",{children:"โครงสร้างหลักสูตร"})}),e.jsx(oe.Text,{children:e.jsx("p",{children:"โครงสร้างหลักสูตร แบ่งเป็นหมวดวิชาที่สอดคล้องกับที่กำหนดไว้ในเกณฑ์มาตรฐานหลักสูตรของกระทรวงศึกษาธิการ ดังนี้"})}),e.jsx("div",{className:"overflow-visible rounded-lg bg-gray-100 pt-2 mb-2",children:e.jsx(pi,{syllabus:s})}),e.jsx(oe.Title,{level:4,children:e.jsxs("p",{children:["จำนวนหน่วยกิตรวมตลอดหลักสูตร ",s.total," หน่วยกิต"]})}),e.jsx(fi,{syllabus:s})]}):e.jsx(e.Fragment,{}),yi=()=>{const{syllabusStore:{loadSyllabuses:s,loading:t,syllabusSelected:a,yearList:r,setYearList:n,getSyllabusByYear:l,predicate:o}}=w();g.useEffect(()=>{o.set("showHidden",!1),s().then(c)},[]);const c=async()=>{let h=n();l(h[0])};return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container grid px-6 mx-auto",children:e.jsxs(E,{className:"my-8",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:e.jsx("span",{children:"หน้าหลัก"})})}),e.jsx(E.Item,{children:e.jsx("span",{children:"หลักสูตรวิทยาศาสตร์บัณฑิต"})})]})})}),e.jsx(Z,{hScreen:!1,children:t?e.jsx(ae,{active:!0,className:"py-4"}):a?e.jsxs("div",{className:"mb-4 pt-8",children:[e.jsx(ue,{level:3,className:"px-2",children:e.jsx("p",{children:a==null?void 0:a.nameTH})}),e.jsxs(ue,{level:5,className:"px-2",children:[e.jsx("p",{children:a==null?void 0:a.nameEN}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{danger:!0,shape:"round",type:"primary",children:"PDF",onClick:()=>window.open(a==null?void 0:a.pdfPreview)}),e.jsx(be,{defaultValue:r[0],style:{width:120},onChange:h=>l(h),options:r.map(h=>({label:h,value:h}))})]})]}),e.jsx(ce,{}),e.jsxs($,{children:[e.jsx(F,{className:"px-2",sm:24,lg:12,children:e.jsx(ji,{syllabus:a})}),e.jsx(F,{className:"px-2",sm:24,lg:12,children:e.jsx(bi,{syllabus:a})})]})]}):e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"})})]})},wi=N(yi),Ni=({handleRemove:s,handleEdit:t})=>[{title:"หลักสูตร",key:"nameTH",dataIndex:"nameTH"},{title:"หน่วยกิตรวม",key:"total",dataIndex:"total"},{title:"ปี",key:"year",dataIndex:"year"},{title:"แสดง",key:"hidden",dataIndex:"hidden"},{title:"จัดการ",key:"manage",render:a=>e.jsxs(L,{wrap:!0,children:[e.jsx(te,{placement:"top",title:"รายละเอียด",children:e.jsx(C,{shape:"round",type:"default",children:e.jsx(nt,{size:18}),onClick:()=>M.navigate(f.syllabus)})}),e.jsx(te,{placement:"top",title:"แก้ไข",children:e.jsx(C,{shape:"round",type:"primary",children:e.jsx(Ee,{size:18}),onClick:()=>t(a.key)})}),e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:()=>s(a.key),children:e.jsx(C,{danger:!0,type:"primary",shape:"round",children:e.jsx(ve,{size:18})})})]})}],We=({name:s,label:t,required:a=!1,rules:r=[]})=>e.jsx(j.Item,{name:s,label:t,required:a,rules:[...r,a&&{required:a,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D,{})}),Bt=({name:s})=>e.jsx(j.List,{name:s,children:(t,{add:a,remove:r})=>e.jsxs(e.Fragment,{children:[t.map(n=>e.jsxs(L,{align:"center",style:{display:"flex",width:"100%",marginBottom:8},children:[e.jsx(j.Item,{...n,name:[n.name,"sentence"],rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],noStyle:!0,children:e.jsx(D,{})}),e.jsx(ts,{onClick:()=>r(n.name)})]},n.key)),e.jsx(j.Item,{children:e.jsx(C,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(Ne,{}),children:"เพิ่ม"})})]})}),ut=({name:s})=>e.jsx(j.List,{name:s,children:(t,{add:a,remove:r})=>e.jsxs(e.Fragment,{children:[t.map((n,l)=>e.jsxs(L,{align:"center",style:{display:"flex",width:"100%",marginBottom:8},children:[e.jsx(j.Item,{name:[n.name,"name"],rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],required:!0,noStyle:!0,children:e.jsx(D,{placeholder:"วิชา"})}),e.jsx(j.Item,{name:[n.name,"credit"],rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],required:!0,noStyle:!0,children:e.jsx(ss,{placeholder:"หน่วยกิต",min:1})}),e.jsx(ts,{onClick:()=>r(n.name)})]},l)),e.jsx(j.Item,{children:e.jsx(C,{type:"dashed",onClick:()=>a(),block:!0,icon:e.jsx(Ne,{}),children:"เพิ่ม"})})]})}),vi=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"คลิ้กหรือลากไฟล์ไปยังพื้นที่นี้เพื่ออัปโหลด"}),e.jsx("p",{className:"ant-upload-hint",children:"รองรับการอัปโหลดครั้งเดียว"})]}),Si=({mapTable:s,setFormMode:t})=>{const{syllabusStore:{formBody:a,setFormBody:r,submittingLoading:n,createSyllabus:l,clearFormBody:o,loadSyllabuses:c,editSyllabus:h}}=w(),[d,x]=g.useState(),[y]=ge();g.useEffect(()=>(y.setFieldsValue(a),a.yearPreview&&y.setFieldsValue({year:$e(`${a.yearPreview}-01-01`,"YYYY-MM-DD")}),a.pdf&&x(a.pdf),()=>{o()}),[]);const p=async v=>{if(!a.id&&!d)return X.error("กรุณาอัพโหลดไฟล์เอกสาร");r({pdf:d.response||d}),a.id?await h().then(o).then(m).catch(k=>X.error(k)):!a.id&&d?await l().then(o).then(m).catch(k=>X.error(k)):X.error("กรุณาอัพโหลดไฟล์เอกสาร")},m=()=>{X.success("สำเร็จ"),c().then(s),t(!1)},b=v=>{v.file.status==="done"?x(v.file):v.file.status==="error"&&X.error(`${v.file.response}, file upload failed.`)};return e.jsxs(j,{form:y,className:"p-8",onValuesChange:(v,k)=>r(k),onFinish:p,children:[e.jsxs($,{children:[e.jsxs(F,{sm:24,lg:12,className:"lg:pr-2 md:pr-2",children:[e.jsxs("div",{children:[e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"ชื่อหลักสูตร"})}),e.jsxs(L,{wrap:!0,children:[e.jsx(We,{name:"nameTH",label:"ภาษาไทย",required:!0}),e.jsx(We,{name:"nameEN",label:"ภาษาอังกฤษ",required:!0})]})]}),e.jsx(ce,{}),e.jsxs("div",{children:[e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"ชื่อปริญญาและสาขาวิชา"})}),e.jsxs(L,{wrap:!0,children:[e.jsx(We,{name:"degreeTH",label:"ภาษาไทย",required:!0}),e.jsx(We,{name:"degreeEN",label:"ภาษาอังกฤษ",required:!0})]})]}),e.jsx(ce,{}),e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"ปีการศึกษา"})}),e.jsx(j.Item,{name:"year",required:!0,rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(rt,{picker:"year",placeholder:"ปี"})}),e.jsx(ce,{}),e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"วัตถุประสงค์ของหลักสูตรอหลักสูตร"})}),e.jsx(Bt,{name:"objective"}),e.jsx(ce,{}),e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"อาชีพที่สามารถประกอบอาชีพได้หลังสำเร็จการศึกษา"})}),e.jsx(Bt,{name:"occupation"}),e.jsx(ce,{}),e.jsx(j.Item,{label:"อัพโหลดไฟล์เอกสาร",required:!0,children:e.jsx(je.Dragger,{method:"post",accept:".pdf",showUploadList:!1,onChange:b,action:"http://coms.kru.ac.th/comsci/api/uploadFile/file",children:d?e.jsx(e.Fragment,{children:d.name||d}):vi()})})]}),e.jsxs(F,{sm:24,lg:12,className:"lg:pl-2 md:pl-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"หมวดวิชาศึกษาทั่วไป"})}),e.jsx(ut,{name:"subjectGeneral"}),e.jsx(ce,{})]}),e.jsxs("div",{children:[e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"หมวดวิชาเฉพาะ"})}),e.jsx(ut,{name:"subjectSpecific"}),e.jsx(ce,{})]}),e.jsxs("div",{children:[e.jsx(oe.Title,{level:5,children:e.jsx("p",{children:"หมวดวิชาเลือกเสรี"})}),e.jsx(ut,{name:"subjectFreeElective"}),e.jsx(ce,{})]})]})]}),e.jsx(j.Item,{children:e.jsx(C,{shape:"round",type:"primary",htmlType:"submit",loading:n,children:"บันทึก"})})]})},Ci=N(Si),Pi=()=>{const{syllabusStore:{loadSyllabuses:s,syllabusRegistry:t,setTable:a,loading:r,tableBody:n,deleteSyllabus:l,predicate:o,hidden:c,setYearList:h,loadSyllabusDetail:d}}=w(),[x,y]=g.useState(!1);g.useEffect(()=>{o.set("showHidden",!0),s().then(p).then(h)},[]);const p=()=>{let k=Array.from(t.values()).map(I=>({key:I.id,nameTH:I.nameTH,total:I.total,year:I.yearFormat,hidden:e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:!I.hidden,onChange:()=>c(I)})}));a(k)},m=()=>y(!x),b=k=>l(k).then(p),v=async k=>{d(k).then(m)};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"หลักสูตรวิทยาการคอมพิวเตอร์"}),e.jsx(L,{wrap:!0,className:"mb-4",children:e.jsx(C,{shape:"round",type:x?"default":"primary",onClick:m,children:x?"กลับ":"เพิ่ม"})}),e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsx(F,{span:24,children:x?e.jsx(Ci,{setFormMode:y,mapTable:p}):e.jsx(ke,{isLoading:r,data:n,columns:Ni({handleRemove:b,handleEdit:v})})})})]})},ki=N(Pi),Li=({})=>[{title:"นักศึกษา",key:"user",dataIndex:"user"},{title:"ชื่องาน",key:"jobName",dataIndex:"jobName"},{title:"บริษัท",key:"company",dataIndex:"company"},{title:"ตำแหน่ง",key:"position",dataIndex:"position"},{title:"แสดง",key:"isUse",dataIndex:"isUse"}],Ii=()=>{const{jobHistoryStore:{predicate:s,loading:t,tableBody:a,setTable:r,pagination:n,pagingParams:l,setPagingParams:o,loadJobHistories:c,jobHistoryRegistry:h,changeIsUse:d}}=w();g.useEffect(()=>{s.set("showAll",!0),c().then(x)},[l]);const x=()=>{let y=Array.from(h.values()).map((p,m)=>{var b,v,k,I;return{key:m,user:e.jsxs(L,{wrap:!0,children:[e.jsx(Re,{src:(b=p.user)==null?void 0:b.image,icon:(v=p.user)==null?void 0:v.fullName[0]}),e.jsx(R,{to:f.accountDetail((k=p.user)==null?void 0:k.username),children:(I=p.user)==null?void 0:I.fullName})]}),jobName:p.jobName,position:p.position,company:p.company,isUse:e.jsx(Pe,{checkedChildren:"แสดง",unCheckedChildren:"ซ่อน",defaultChecked:p.isUse,onChange:()=>{var O;return d((O=p.user)==null?void 0:O.username)}})}});r(y)};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"ประวัติการทำงาน"}),e.jsx($,{className:"shadow-46 rounded-xl",children:e.jsx(F,{span:24,children:e.jsx(ke,{isLoading:t,data:a,columns:Li({}),pagination:{current:n==null?void 0:n.currentPage,total:n==null?void 0:n.totalItems,pageSize:l.pageSize,onChange:o,showSizeChanger:!0,pageSizeOptions:[10,30,50],style:{marginRight:8,marginLeft:8}}})})})]})},Fi=N(Ii);var Ie=(s=>(s[s.generation=0]="generation",s[s.course=1]="course",s))(Ie||{});const Ri=()=>{const{courseStore:{predicate:s,setPredicate:t,loadCourses:a},generationStore:{loadGenerations:r,predicate:n,setPredicate:l},userStore:{user:o}}=w(),c=d=>{s.get("mode")==Ie.generation?(l("search",d),r()):(t("search",d),a())},h=d=>{t("mode",d.target.value)};return e.jsxs(L,{wrap:!0,children:[e.jsx(D.Search,{allowClear:!0,placeholder:"ค้าหา",onSearch:c,defaultValue:s.get("search")}),e.jsxs(ct.Group,{defaultValue:s.get("mode"),onChange:h,children:[e.jsx(ct,{value:Ie.generation,children:"หลักสูตรที่เปิดลงทะเบียน"}),e.jsx(ct,{value:Ie.course,children:"หลักสูตรทั้งหมด"})]}),o&&s.get("mode")==Ie.generation&&e.jsx(ha,{onChange:()=>{l("myCourse",!n.get("myCourse")),r()},checked:n.get("myCourse"),children:"หลักสูตรของฉัน"})]})},Mi=N(Ri),Ei=()=>{const{courseStore:{courseRegistry:s,pagination:t,pagingParams:a,setPagingParams:r}}=w();return s.size<1?e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mb-4",gutter:[16,16],children:Array.from(s.values()).map((n,l)=>e.jsx(F,{sm:24,md:8,lg:6,className:"w-full",children:e.jsx(os,{course:n})},l))}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:t==null?void 0:t.totalItems,current:t==null?void 0:t.currentPage,pageSize:a.pageSize,onChange:r})]})},Di=N(Ei);class ds{constructor(t){i(this,"open");i(this,"data",t=>t?["ปิดรับลงทะเบียน","gray"]:["เปิดลงทะเบียน","green"]);this.open=t}}const $i=({generation:s})=>{const t=s.attendeeCount<=s.quantity,a=new ds(s.isCancelled),r=()=>{let o=t&&!s.isCancelled&&new Date(s.endDate)>new Date(Date.now())?"bg-green-500 hover:bg-green-600":"bg-gray-500 ";return e.jsx("div",{className:`flex items-center space-x-1.5 rounded-lg  px-4 py-1.5 text-white duration-100 ${o}`,children:e.jsx("button",{className:"text-sm",children:"ลงทะเบียน"})})},n=()=>{let o=t&&!s.isCancelled?"text-blue-500":"text-red-500";return e.jsxs("p",{className:`text-lg font-bold ${o}`,children:[s.attendeeCount,"/",s.quantity]})},l=()=>{var o,c;return e.jsxs(R,{to:f.generationDetail(s.id),className:"h-full w-full",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{src:s.genPhoto,className:"max-h-40 object-cover object-center mb-3 h-full w-full rounded-xl 3xl:h-full 3xl:w-full hover:brightness-75 transition duration-500 ease-in-out"}),e.jsx("p",{className:"absolute bottom-0 px-4 py-2 text-lg text-gray-200",children:s.course.title})]}),e.jsxs("div",{className:"mb-3 flex items-center justify-between px-1 md:items-start",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-lg font-bold text-navy-700",children:s.subTitle}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-600 md:mt-2",children:["โดย ",(o=s.course.lecturer)==null?void 0:o.fullName]})]}),e.jsxs("div",{className:"flex flex-row-reverse md:mt-2 lg:mt-0",children:[s.attendeeCount-s.previewAttendees.length>0&&e.jsxs("span",{className:"z-0 ml-px inline-flex h-8 w-8 items-center justify-center rounded-full border-2 border-white bg-[#E0E5F2] text-xs text-navy-700 ",children:["+",s.attendeeCount-s.previewAttendees.length]}),(c=s.previewAttendees)==null?void 0:c.map((h,d)=>e.jsx("span",{className:"z-10 -mr-3 h-8 w-8 rounded-full border-2 border-white",children:h.image?e.jsx("img",{className:"h-full w-full rounded-full object-cover",src:A(h.image)}):e.jsx("div",{className:"avatar-initials h-full w-full rounded-full object-cover items-center justify-center bg-gray-400 text-lg text-white font-bold",children:h.fullName.charAt(0)})},d))]})]}),e.jsxs("div",{className:"flex items-center justify-between md:items-center lg:justify-between ",children:[e.jsx("div",{className:"flex",children:e.jsx("div",{className:"!mb-0 text-sm font-bold text-brand-500",children:e.jsx(n,{})})}),e.jsx(r,{})]})]})};return e.jsx("article",{className:"shadow-md hover:shadow-lg hover:transform hover:scale-105 duration-300 !z-5 relative flex flex-col rounded-[10px] bg-clip-border shadow-3xl shadow-shadow-500 w-full !p-4 3xl:p-![18px] bg-gray-100",children:s.isCancelled||!t?e.jsx(st.Ribbon,{text:a.data(a.open)[0],color:"gray",children:e.jsx(l,{})}):e.jsx(l,{})})},Ti=()=>{const{generationStore:{generationRegistry:s,pagination:t,pagingParams:a,setPagingParams:r}}=w();return e.jsx(e.Fragment,{children:s.size<1?e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mb-4",gutter:[16,16],children:Array.from(s.values()).map((n,l)=>e.jsx(F,{xs:24,sm:12,md:8,lg:6,className:"w-full",children:e.jsx($i,{generation:n})},l))}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:t==null?void 0:t.totalItems,current:t==null?void 0:t.currentPage,pageSize:a.pageSize,onChange:r})]})})},Bi=N(Ti),Ai=()=>{var h;const{courseStore:{pagingParams:s,loading:t,predicate:a,loadCourses:r},generationStore:{loadGenerations:n,pagingParams:l,loading:o},userStore:{user:c}}=w();return g.useEffect(()=>{n()},[l]),g.useEffect(()=>{r()},[s]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container grid px-6 mx-auto",children:e.jsxs(E,{className:"my-8",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx("span",{children:"หลักสูตรอบรม"})})]})})}),e.jsx(Z,{hScreen:!1,children:e.jsx($,{className:"pt-4",children:e.jsxs(F,{span:24,children:[e.jsxs("div",{className:"flex justify-between w-full align-middle items-center",children:[e.jsx(oe.Title,{level:3,children:e.jsx("p",{children:"หลักสูตรอบรม"})}),(c==null?void 0:c.roles)&&((h=c.roles)==null?void 0:h.includes(Fe[Q.lecturer].en))&&e.jsx(C,{type:"primary",shape:"round",children:"หลักสูตรใหม่",onClick:()=>M.navigate(f.coursesForm)})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Mi,{})}),t||o?e.jsx(vt,{}):a.get("mode")==Ie.course?e.jsx(Di,{}):e.jsx(Bi,{})]})})})]})},Hi=N(Ai),Ui=()=>{const[s,t]=g.useState(!0);return{loadApp:s,setLoadApp:t}},hs=({lecturer:s})=>e.jsxs("div",{className:"flex bg-white shadow-md rounded-lg overflow-hidden my-4",children:[e.jsx("div",{className:"w-2 bg-gray-800"}),e.jsxs("div",{className:"flex items-center px-2 py-3",children:[s.image?e.jsx("img",{className:"w-12 h-12 object-cover rounded-full",src:s.image}):e.jsx("div",{className:"avatar-initials w-12 h-12 rounded-full flex items-center justify-center bg-gray-500 text-lg text-white font-bold",children:s.fullName.charAt(0)}),e.jsxs("div",{className:"mx-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.jsx(R,{to:f.accountDetail(s.username),children:s.fullName})}),e.jsx("p",{className:"text-gray-600",children:"อาจารย์"})]})]})]}),ms=({description:s})=>e.jsxs("div",{className:"bg-white shadow-md rounded-lg mt-3 flex relative z-30 mb-4",children:[e.jsx("div",{className:"w-2.5 h-auto bg-indigo-700 rounded-tl-md rounded-bl-md"}),e.jsxs("div",{className:"w-full p-8",children:[e.jsx("div",{className:"md:flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-semibold leading-6 mb-2 text-gray-800",children:"รายละเอียด"})}),e.jsx("div",{className:"text-base leading-6 mt-4 text-gray-600",children:tt(s)})]})]}),zi=({onSetMain:s,photo:t,remove:a})=>e.jsxs("div",{className:"relative rounded-md shadow-md w-full h-36",children:[e.jsx("img",{className:"w-full h-full object-cover rounded-md shadow-md",src:A(t.url)}),e.jsx(te,{placement:"top",title:"นำออก",children:e.jsx("button",{type:"button",onClick:a,disabled:t.isMain??!1,className:"absolute top-2 right-2 text-gray-600 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.364 5.636a.996.996 0 0 0-1.414 0L12 10.586 7.05 5.636a.996.996 0 1 0-1.414 1.414L10.586 12l-4.95 4.95a.996.996 0 1 0 1.414 1.414L12 13.414l4.95 4.95a.996.996 0 1 0 1.414-1.414L13.414 12l4.95-4.95a.996.996 0 0 0 0-1.414z"})})})}),e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx(Pe,{onClick:s,defaultChecked:t.isMain,checked:t.isMain})})]}),kt=()=>{const{id:s}=fe(),{courseStore:{createCourse:t,updateCourse:a}}=w(),[r,n]=g.useState(!1),[l,o]=g.useState(!0);return{load:l,setLoad:o,handleSubmit:(d,x)=>{if(x.length<1)return X.warning("กรุณาอัพโหลดรูปภาพ");let y=Object.assign(d,{id:s,photos:x});if(y.id)return a(y).then(()=>{n(!1)});t(y).then(()=>{M.navigate(-1)})},handleUploadImage:(d,x)=>{const{status:y,response:p}=d.file;y=="done"&&x(m=>[...m,{url:p}])},formMode:r,setFormMode:n}},Oi=({form:s,fileList:t,setFileList:a,submit:r})=>{const{id:n}=fe(),{courseStore:{submittingLoading:l,courseSelected:o,loadCourse:c}}=w(),{handleUploadImage:h}=kt();g.useEffect(()=>{n&&o?d(o):n&&c(n).then(d)},[]);const d=x=>{s.setFieldsValue({title:x==null?void 0:x.title,description:x==null?void 0:x.description}),a(x.photos)};return e.jsxs(j,{layout:"vertical",form:s,onFinish:r,className:"px-4 py-8 mb-2",children:[e.jsx(j.Item,{name:"title",label:"ชื่อหลักสูตร",required:!0,rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{showCount:!0,maxLength:60,autoSize:{minRows:1,maxRows:4}})}),e.jsx(j.Item,{name:"description",label:"รายละเอียด",children:e.jsx(He,{value:s.getFieldValue("description")})}),e.jsx(j.Item,{children:e.jsx(je,{multiple:!0,previewFile:void 0,showUploadList:!1,accept:"image/jpeg, image/png,  image/jpg",action:xe.urlUploadFile+"?quality=100",onChange:x=>h(x,a),children:e.jsx(C,{type:"dashed",className:"mt-4",children:"อัพโหลดรูปภาพ"})})}),e.jsx($,{className:"pb-4",gutter:[16,16],children:t.map((x,y)=>e.jsx(F,{xs:12,sm:12,md:8,lg:6,children:e.jsx(zi,{photo:x,remove:()=>{a(t.filter((p,m)=>y!=m))},onSetMain:()=>{const p=t.map((m,b)=>y==b?{...m,isMain:!0}:{...m,isMain:!1});a(p)}})},y))}),e.jsx(j.Item,{children:e.jsx(C,{type:"primary",shape:"round",htmlType:"submit",loading:l,children:"บันทึก"})})]})},us=N(Oi),Gi=()=>{const{id:s}=fe(),{courseStore:{courseSelected:t},userStore:{user:a}}=w(),{formMode:r,setFormMode:n,handleSubmit:l}=kt(),[o]=ge(),[c,h]=g.useState([]),d=y=>{var p;(p=l(y,c))==null||p.then(()=>{n(!1),window.scrollTo({top:-window.pageYOffset,behavior:"smooth"})})},x=[{key:"edit",label:"แก้ไข",onClick:()=>n(!r)}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative shadow-md",children:[e.jsx(Yt,{autoplay:!0,draggable:!0,lazyLoad:"progressive",children:t==null?void 0:t.photos.map((y,p)=>e.jsx("img",{className:"h-80 object-cover object-center",src:A(y.url)},p))}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-4 bg-gradient-to-t from-black text-gray-200 w-full flex justify-between",children:[e.jsx("h3",{className:"text-lg font-bold leading-5 uppercase",children:t==null?void 0:t.title}),(t==null?void 0:t.lecturer.username)==(a==null?void 0:a.username)&&e.jsx("div",{children:e.jsx(Be,{menu:{items:x},placement:"topRight",trigger:["click"],arrow:!0,children:e.jsx("div",{className:"cursor-pointer rounded-full p-2 text-white hover:bg-blue-500",children:e.jsx(Ge.more,{})})})})]})]}),r?e.jsx("div",{className:"round-md shadow-md mb-2",children:e.jsx(us,{form:o,fileList:c,setFileList:h,currentEdit:s,submit:d})}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{lecturer:t==null?void 0:t.lecturer}),e.jsx(ms,{description:t==null?void 0:t.description})]})]})},Vi=N(Gi),qi=()=>{const{courseStore:{courseRegistry:s}}=w(),[t,a]=g.useState();return g.useEffect(()=>{const r=Array.from(s.values()).sort(()=>.5-Math.random());r.length<=4?a(r):a(r.slice(0,4))},[]),e.jsx("section",{className:"w-full mx-auto px-2 my-12 ",children:e.jsxs("article",{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-gray-900",children:"หลักสูตรอบรม"}),e.jsx("section",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-8 ",children:t==null?void 0:t.map(r=>e.jsxs("article",{className:"hover-card relative w-full h-64 bg-cover bg-center group rounded-lg overflow-hidden shadow-lg hover:shadow-2xl  transition duration-300 ease-in-out",style:{backgroundImage:`url(${r.image})`},children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 group-hover:opacity-75 transition duration-300 ease-in-out"}),e.jsx("div",{className:"relative w-full h-full px-4 sm:px-6 lg:px-4 flex justify-center items-center",children:e.jsx("h3",{className:"text-center",children:e.jsxs(R,{to:f.courseDetail(r.id),className:"text-white text-2xl font-bold text-center",children:[e.jsx("span",{className:"absolute inset-0"}),r.title]})})})]},r.id))})]})})},xs=N(qi),Ve=s=>{let t=new Date(s).getFullYear()+543;return Ce(new Date(s),"d MMMM "+t,{locale:Se})},gs=()=>{const[s,t]=g.useState(!1),[a,r]=g.useState();return{formMode:s,setFormMode:t,currentEdit:a,setCurrentEdit:r}},Ji=({form:s,submit:t,file:a,setFile:r})=>{const{courseStore:{},generationStore:{loading:n,submittingLoading:l}}=w();g.useEffect(()=>()=>{r(""),s.resetFields()},[]);const o=c=>{const{status:h,response:d}=c.file;h=="done"&&r(d)};return n?e.jsx(ae,{active:!0,className:"px-2 py-4"}):e.jsxs(j,{form:s,onFinish:t,layout:"vertical",className:"px-4 py-8 mb-2",initialValues:{quantity:1},children:[e.jsx(j.Item,{name:"subTitle",label:"หัวข้อ",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{showCount:!0,maxLength:60,autoSize:{minRows:1,maxRows:4}})}),e.jsx(j.Item,{name:"dateRange",label:"ระยะเวลา",rules:[{required:!0,message:"กรุณาเลือกระยะเวลาหลักสูตร"}],children:e.jsx(ma,{showShortcuts:!0,primaryColor:"indigo",displayFormat:"DD-MM-YYYY",containerClassName:"border border-gray-300 rounded-lg",value:s.getFieldValue("dateRange"),onChange:c=>s.setFieldValue("dateRange",c)})}),e.jsx(j.Item,{name:"quantity",label:"จำนวนผู้ลงทะเบียน",children:e.jsx(ss,{min:1})}),e.jsx(j.Item,{name:"description",label:"รายละเอียด",children:e.jsx(He,{value:s.getFieldValue("description")})}),e.jsx(j.Item,{children:e.jsxs(L,{wrap:!0,size:[16,16],children:[e.jsx(je,{accept:"image/jpeg, image/png,  image/jpg",action:xe.urlUploadFile+"?quality=100",previewFile:void 0,showUploadList:!1,onChange:o,children:e.jsx(C,{type:"dashed",className:"mt-4",children:"อัพโหลดรูปปก"})}),a&&e.jsx(de,{src:A(a),width:"240px",height:"160px",className:"max-h-96 shadow-md rounded-md object-cover object-center"})]})}),e.jsx(j.Item,{children:e.jsx(C,{type:"primary",shape:"round",htmlType:"submit",children:"บันทึก",loading:l})})]})},js=N(Ji),_i=()=>{const{id:s}=fe(),{userStore:{user:t},courseStore:{courseSelected:a,loadCourse:r},generationStore:{newGeneration:n,loadingGeneration:l,editGeneration:o,loading:c}}=w(),{formMode:h,setFormMode:d,currentEdit:x,setCurrentEdit:y}=gs(),[p,m]=g.useState(),[b]=ge(),v=(t==null?void 0:t.username)===(a==null?void 0:a.lecturer.username),k=T=>{if(T.dateRange.startDate==null||T.dateRange.endDate==null)return X.warning("กรุณากรอกระยะเวลา");let U=Object.assign(T,{courseId:s,genPhoto:p,startDate:T.dateRange.startDate,endDate:T.dateRange.endDate,id:x});x?o(U).then(I):n(U).then(I)},I=()=>{r(s),d(!1),y(""),b.resetFields(),window.scrollBy({top:-window.pageYOffset,behavior:"smooth"})},O=T=>{d(!0),l(T).then(U=>{b.setFieldsValue(U.generation),b.setFieldValue("dateRange",{startDate:$e(U.generation.startDate),endDate:$e(U.generation.endDate)}),m(U.generation.genPhoto),y(T)}).catch(()=>d(!1))};return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between font-medium mb-2",children:[e.jsx("span",{className:"text-md font-semibold text-gray-900",children:"ลงทะเบียน"}),v&&e.jsx("button",{onClick:()=>d(!h),className:"p-2 bg-green-500 text-md text-gray-100 rounded-lg border-green-300 hover-card",children:h?"กลับ":"เปิดลงทะเบียน"})]}),h?e.jsx("div",{className:"shadow-md round-lg",children:e.jsx(js,{form:b,submit:k,file:p,setFile:m})}):e.jsxs("div",{style:{maxHeight:"48rem"},className:"shadow-md flex flex-col bg-white rounded-lg flex-none w-full h-5/6 overflow-scroll",children:[(a==null?void 0:a.generations.length)<1&&e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}),e.jsxs("div",{className:"flex flex-col divide-y",children:[a==null?void 0:a.generations.map(T=>e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between space-x-6 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:A(T.genPhoto),className:"rounded-md h-16 w-16 object-cover"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(R,{to:f.generationDetail(T.id),children:T.subTitle}),e.jsxs("span",{children:[Ve(T.startDate)," -"," ",Ve(T.endDate)]})]})]}),e.jsxs(L,{wrap:!0,children:[e.jsx(C,{shape:"round",type:"default",onClick:()=>M.navigate(f.generationDetail(T.id)),children:e.jsx(ua,{})}),v&&e.jsx(C,{shape:"round",type:"primary",onClick:()=>O(T.id),children:e.jsx(xa,{})})]})]})},T.id)),c&&e.jsx(ae,{active:!0,className:"px-2 py-4"})]})]})]})},Yi=N(_i),Wi=()=>{const{pathname:s}=Te(),{id:t}=fe(),{courseStore:{loadCourse:a,courseSelected:r,courseRegistry:n}}=w(),{loadApp:l,setLoadApp:o}=Ui();return g.useEffect(()=>{t&&(o(!0),a(t).finally(()=>o(!1)))},[s]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container grid px-6 mx-auto",children:e.jsxs(E,{className:"my-8",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:e.jsxs(L,{children:[e.jsx(yt,{}),e.jsx("span",{children:"หน้าหลัก"})]})})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.courses,children:"หลักสูตรอบรม"})}),e.jsx(E.Item,{children:e.jsx("span",{children:(r==null?void 0:r.title)||""})})]})})}),e.jsx(Z,{hScreen:!1,children:e.jsx($,{className:"rounded-md pt-4",children:l?e.jsx(ae,{active:!0,className:"px-2 py-4"}):e.jsxs(e.Fragment,{children:[e.jsx(F,{xs:24,md:12,lg:14,className:"md:pr-2 lg:pr-4",children:e.jsx(Vi,{})}),e.jsx(F,{xs:24,md:12,lg:10,className:"md:pl-2 lg:pl-4",children:e.jsx(Yi,{})}),Array.from(n.values()).length>0&&e.jsx(F,{span:24,children:e.jsx(xs,{})})]})})})]})},Ki=N(Wi),Zi=({handleSetFormEdit:s})=>{const{generationStore:{cancel:t,generationSelect:a,deleteGeneration:r},userStore:{user:n}}=w();if(!a)return null;const l=(n==null?void 0:n.username)==a.lecturer.username,o=new ds(a.generation.isCancelled),c=()=>{Ae.confirm({centered:!0,title:"ยืนยัน",content:`ข้อมูลหลักสูตรอบรม ${a.generation.subTitle} และข้อมูลผู้ที่ลงทะเบียนในรอบนี้จะถูกลบออกจากระบบ`,onOk:()=>r(a.generation.id).then(()=>{M.navigate(-1)})})},h=[{key:"edit-generation",label:"แก้ไข",onClick:s},{key:"cancel-generation",label:o.data(!o.open)[0],danger:!o.open,onClick:()=>t(a.generation.id)},{key:"remove-generation",label:"ยกเลิกหลักสูตรอบรม",danger:!0,onClick:c}],d=()=>e.jsx("div",{className:"bg-gray-100 m-auto h-80",style:{backgroundImage:`url(${A(a==null?void 0:a.generation.genPhoto)})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:e.jsx("div",{className:"flex flex-row items-end h-full w-full",children:e.jsxs("div",{className:"flex flex-col w-full pb-3 pt-10 px-3 bg-gradient-to-t from-black text-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold leading-5 uppercase",children:e.jsx(R,{to:f.courseDetail(a.id),children:a==null?void 0:a.title})}),e.jsx("div",{className:"inline-flex items-center",children:e.jsx("span",{className:"capitalize font-base text-sm my-1 mr-1",children:a==null?void 0:a.generation.subTitle})}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"flex flex-row",children:e.jsxs("div",{className:"w-max inline-flex items-center",children:[e.jsx(Ge.time,{}),e.jsxs(L,{wrap:!0,className:"text-xs ml-1 antialiased",children:[Ve(a==null?void 0:a.generation.startDate),"-",Ve(a==null?void 0:a.generation.endDate)]})]})}),e.jsx("div",{className:"w-max",children:l&&e.jsx(Be,{menu:{items:h},placement:"topRight",trigger:["click"],arrow:!0,children:e.jsx("div",{className:"cursor-pointer p-2 hover:bg-blue-500 text-white rounded-full",children:e.jsx(Ge.more,{})})})})]})]})})});return e.jsx(st.Ribbon,{placement:"start",text:o.data(o.open)[0],color:o.data(o.open)[1],children:e.jsx(d,{})})},Xi=()=>{const{generationStore:{generationSelect:s,join:t,submittingLoading:a,loading:r,editGeneration:n},userStore:{isLoggedIn:l,user:o},modalStore:{openModal:c}}=w(),{formMode:h,setFormMode:d}=gs(),[x,y]=g.useState(),[p]=ge();if(!s)return null;const m=(o==null?void 0:o.username)===(s==null?void 0:s.lecturer.username),b=s.generation.isCancelled||!s.isJoined&&s.generation.attendees.length>=s.generation.quantity,v=()=>{l?t(s.generation.id):c(e.jsx(wt,{}),"เข้าสู่ระบบ")},k=()=>{d(!h),p.setFieldsValue(s.generation),p.setFieldValue("dateRange",{startDate:$e(s.generation.startDate),endDate:$e(s.generation.endDate)}),y(s.generation.genPhoto)},I=U=>{if(U.dateRange.startDate==null||U.dateRange.endDate==null)return X.warning("กรุณากรอกระยะเวลา");let Y=Object.assign(U,{courseId:s.id,genPhoto:x,startDate:U.dateRange.startDate,endDate:U.dateRange.endDate,id:s.generation.id});n(Y).then(()=>{d(!1),window.scrollTo({top:-window.pageYOffset,behavior:"smooth"})})},O=()=>{var U;return e.jsxs("div",{className:"w-full bg-white rounded-lg shadow-md p-4 flex flex-row justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-700 tracking-wide",children:e.jsxs("p",{className:"text-lg font-bold text-blue-500",children:[(U=s.generation.attendees)==null?void 0:U.length,"/",s.generation.quantity]})}),m?e.jsx(C,{loading:r,type:"dashed",onClick:k,children:h?"กลับ":"แก้ไข"}):e.jsx(C,{type:"primary",onClick:v,loading:a,danger:s.isJoined,children:s.isJoined?"ยกเลิกลงทะเบียน":"ลงทะเบียน",disabled:b})]})},T=()=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex bg-white shadow-lg rounded-lg overflow-hidden my-4",children:[e.jsx("div",{className:"w-2 bg-gray-800"}),e.jsxs("div",{className:"flex items-center px-2 py-3",children:[e.jsx("img",{className:"w-12 h-12 object-cover rounded-full",src:s.image}),e.jsxs("div",{className:"mx-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e.jsx(R,{to:f.courseDetail(s.id),children:s.title})}),e.jsx("p",{className:"text-gray-600",children:"หลักสูตร"})]})]})]}),e.jsx(hs,{lecturer:s==null?void 0:s.lecturer}),e.jsx(ms,{description:s==null?void 0:s.generation.description})]});return e.jsxs(e.Fragment,{children:[e.jsx(Zi,{handleSetFormEdit:k}),e.jsx(O,{}),h?e.jsx("div",{className:"shadow-md round-lg",children:e.jsx(js,{form:p,submit:I,file:x,setFile:y})}):e.jsx(T,{})]})},Qi=N(Xi),el=({fileName:s,pdf:t,children:a})=>e.jsx(ga,{document:t,fileName:s,children:a}),V=ja.create({page:{paddingTop:20,paddingHorizontal:10,flexDirection:"column",backgroundColor:"#E4E4E4"},section:{padding:6,fontSize:24,fontFamily:"Kanit"},table:{display:"flex",width:"auto",marginTop:10,borderStyle:"solid",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{width:"25%",borderStyle:"solid",borderBottomWidth:1,borderRightWidth:1,fontFamily:"Kanit"},tableCol:{width:"25%",borderStyle:"solid",borderBottomWidth:1,borderRightWidth:1,fontFamily:"Kanit"},tableCellHeader:{margin:5,fontSize:12,fontWeight:500,fontFamily:"Kanit"},tableCell:{margin:5,fontSize:10},text:{fontSize:10},box:{height:10}}),tl=({generation:s})=>{var a,r;const t=n=>{const l=new Date(n);return Ce(l,`d MMMM ${l.getFullYear()+543}`,{locale:Se})};return e.jsx(pa,{children:e.jsxs(fa,{size:"A4",style:V.page,children:[e.jsx(ie,{style:V.section,children:e.jsx(le,{children:s.title})}),e.jsxs(ie,{style:V.section,children:[e.jsx(le,{style:V.text,children:`รอบ: ${s.generation.subTitle}`}),e.jsx(le,{style:V.text,children:`อาจารย์: ${s.lecturer.fullName}`}),e.jsx(le,{style:V.text,children:`ระยะเวลา: ${t(s.generation.startDate)} - ${t(s.generation.endDate)}`}),e.jsx(le,{style:V.text,children:`ลงทะเบียน: ${(a=s.generation.attendees)==null?void 0:a.length} คน`}),e.jsx(ie,{style:V.box}),e.jsx(le,{children:"รายชื่อผู้ลงทะเบียน"}),e.jsxs(ie,{style:V.table,children:[e.jsxs(ie,{style:V.tableRow,children:[e.jsx(ie,{style:V.tableColHeader,children:e.jsx(le,{style:V.tableCellHeader,children:"ลำดับบ"})}),e.jsx(ie,{style:V.tableColHeader,children:e.jsx(le,{style:V.tableCellHeader,children:"ชื่อ"})}),e.jsx(ie,{style:V.tableColHeader,children:e.jsx(le,{style:V.tableCellHeader,children:"อีเมล"})}),e.jsx(ie,{style:V.tableColHeader,children:e.jsx(le,{style:V.tableCellHeader,children:"วันที่"})})]}),(r=s.generation.attendees)==null?void 0:r.map((n,l)=>e.jsxs(ie,{style:V.tableRow,children:[e.jsx(ie,{style:V.tableCol,children:e.jsx(le,{style:V.tableCell,children:l+1})}),e.jsx(ie,{style:V.tableCol,children:e.jsx(le,{style:V.tableCell,children:n.fullName})}),e.jsx(ie,{style:V.tableCol,children:e.jsx(le,{style:V.tableCell,children:n.email})}),e.jsx(ie,{style:V.tableCol,children:e.jsx(le,{style:V.tableCell,children:n.date&&t(n.date)})})]},l))]})]})]})})},sl=({commentsByDate:s,user:t,isHost:a,handleRemoveComment:r})=>e.jsxs("div",{className:"space-y-2",children:[s.length<1&&e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}),s.map(([n,l],o)=>e.jsxs("div",{children:[e.jsx("p",{className:"text-center text-gray-300",children:n}),l.map((c,h)=>e.jsxs("div",{className:"flex relative group hover:bg-gray-100 rounded-lg px-2",children:[e.jsx("div",{className:"flex-shrink-0 mr-2",children:c.author&&c.author.image?e.jsx("img",{className:"mt-2 rounded-full w-8 h-8 sm:w-10 sm:h-10",src:A(c.author.image)}):e.jsx(it,{label:c.author&&c.author.fullName[0]||"Anonymous",className:"mt-2 rounded-full w-8 h-8 sm:w-10 sm:h-10"})}),e.jsxs("div",{className:"flex-1 p-2 leading-relaxed box-border",children:[e.jsxs(L,{children:[e.jsx(R,{to:f.accountDetail(c.author&&c.author.username||""),children:e.jsx("strong",{children:c.author&&c.author.fullName.split(" ")[0]||"Anonymous"})}),e.jsx("span",{className:"text-xs text-gray-400",children:Ce(new Date(c.createdAt),"HH:mm")})]}),e.jsx("p",{className:"text-sm",children:vr(c.body||"")})]}),(c.author&&c.author.username==(t==null?void 0:t.username)||a)&&e.jsx("div",{className:"absolute top-0 right-0 hidden group-hover:block cursor-pointer p-2",onClick:()=>r(c.id,c.author),children:e.jsx(ba,{})})]},h))]},o))]}),al=({generationId:s})=>{const{courseCommentStore:t,generationStore:{generationSelect:a},userStore:{user:r}}=w(),n=g.useRef(null),[l]=ge();g.useEffect(()=>(s&&t.createHubConnection(s),()=>{t.clearComments(),t.setCountShown(8)}),[t,s]);const o=d=>{d.body&&t.addComment(d).then(()=>{l.resetFields(),n.current.getFieldInstance("body").focus()})},c=(d,x)=>{Ae.confirm({title:"ลบข้อความ?",okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:e.jsx(ft,{}),content:`ลบข้อความของ ${x.username==(r==null?void 0:r.username)?"คุณ":x.fullName} ใช่ไหม`,async onOk(){await t.removeComment(d)}})},h=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),d.stopPropagation(),l.submit())};return e.jsxs(e.Fragment,{children:[r&&e.jsxs(j,{ref:n,form:l,onFinish:o,className:"flex items-center justify-center py-2 px-3 bg-gray-100 rounded-lg mb-2",children:[e.jsx(j.Item,{className:"m-0 w-12",children:e.jsx(R,{to:f.accountDetail(r.username),children:r&&r.image?e.jsx("img",{className:"text-gray-500 cursor-pointer rounded-full w-10 h-10 p-1",src:r.image}):e.jsx("div",{className:"p-2",children:e.jsx(it,{label:r==null?void 0:r.fullName,className:"rounded-full w-8 h-8"})})})}),e.jsx(j.Item,{name:"body",className:"w-full m-0",children:e.jsx(D.TextArea,{allowClear:!0,autoSize:{minRows:1,maxRows:4},className:"block w-full text-sm text-gray-900 bg-white rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"เพิ่มข้อความของคุณ...",onKeyDown:h,onChange:d=>{l.setFieldValue("body",d.target.value)}})}),e.jsx(j.Item,{className:"m-0",children:e.jsx(te,{placement:"top",title:"ส่ง",children:e.jsx("button",{type:"submit",className:"p-2 text-blue-600 rounded-full cursor-pointer hover:bg-blue-100",children:e.jsx(Ge.send,{})})})})]}),e.jsxs("div",{className:"py-4 my-4 antialiased mx-auto max-w-screen-sm shadow-md rounded-lg",children:[e.jsxs(L,{className:"px-4",children:[e.jsx(ya,{size:16}),e.jsxs("h3",{className:"text-md font-semibold text-gray-900 ",children:["พูดคุย ",t.comments.length," รายการ"]})]}),e.jsx(sl,{commentsByDate:Object.entries(t.commentsByDate()),user:r,isHost:a==null?void 0:a.isHost,handleRemoveComment:c}),t.comments.length>t.countShown&&e.jsx("div",{className:"w-full px-4 mt-2",children:e.jsx("button",{className:"py-2 px-4 w-full block bg-slate-100 text-center rounded-lg font-medium hover:bg-slate-200 transition ease-in-out delay-75",onClick:()=>t.setCountShown(t.countShown+8),children:"แสดงเพิ่มเติม"})})]})]})},rl=N(al),nl=[{label:"ลำดับ",key:"index"},{label:"ชื่อ",key:"fullName"},{label:"อีเมล",key:"email"},{label:"วันที่",key:"date"},{label:"เพิ่มเติม",key:"more"}],il=({attendees:s,filename:t})=>{const a=s.map((r,n)=>({index:n,fullName:r.fullName,email:r.email,date:r.date,more:""}));return e.jsx(wa,{filename:t,headers:nl,data:a,children:"Excel"})},ll=()=>{var l,o;const{generationStore:{generationSelect:s},userStore:{user:t}}=w(),a=(t==null?void 0:t.username)==(s==null?void 0:s.lecturer.username),r=`${s==null?void 0:s.title.replace(/\s/g,"-")}-${Ce(new Date(Date.now()),"dd-MM-yy")}`,n=[{key:"1",label:e.jsx(el,{fileName:r,pdf:e.jsx(tl,{generation:s}),children:"pdf"})},{key:"2",label:e.jsx(il,{filename:r+".csv",attendees:(s==null?void 0:s.generation.attendees)||[]})}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between px-2 text-lg font-medium",children:[e.jsxs("div",{className:"text-md font-semibold text-gray-900 ",children:[(l=s==null?void 0:s.generation.attendees)==null?void 0:l.length," ผู้ลงทะเบียน"]}),a&&e.jsx(Be,{menu:{items:n},children:e.jsx(C,{type:"primary",shape:"round",children:"พิมพ์รายชื่อผู้ลงทะเบียน"})})]}),e.jsxs("div",{className:" w-full mx-auto bg-white rounded-xl shadow-md flex flex-col pt-4 min-h-36 max-h-96 overflow-y-scroll mb-4",children:[((o=s==null?void 0:s.generation.attendees)==null?void 0:o.length)<1&&e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}),s==null?void 0:s.generation.attendees.map((c,h)=>e.jsx("div",{className:"user-row flex flex-col  justify-between cursor-pointer p-4 duration-300 sm:py-4 sm:px-8 hover:bg-[#f6f8f9]",children:e.jsxs("div",{className:"user flex items-center flex-row gap-4",children:[e.jsx("div",{className:"avatar-content mb-2.5 sm:mb-0 sm:mr-2.5 ",children:c.image?e.jsx("img",{className:"avatar w-16 h-16 rounded-full",src:c.image}):e.jsx("div",{className:"avatar-initials w-16 h-16 rounded-full flex items-center justify-center bg-gray-500 text-lg text-white font-bold",children:c.fullName.charAt(0)})}),e.jsxs("div",{className:"user-body flex flex-col mb-4 sm:mb-0",children:[e.jsx(R,{to:f.accountDetail(c.username),className:"title font-medium no-underline mb-2",children:c.fullName}),e.jsx("div",{className:"skills flex flex-col",children:e.jsx("span",{className:"subtitle text-slate-500",children:Ve(c.date)})})]})]})},h))]}),e.jsx(rl,{generationId:s==null?void 0:s.generation.id})]})},ol=N(ll),cl=()=>{const{id:s}=fe(),{generationStore:{loadingGeneration:t,generationSelect:a,clearGenerationSelect:r},courseStore:{courseRegistry:n}}=w();return g.useEffect(()=>(s&&t(s),()=>{r()}),[]),e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-gray-100",children:e.jsx("div",{className:"container grid px-6 mx-auto",children:e.jsxs(E,{className:"my-8",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:e.jsxs(L,{children:[e.jsx(yt,{}),e.jsx("span",{children:"หน้าหลัก"})]})})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.courses,children:"หลักสูตรอบรม"})}),a&&e.jsxs(e.Fragment,{children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.courseDetail(a.id),children:a==null?void 0:a.title})}),e.jsx(E.Item,{children:e.jsx("span",{children:a==null?void 0:a.generation.subTitle})})]})]})})}),e.jsx(Z,{hScreen:!1,children:e.jsx($,{className:"pt-4 rounded-md",children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{xs:24,md:12,lg:14,className:"md:pr-2 lg:pr-4",children:e.jsx(Qi,{})}),e.jsx(F,{xs:24,md:12,lg:10,className:"md:pl-2 lg:pl-4",children:e.jsx(ol,{})}),Array.from(n.values()).length>0&&e.jsx(F,{span:24,children:e.jsx(xs,{})})]}):e.jsx(ae,{active:!0,className:"px-2 py-4"})})})]})},dl=N(cl),hl=()=>{const{id:s}=fe(),{courseStore:{loadCourse:t,loading:a,courseSelected:r}}=w(),{setLoad:n,load:l,handleSubmit:o}=kt(),[c]=ge(),[h,d]=g.useState([]);g.useEffect(()=>{s&&r?(x(r),n(!1)):s?t(s).then(x).finally(()=>n(!1)):n(!1)},[]);const x=p=>{c.setFieldsValue({title:p==null?void 0:p.title,description:p==null?void 0:p.description}),d(p.photos)},y=p=>{var m;(m=o(p,h))==null||m.then(()=>{M.navigate(-1)})};return e.jsxs(Z,{children:[e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.courses,children:"หลักสูตร"})}),e.jsx(E.Item,{children:e.jsx("span",{children:"ฟอร์มกรอกข้อมูลหลักสูตร"})})]}),l||a?e.jsx(ae,{active:!0,className:"px-2 py-6"}):e.jsx("div",{className:"min-h-screen bg-white rounded-md mb-4 shadow-lg",children:e.jsx(us,{form:c,fileList:h,setFileList:d,currentEdit:s,submit:y})})]})},At=N(hl),ml=()=>{const{newsStore:{loadNewses:s,predicate:t,setSearch:a,pagination:r}}=w(),n=l=>{a(l),s()};return e.jsx(L,{wrap:!0,className:"flex flex-row-reverse mt-2",children:e.jsx(D.Search,{allowClear:!0,placeholder:"ค้าหา",onSearch:n,defaultValue:t.get("search")})})},ul=()=>{const{newsStore:{loadNewses:s,stopLoading:t,setPagingParams:a,newsRegistry:r,pagination:n,pagingParams:l,loading:o,predicate:c}}=w();return g.useEffect(()=>{s().then(t)},[l,c]),e.jsxs(Z,{children:[e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx("span",{children:"ข่าวประชาสัมพันธ์"})})]}),e.jsxs("section",{className:"min-h-screen bg-gray-100 py-8 px-4",children:[e.jsx("h1",{className:"text-center font-bold text-3xl text-indigo-500",children:"ข่าวประชาสัมพันธ์"}),e.jsx("h3",{className:"text-center ",children:"สาขาวิทยาการคอมพิวเตอร์"}),e.jsx(ml,{}),e.jsxs("div",{className:"justify-center my-10",children:[!o&&r.size<1&&e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"}),e.jsx($,{gutter:[16,16],children:o?e.jsx(F,{span:24,children:e.jsx(vt,{})}):Array.from(r.values()).map(h=>e.jsx(rs,{news:h},h.id))})]}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:n==null?void 0:n.totalItems,current:n==null?void 0:n.currentPage,pageSize:l.pageSize,onChange:a})]})]})},xl=N(ul),gl=({jobHistory:s})=>e.jsx($,{gutter:[16,16],children:s.map((t,a)=>{var r,n,l,o,c,h;return e.jsx(F,{xs:24,sm:12,md:8,lg:4,children:e.jsx("div",{className:"max-w-sm bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col items-center pb-8 px-4 pt-4",children:[(r=t.user)!=null&&r.image?e.jsx("img",{className:"mb-3 w-24 h-24 rounded-full shadow-lg",src:(n=t.user)==null?void 0:n.image,alt:(l=t.user)==null?void 0:l.fullName}):e.jsx(it,{label:(o=t.user)==null?void 0:o.fullName,className:"mb-3 w-24 h-24 rounded-full shadow-lg"}),e.jsx("h3",{className:"mb-1 text-xl font-medium text-gray-900 dark:text-white",children:(c=t.user)==null?void 0:c.fullName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.jobName}),e.jsxs("div",{className:"flex mt-4 space-x-3 lg:mt-6",children:[e.jsx("a",{href:"#",className:"inline-flex items-center py-2 px-4 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"เพิ่มเติม"}),e.jsx(R,{to:f.accountDetail((h=t.user)==null?void 0:h.username),className:"inline-flex items-center py-2 px-4 text-sm font-medium text-center text-gray-900 bg-white rounded-lg border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-blue-300 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-700 dark:focus:ring-gray-800",children:"ดูโปรไฟล์"})]})]})})},a)})}),jl=()=>{const{jobHistoryStore:{jobHistoryRegistry:s,loading:t,loadJobHistories:a,pagination:r,pagingParams:n,setPagingParams:l}}=w();return g.useEffect(()=>{a()},[n]),e.jsxs(Z,{children:[e.jsx(Pt,{}),e.jsxs("section",{className:"min-h-screen bg-gray-100 py-8 px-4",children:[e.jsx("h1",{className:"text-center font-bold text-3xl text-indigo-500",children:"ประวัติการทำงานของนักศึกษา"}),e.jsx("h3",{className:"text-center mb-4",children:"สาขาวิทยาการคอมพิวเตอร์"}),t?e.jsx(ae,{active:!0}):e.jsx(gl,{jobHistory:Array.from(s.values())}),!t&&s.size<1&&e.jsx(Z,{children:e.jsx(q,{image:q.PRESENTED_IMAGE_SIMPLE,description:"ไม่มีข้อมูล"})}),e.jsx(Ue,{hideOnSinglePage:!0,className:"float-right mb-4",total:r==null?void 0:r.totalItems,current:r==null?void 0:r.currentPage,pageSize:n.pageSize,onChange:l})]})]})},pl=N(jl),xt=({label:s,name:t,required:a=!0,help:r,rules:n=[]})=>e.jsx(j.Item,{name:t,label:s,required:a,rules:[...n,{required:a,message:"กรุณากรอกข้อมูล"}],help:r,children:e.jsx(D,{})}),fl=({currentEdit:s})=>{const{projectStore:{setFormBody:t,formBody:a,projectRegistry:r}}=w(),[n,l]=g.useState(""),o=g.useRef(null),[c,h]=g.useState(!1),[d,x]=g.useState([]);g.useEffect(()=>{var b;if(c&&((b=o.current)==null||b.focus()),s){let v=r.get(s);x(v==null?void 0:v.consultants)}},[]);const y=b=>{const v=a.consultants.filter((k,I)=>I!==b);t({consultants:v}),x(v)},p=()=>{n.length>0&&(t({consultants:[...d,{lecturerName:n}]}),x([...d,{lecturerName:n}]),h(!1),l(""))},m=(b,v)=>e.jsx("span",{className:"inline-block",children:e.jsx(we,{closable:!0,onClose:k=>{k.preventDefault(),y(v)},children:b.lecturerName})},v);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"my-2",children:[c?e.jsx(D,{ref:o,type:"text",style:{width:160},value:n,onChange:b=>l(b.target.value),onBlur:p,onPressEnter:p}):e.jsx(L,{children:e.jsxs(we,{className:"border-dashed",onClick:()=>h(!0),children:[e.jsx(Ne,{})," เพิ่ม"]})}),e.jsx(bt,{enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:b=>{(b.type==="appear"||b.type==="enter")&&(b.target.style="display: inline-block")},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,className:"mt-2",children:d.map(m)})]})})},bl=N(fl),yl=({currentEdit:s})=>{const{projectStore:{setFormBody:t,projectRegistry:a,formBody:r}}=w(),[n,l]=g.useState(""),o=g.useRef(null),[c,h]=g.useState(!1),[d,x]=g.useState([]);g.useEffect(()=>{var b;if(c&&((b=o.current)==null||b.focus()),s){let v=a.get(s);x(v==null?void 0:v.keyWordList)}},[]);const y=b=>{const v=r.keyWordList.filter((k,I)=>I!=b);t({keyWordList:v}),x(v)},p=()=>{n.length>0&&(t({keyWordList:[...d,n]}),x([...d,n]),h(!1),l(""))},m=(b,v)=>e.jsx("span",{className:"inline-block",children:e.jsx(we,{closable:!0,onClose:k=>{k.preventDefault(),y(v)},children:b})},v);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"my-2",children:[c?e.jsx(D,{ref:o,type:"text",style:{width:102},value:n,onChange:b=>l(b.target.value),onBlur:p,onPressEnter:p}):e.jsx(L,{children:e.jsxs(we,{className:"border-dashed",onClick:()=>h(!0),children:[e.jsx(Ne,{})," เพิ่ม"]})}),e.jsx(bt,{enter:{scale:.8,opacity:0,type:"from",duration:100},onEnd:b=>{(b.type==="appear"||b.type==="enter")&&(b.target.style="display: inline-block")},leave:{opacity:0,width:0,scale:0,duration:200},appear:!1,className:"mt-4",children:d.map(m)})]})})},wl=({currentEdit:s})=>{const{userStore:{user:t},commonStore:{json:a},projectStore:{projectRegistry:r,submitLoading:n,setFormBody:l,createProject:o,clearFormBody:c,loadProjectByUsername:h,updateProject:d,formBody:x}}=w(),[y,p]=g.useState(!1),[m,b]=g.useState(),[v,k]=g.useState(),[I]=ge();g.useEffect(()=>(s&&O(),()=>{s&&(window.scrollTo(0,0),c())}),[]);const O=async()=>{let H=r.get(s);(!H||H.student.username!==t.username)&&M.navigate(f.projects,{replace:!0}),l({...H}),I.setFieldsValue(x),k(x.pdf),b(x.imagePreview)},T=H=>{b(URL.createObjectURL(H)),l({fileImage:H})},U=H=>{k(H),l({filePDF:H})},Y=()=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"คลิ้กหรือลากไฟล์ไปยังพื้นที่นี้เพื่ออัปโหลด"}),e.jsx("p",{className:"ant-upload-hint",children:"รองรับการอัปโหลดครั้งเดียว"})]}),ee=()=>{s?d().then(c).then(G):o().then(c).then(G).catch(H=>X.error(H))},G=()=>{h(t==null?void 0:t.username),M.navigate(f.projects),X.success("สำเร็จ")};return e.jsxs(j,{form:I,layout:"vertical",onValuesChange:l,onFinish:ee,className:"overflow-clip w-full",children:[e.jsxs($,{gutter:[16,16],children:[e.jsxs(F,{span:24,lg:12,children:[e.jsx(j.Item,{name:"nameTH",label:"ชื่อโครงงาน ภาษาไทย",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{showCount:!0,maxLength:120,autoSize:{minRows:1,maxRows:4}})}),e.jsx(j.Item,{name:"nameEN",label:"ชื่อโครงงาน ภาษาอังกฤษ",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{showCount:!0,maxLength:120,autoSize:{minRows:1,maxRows:4}})}),e.jsx(xt,{name:"videoUrl",label:"ลิ้งยูทูป",rules:[{type:"url",warningOnly:!0,message:"รูปแบบ URL ไม่ถูกต้อง"}],help:e.jsx(Kt,{className:"cursor-pointer",onClick:()=>p(!0)})}),e.jsx(xt,{name:"webUrl",label:"ลิ้งตัวอย่างเว็บ",required:!1,rules:[{type:"url",warningOnly:!0,message:"รูปแบบ URL ไม่ถูกต้อง"}]}),e.jsx(xt,{name:"githubUrl",label:"Github",required:!1,rules:[{type:"url",warningOnly:!0,message:"รูปแบบ URL ไม่ถูกต้อง"}]}),e.jsx(j.Item,{name:"description",label:"รายละเอียด",rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],className:"overflow-clip",children:e.jsx(He,{value:I.getFieldValue("description")})})]}),e.jsxs(F,{span:24,lg:12,children:[e.jsx(j.Item,{label:"อัพโหลดรูปภาพ",required:!0,children:e.jsx(je.Dragger,{showUploadList:!1,beforeUpload:T,accept:".png,.jpg",children:m?e.jsx(de,{preview:!1,className:"object-cover object-top",width:280,height:160,src:m}):Y()})}),e.jsx(j.Item,{label:"อัพโหลดไฟล์เอกสาร",required:!0,children:e.jsx(je.Dragger,{showUploadList:!1,beforeUpload:U,accept:".pdf",children:v?e.jsx(e.Fragment,{children:v.name||v}):Y()})}),e.jsx(j.Item,{label:"ที่ปรึกษา",children:e.jsx(bl,{currentEdit:s})}),e.jsx(j.Item,{label:"คำสำคัญ",children:e.jsx(yl,{currentEdit:s})}),e.jsx(j.Item,{children:e.jsx(C,{loading:n,shape:"round",type:"primary",htmlType:"submit",children:"บันทึก"})})]})]}),e.jsx(Zt,{animated:!0,open:y,onClose:()=>p(!1),steps:is(a["youtube-guidelines"])})]})},Nl=N(wl),vl=()=>{const{id:s}=fe();return e.jsxs(Z,{children:[e.jsxs(E,{className:"my-4",children:[e.jsx(E.Item,{children:e.jsx(R,{to:f.home,children:"หน้าหลัก"})}),e.jsx(E.Item,{children:e.jsx(R,{to:f.projects,children:"โครงงานวิจัย"})}),e.jsx(E.Item,{children:e.jsx("span",{children:"ฟอร์มบันทึกข้อมูลโครงงานวิจัย"})})]}),e.jsx("section",{className:"rounded-lg shadow-md mb-2 p-4",children:e.jsx(Nl,{currentEdit:s})})]})},Ht=N(vl),Sl=({handleSetEdit:s,mapTable:t})=>{const{comSciSubject:{removeSubject:a}}=w();return[{title:"รูปหัวข้อ",key:"icon",dataIndex:"icon"},{title:"ชื่อหัวข้อ",key:"subjectName",dataIndex:"subjectName"},{title:"จัดการ",key:"action",render:r=>e.jsxs(L,{wrap:!0,children:[e.jsx(te,{placement:"top",title:"รายละเอียด",children:e.jsx(C,{shape:"round",type:"default",children:e.jsx(nt,{size:18}),onClick:()=>M.navigate("")})}),e.jsx(te,{placement:"top",title:"แก้ไข",children:e.jsx(C,{shape:"round",type:"primary",color:"yellow",children:e.jsx(Ee,{size:18}),onClick:()=>s(r.key)})}),e.jsx(Me,{placement:"topRight",title:"ลบ",description:"ข้อมูลจะถูกลบออกจากระบบ",onConfirm:()=>a(r.key).then(t),children:e.jsx(C,{shape:"round",danger:!0,children:e.jsx(ve,{size:18}),type:"primary"})})]})}]},Cl=({handleSubmit:s,currentEdit:t,setCurrentEdit:a,file:r,setFile:n,setImgList:l,handleUploadImageList:o,imgList:c,handleRemoveImgFromList:h,handleUploadImage:d})=>{const{comSciSubject:{loadSubject:x,clearSelect:y,submitLoading:p}}=w(),[m]=ge();g.useEffect(()=>(t&&b(),()=>{y(),a(null)}),[]);const b=async()=>{await x(t).then(v=>{m.setFieldsValue(v),n(v.icon),l(v.photos)})};return e.jsxs(j,{form:m,className:"py-4 px-2 md:py-8 md:px-4 xl:py-12 xl:px-8 shadow-46 rounded-lg",layout:"vertical",onFinish:s,children:[e.jsxs($,{gutter:[16,16],children:[e.jsxs(F,{xs:24,lg:12,children:[e.jsx(j.Item,{label:"รูปภาพหลัก",required:!0,children:e.jsx(at,{modalTitle:"สัดส่วนรูปภาพ",quality:100,children:e.jsx(je,{accept:"image/jpeg, image/png,  image/jpg",action:xe.urlUploadFile+"?quality=100&saveOriginalFile=true",listType:"picture-card",previewFile:void 0,showUploadList:!1,onChange:d,children:r?e.jsx("img",{style:{width:120,height:100},src:A(r),className:"object-top object-cover rounded-lg"}):e.jsxs("div",{children:[e.jsx(Ne,{}),e.jsx("div",{style:{marginTop:8},children:"อัพโหลดรูปภาพ"})]})})})}),e.jsx(j.Item,{name:"subjectName",label:"ชื่อหัวข้อ",required:!0,rules:[{required:!0,message:"กรุณากรอกข้อมูล"}],children:e.jsx(D.TextArea,{autoSize:{minRows:1,maxRows:2},maxLength:60,showCount:!0})}),e.jsx(j.Item,{name:"description",label:"เนื้อหา",children:e.jsx(He,{value:m.getFieldValue("description")})})]}),e.jsxs(F,{xs:24,lg:12,children:[e.jsx(j.Item,{children:e.jsxs(je.Dragger,{multiple:!0,accept:"image/jpeg, image/png,  image/jpg",action:xe.urlUploadFile,previewFile:void 0,showUploadList:!1,onChange:o,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(qe,{})}),e.jsx("p",{className:"ant-upload-text",children:"คลิ้กหรือลากไฟล์ไปยังพื้นที่นี้เพื่ออัปโหลด"}),e.jsx("p",{className:"ant-upload-hint",children:"รองรับการอัปโหลดหลายครั้ง"})]})}),e.jsx($,{className:"pb-4",gutter:[16,16],children:c.map((v,k)=>e.jsx(F,{xs:12,sm:12,md:8,lg:6,children:e.jsxs("div",{className:"relative rounded-md shadow-md w-full h-36",children:[e.jsx("img",{className:"w-full h-full object-cover rounded-md shadow-md",src:A(v.url)}),e.jsx(te,{placement:"top",title:"นำออก",children:e.jsx("button",{type:"button",onClick:()=>h(k),className:"absolute top-2 right-2 text-gray-600 hover:text-red-600",children:e.jsx("svg",{className:"h-5 w-5 fill-current",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M18.364 5.636a.996.996 0 0 0-1.414 0L12 10.586 7.05 5.636a.996.996 0 1 0-1.414 1.414L10.586 12l-4.95 4.95a.996.996 0 1 0 1.414 1.414L12 13.414l4.95 4.95a.996.996 0 1 0 1.414-1.414L13.414 12l4.95-4.95a.996.996 0 0 0 0-1.414z"})})})})]})},k))})]})]}),e.jsx(j.Item,{children:e.jsx(C,{type:"primary",shape:"round",htmlType:"submit",loading:p,children:"บันทึก"})})]})},Pl=N(Cl),kl=()=>{const{comSciSubject:{comsciSubjectRegistry:s,loading:t,loadSubjects:a,subjectSelected:r,tableBody:n,setTableBody:l,updateSubject:o,createSubject:c}}=w(),[h,d]=g.useState(!1),[x,y]=g.useState(null),[p,m]=g.useState(),[b,v]=g.useState([]);g.useEffect(()=>{a().then(k)},[]);const k=()=>{let G=Array.from(s.values()).map(H=>({key:H.id,icon:e.jsx("img",{src:H.iconPreview,className:"w-16 h-16 rounded-md shadow-md"}),subjectName:H.subjectName}));l(G)},I=()=>d(!h),O=G=>{y(G),d(!0)},T=async G=>{var H=Object.assign(G,{icon:p,photos:b});x?(H.id=x,await o(H).then(k).then(()=>d(!1))):await c(H).then(k).then(()=>d(!1))},U=G=>{const{status:H,response:he}=G.file;H=="done"&&m(he)},Y=G=>{const{status:H,response:he}=G.file;H=="done"&&v([...b,{url:he}])},ee=G=>{v(b.filter((H,he)=>he!==G))};return e.jsxs(e.Fragment,{children:[e.jsx(ye,{text:"สิ่งที่เรียนในสาขา",tail:x&&r&&r.subjectName}),e.jsx(L,{wrap:!0,className:"mb-4",children:e.jsx(C,{shape:"round",type:h?"default":"primary",onClick:I,children:h?"กลับ":"เพิ่ม"})}),h?e.jsx(Pl,{handleSubmit:T,currentEdit:x,setCurrentEdit:y,file:p,setFile:m,setImgList:v,handleUploadImageList:Y,imgList:b,handleRemoveImgFromList:ee,handleUploadImage:U}):e.jsx($,{className:"shadow-46 rounded-lg",children:e.jsx(F,{span:24,children:e.jsx(ke,{data:n,isLoading:t,columns:Sl({handleSetEdit:O,mapTable:k})})})})]})},Ll=N(kl),Il=e.jsxs(B,{path:f.home,element:e.jsx(Ja,{}),children:[e.jsx(B,{path:"*",element:e.jsx(Mn,{})}),e.jsxs(B,{path:f.home,element:e.jsx(lr,{}),children:[e.jsx(B,{path:"",element:e.jsx(Dr,{})}),e.jsx(B,{path:f.account,element:e.jsx(Tt,{})}),e.jsx(B,{path:`${f.account}/:username`,element:e.jsx(Tt,{})}),e.jsx(B,{path:f.projects,element:e.jsx(Qn,{})}),e.jsx(B,{path:f.students,element:e.jsx(ai,{})}),e.jsx(B,{path:f.lecturers,element:e.jsx(gi,{})}),e.jsx(B,{path:f.syllabus,element:e.jsx(wi,{})}),e.jsx(B,{path:`${f.projects}/:id`,element:e.jsx(Vn,{})}),e.jsx(B,{path:f.courses,element:e.jsx(Hi,{})}),e.jsx(B,{path:f.news,element:e.jsx(xl,{})}),e.jsx(B,{path:f.studentJobHistory,element:e.jsx(pl,{})}),e.jsx(B,{path:`${f.news}/:id`,element:e.jsx(kn,{})}),e.jsx(B,{path:`${f.courses}/:id`,element:e.jsx(Ki,{})}),e.jsx(B,{path:`${f.courses}/:id/generation`,element:e.jsx(dl,{})}),e.jsxs(B,{element:e.jsx(dt,{roles:[Fe[Q.student].en]}),children:[e.jsx(B,{path:f.projectForm,element:e.jsx(Ht,{})}),e.jsx(B,{path:`${f.projectForm}/:id`,element:e.jsx(Ht,{})})]}),e.jsxs(B,{element:e.jsx(dt,{roles:[Fe[Q.lecturer].en]}),children:[e.jsx(B,{path:f.coursesForm,element:e.jsx(At,{})}),e.jsx(B,{path:`${f.coursesForm}/:id`,element:e.jsx(At,{})})]})]}),e.jsx(B,{element:e.jsx(dt,{roles:[Fe[Q.admin].en]}),children:e.jsxs(B,{path:K.home,element:e.jsx(fr,{}),children:[e.jsx(B,{path:"",element:e.jsx(ni,{})}),e.jsx(B,{path:K.homePhotoManage,element:e.jsx(Jr,{})}),e.jsx(B,{path:K.newsManage,element:e.jsx(Rn,{})}),e.jsx(B,{path:K.userManage,element:e.jsx(Gr,{})}),e.jsx(B,{path:K.settingMange,element:e.jsx(Xr,{})}),e.jsx(B,{path:K.projectManage,element:e.jsx(Tn,{})}),e.jsx(B,{path:K.syllabusManage,element:e.jsx(ki,{})}),e.jsx(B,{path:K.lecturerMange,element:e.jsx(mi,{})}),e.jsx(B,{path:K.comsciSubjectManage,element:e.jsx(Ll,{})}),e.jsx(B,{path:K.jobHistoryManage,element:e.jsx(Fi,{})})]})})]}),M=Na(va(Il)),Fl={list:s=>S.get("/lecturer",{params:s}),getOne:s=>S.get(`/lecturer/${s}`),create:s=>S.postForm("/lecturer",Ut(s)),edit:s=>S.putForm("/lecturer",Ut(s)),delete:s=>S.delete(`/lecturer/${s}`),hidden:s=>S.post(`/lecturer/${s}/hidden`)},Ut=s=>{var t=new FormData;return Object.entries(s).forEach(([a,r])=>{r&&t.append(a,r)}),t},Rl={list:s=>S.get("/jobHistory",{params:s}),updateJobHistory:s=>S.put("/jobHistory",s),isUse:s=>S.post(`/jobHistory/${s}`),meRemove:()=>S.delete("/jobHistory")},Ml={courseList:s=>S.get("/course",{params:s}),courseDetail:s=>S.get(`/course/${s}`),generationList:s=>S.get("/course/generations",{params:s}),generationDetail:s=>S.get(`/course/${s}/generation`),joinGeneration:s=>S.post(`/course/joinCourse/${s}`),cancelGeneration:s=>S.patch(`/course/${s}/cancel`),createCourse:s=>S.post("/course",s),editCourse:s=>S.put("/course/editCourse",s),addGeneration:s=>S.post("/course/addGen",s),editGeneration:s=>S.put("/course/editGeneration",s),removeGeneration:s=>S.delete(`/course/${s}/removeGen`),removeCourse:s=>S.delete(`/course/${s}`)},El={list:()=>S.get("/comsciSubject"),detail:s=>S.get(`/comsciSubject/${s}`),create:s=>S.post("/comsciSubject",s),update:s=>S.put("/comsciSubject",s),delete:s=>S.delete(`/comsciSubject/${s}`)};pe.defaults.baseURL=xe.baseAPI;pe.defaults.withCredentials=!0;const pt={headers:{"Content-Type":"multipart/formData"}},Le=s=>s.data;pe.interceptors.request.use(s=>{const t=W.commonStore.token;return t&&(s.headers.Authorization=`Bearer ${t}`),s});pe.interceptors.response.use(async s=>{const t=s.headers.pagination;return t&&(s.data=new Ua(s.data,JSON.parse(t))),s},s=>{var l;const{status:t,data:a,headers:r,config:n}=s.response;switch(t){case 400:if(typeof a=="string"&&X.warning(a,3),a.errors){const o=[];for(const c in a.errors)a.errors[c]&&o.push(a.errors[c]);throw o.flat()}break;case 401:t===401&&((l=r["www-authenticate"])!=null&&l.startsWith('Bearer error="invalid_token"'))?W.userStore.logout():typeof a=="string"&&X.warning(a,3);break;case 404:M.navigate("*");break;case 500:X.error(a);break}return Promise.reject(s)});const S={get:(s,t={})=>pe.get(s,t).then(Le),post:(s,t={},a={})=>pe.post(s,t,a).then(Le),postForm:(s,t={})=>pe.post(s,t,pt).then(Le),put:(s,t={},a={})=>pe.put(s,t,a).then(Le),putForm:(s,t={})=>pe.put(s,t,pt).then(Le),patch:(s,t={},a={})=>pe.patch(s,t,a).then(Le),delete:s=>pe.delete(s).then(Le)},P={Accounts:Ma,Profiles:Da,Projects:$a,Syllabuses:Ta,SystemSettings:Ba,HomePhotos:Ha,Newses:za,Lecturers:Fl,JobHistories:Rl,Courses:Ml,ComSciSubjects:El};class Dl{constructor(){i(this,"accountsRegistry",new Map);i(this,"tableBody",[]);i(this,"pagination",null);i(this,"pagingParams",new ze(1,10));i(this,"predicate",new Map().set("role",""));i(this,"loading",!1);i(this,"loadingSubmit",!1);i(this,"setLoading",t=>this.loading=t);i(this,"setRole",t=>this.predicate.set("role",t));i(this,"setSearch",t=>this.predicate.set("search",t));i(this,"setPredicate",t=>Object.entries(t).forEach(([a,r])=>this.predicate.set(a,r)));i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"setTable",t=>this.tableBody=t);i(this,"loadAccounts",async()=>{this.setLoading(!0),this.accountsRegistry.clear();try{var t=await P.Profiles.list(this.axiosParams);this.setPagination(t.pagination),u(()=>{t.data.forEach(this.setAccount)}),this.setLoading(!1)}catch(a){throw u(()=>this.setLoading(!1)),a}});i(this,"setAccount",t=>{t.image=t.image&&A(t.image),this.accountsRegistry.set(t.username,t)});i(this,"editUser",async t=>{this.loadingSubmit=!0;try{await P.Accounts.editUser(t),u(()=>{this.loadingSubmit=!1})}catch(a){throw u(()=>this.loadingSubmit=!1),a}});i(this,"addUser",async t=>{this.loadingSubmit=!0;try{await P.Accounts.register(t),u(()=>{this.loadingSubmit=!1})}catch(a){throw u(()=>this.loadingSubmit=!1),a}});se(this)}get axiosParams(){const t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class $l{constructor(){i(this,"user");i(this,"profile",null);i(this,"Loading",!1);i(this,"loadingSubmit",!1);i(this,"accountTabCurrent","0");i(this,"setAccountTabCurrent",t=>this.accountTabCurrent=t);i(this,"login",async t=>{this.Loading=!0;try{const a=await P.Accounts.login(t);W.commonStore.setToken(a.token),u(()=>{a.image=a.image&&"http://coms.kru.ac.th/comsci/api".split("api")[0]+"image-upload/"+a.image,this.user=a,this.setRoleUser(a.token),this.Loading=!1}),M.navigate(f.home),W.modalStore.closeModal()}catch(a){return u(()=>this.Loading=!1),a}});i(this,"register",async t=>{this.Loading=!0;try{var a=await P.Accounts.register(t);W.commonStore.setToken(a.token),u(()=>{a.image=a.image&&"http://coms.kru.ac.th/comsci/api".split("api")[0]+"image-upload/"+a.image,this.user=a,this.setRoleUser(a.token),this.Loading=!1}),W.modalStore.closeModal()}catch(r){throw u(()=>this.Loading=!1),r}});i(this,"logout",()=>{W.commonStore.setToken(null),this.user=void 0,this.profile=null,M.navigate(f.home)});i(this,"getUser",async()=>{try{const t=await P.Accounts.getCurrent();W.commonStore.setToken(t.token),u(()=>{t.image=t.image&&"http://coms.kru.ac.th/comsci/api".split("api")[0]+"image-upload/"+t.image,this.user={...t},this.setRoleUser(t.token)})}catch(t){console.log(t)}});i(this,"setRoleUser",t=>{let a=JSON.parse(window.atob(t.split(".")[1])).role;this.user.roles=typeof a=="string"?[a]:a});i(this,"setProfile",t=>{t.imagePreview=t.image&&A(t.image),this.profile=t});i(this,"loadProfile",async t=>{this.Loading=!0;try{var a=await P.Profiles.profile(t);a.isRole==Q.student&&W.projectStore.loadProjectByUsername(t),u(()=>{this.setProfile(a),this.Loading=!1})}catch(r){throw u(()=>this.Loading=!1),r}});i(this,"updateMe",async t=>{this.loadingSubmit=!0,t.bio=t.bio||"";try{await P.Accounts.updateMe(t),u(()=>{this.profile=Object.assign({},this.profile,t),this.loadingSubmit=!1})}catch(a){throw u(()=>this.loadingSubmit=!1),a}});i(this,"resetPassword",async t=>{this.loadingSubmit=!0;try{await P.Accounts.changePassword(t),u(()=>{this.loadingSubmit=!1})}catch(a){throw u(()=>this.loadingSubmit=!1),a}});se(this)}get isLoggedIn(){return!!this.user}}class Tl{constructor(){i(this,"isSidebarOpen",!1);i(this,"toggleSidebar",()=>this.isSidebarOpen=!this.isSidebarOpen);i(this,"closeSidebar",()=>this.isSidebarOpen=!1);se(this)}}class zt{constructor(){i(this,"title","");i(this,"fileImage")}}class Bl{constructor(){i(this,"photoRegistry",new Map);i(this,"tableBody",[]);i(this,"formBody",new zt);i(this,"isLoading",!1);i(this,"submitLoading",!1);i(this,"GetPhotos",async t=>{this.isLoading=!0;try{var a=new URLSearchParams;a.append("enableOnly",t?"true":"false");var r=await P.HomePhotos.list(a);u(()=>{r.forEach(this.setPhoto),this.isLoading=!1})}catch(n){throw u(()=>this.isLoading=!1),n}});i(this,"setTable",t=>this.tableBody=t);i(this,"setPhoto",t=>{t.url=A(t.url),this.photoRegistry.set(t.id,t)});i(this,"hidden",async t=>{try{await P.HomePhotos.enable(t.id),u(()=>{this.photoRegistry.set(t.id,{...t,isEnable:!t.isEnable})})}catch(a){throw a}});i(this,"deletePhoto",async t=>{this.isLoading=!0;try{await P.HomePhotos.delete(t),u(()=>{this.photoRegistry.delete(t),this.isLoading=!1})}catch(a){throw u(()=>this.isLoading=!1),a}});i(this,"clearFormBody",()=>this.formBody=new zt);i(this,"addPhoto",async()=>{if(this.formBody.fileImage){this.submitLoading=!0;try{await P.HomePhotos.add(this.formBody),u(()=>this.submitLoading=!1)}catch(t){throw u(()=>this.submitLoading=!1),t}}});se(this)}get Photos(){return Array.from(this.photoRegistry.values())}}class Al{constructor(){i(this,"setting",null);i(this,"loading",!1);i(this,"loadSetting",async()=>{this.loading=!0;try{const t=await P.SystemSettings.get();u(()=>{t.logoPreview=t.logo&&A(t.logo),t.youtubeList=t.videoUrl?Array.from(t.videoUrl.split(",")):[],t.latAndLng={lat:t.location.split(",")[0],lng:t.location.split(",")[1]},this.setting=t,this.loading=!1})}catch(t){throw u(()=>this.loading=!1),t}});i(this,"updateSetting",async t=>{this.loading=!0,t.videoUrl=t.youtubeList.length>0?t.youtubeList.join():"",t.location=`${t.latAndLng.lat},${t.latAndLng.lng}`;try{await P.SystemSettings.editSetting(t),u(()=>{this.loading=!1,this.setting=t})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"changeSetting",t=>this.setting=Object.assign(this.setting,t));se(this)}}class Hl{constructor(t){i(this,"id");i(this,"title");i(this,"subTitle");i(this,"isHidden");i(this,"createdAt");i(this,"mainImage");i(this,"body");i(this,"newsPhotos");i(this,"author");this.id=t.id,this.title=t.title,this.subTitle=t.subTitle,this.isHidden=t.isHidden,this.createdAt=t.createdAt,this.mainImage=t.mainImage}}class Ot{constructor(){i(this,"title","");i(this,"subTitle");i(this,"body","");i(this,"fileImages");i(this,"newsPhotos")}}class Ul{constructor(){i(this,"newsRegistry",new Map);i(this,"newsSelected");i(this,"formBody",new Ot);i(this,"tableBody",[]);i(this,"pagination",null);i(this,"pagingParams",new ze(1,8));i(this,"predicate",new Map().set("ShowAll",!1));i(this,"loading",!1);i(this,"submitLoading",!1);i(this,"setTable",t=>this.tableBody=t);i(this,"setSearch",t=>this.predicate.set("Search",t));i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"loadNewses",async()=>{this.loading=!0;try{var t=await P.Newses.list(this.axiosParams);u(()=>{this.newsRegistry.clear(),t.data.forEach(this.setNews),this.setPagination(t.pagination),this.stopLoading()})}catch(a){throw u(this.stopLoading),a}});i(this,"loadNews",async t=>{this.loading=!0;try{var a=await P.Newses.getOne(t);u(()=>{this.newsSelected=new Hl(a),this.newsSelected.body=a.body,this.newsSelected.author=a.author,this.newsSelected.newsPhotos=this.setNewsPhotos(a.newsPhotos),this.stopLoading()})}catch(r){throw u(this.stopLoading),r}});i(this,"setNews",t=>{t.mainImage=t.mainImage&&A(t.mainImage),this.newsRegistry.set(t.id,t)});i(this,"setNewsPhotos",t=>t.map(a=>(a.previewURL=A(a.url),a)));i(this,"stopLoading",()=>this.loading=!1);i(this,"clearSelectNews",()=>this.newsSelected=void 0);i(this,"clearFormBody",()=>this.formBody=new Ot);i(this,"addNews",async()=>{if(!this.formBody.fileImages||this.formBody.fileImages.length<1)throw"กรุณาอัพโหลดรูปภาพประกอบ";this.submitLoading=!0;try{await P.Newses.create(this.formBody),u(()=>{this.clearFormBody(),this.submitLoading=!1})}catch(t){throw u(()=>this.submitLoading=!1),t}});i(this,"editNews",async t=>{this.submitLoading=!0;try{await P.Newses.edit(Object.assign(this.formBody,{id:t})),u(()=>{this.clearFormBody(),this.clearSelectNews(),this.submitLoading=!1})}catch(a){throw u(()=>this.submitLoading=!1),a}});i(this,"hidden",async t=>{try{await P.Newses.hidden(t.id),u(()=>{this.newsRegistry.set(t.id,{...t,isHidden:!t.isHidden})})}catch(a){throw a}});i(this,"deleteNews",async t=>{this.loading=!0;try{await P.Newses.delete(t),u(()=>{this.newsRegistry.delete(t),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"setEditCurrentNews",()=>this.formBody=Object.assign({},this.formBody,this.newsSelected));i(this,"setFormBody",t=>this.formBody=Object.assign({},this.formBody,t));i(this,"deletePhotoNews",async t=>{this.loading=!0;try{await P.Newses.deletePhoto(t),u(()=>{var a;this.formBody.newsPhotos=(a=this.formBody.newsPhotos)==null?void 0:a.filter(r=>r.id!=t),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});se(this)}get axiosParams(){const t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class Gt{constructor(){i(this,"nameTH","");i(this,"nameEN","");i(this,"description","");i(this,"videoUrl","");i(this,"webUrl","");i(this,"githubUrl","");i(this,"consultants",[]);i(this,"fileImage",null);i(this,"filePDF",null);i(this,"keyWords","");i(this,"keyWordList",[])}}class zl{constructor(){i(this,"projectRegistry",new Map);i(this,"projectSelected",null);i(this,"tableBody",[]);i(this,"formBody",new Gt);i(this,"pagination",null);i(this,"pagingParams",new ze(1,8));i(this,"predicate",new Map().set("showHidden",!1));i(this,"loading",!1);i(this,"submitLoading",!1);i(this,"showMode",0);i(this,"setProject",t=>(t.imagePreview=t.image&&A(t.image),t.student.image=t.student.image&&A(t.student.image),t.keyWordList=t.keyWords?Array.from(t.keyWords.split(",")):[],t.consultants=t.consultants||[],this.projectRegistry.set(t.id,t),t));i(this,"setShowMode",t=>this.showMode=t);i(this,"setTable",t=>this.tableBody=t);i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"setPredicate",t=>Object.entries(t).map(([a,r])=>this.predicate.set(a,r)));i(this,"loadProjects",async()=>{this.loading=!0,this.projectRegistry.clear();try{var t=await P.Projects.list(this.axiosParams);u(()=>{t.data.forEach(this.setProject),this.setPagination(t.pagination),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"loadProject",async t=>{this.loading=!0;try{let a=await P.Projects.getOne(t);return u(()=>(this.loading=!1,this.projectSelected=this.setProject(a)))}catch(a){throw u(()=>this.loading=!1),a}});i(this,"loadProjectByUsername",async t=>{this.loading=!0,this.projectRegistry.clear();try{let a=await P.Projects.getByUserName(t);u(()=>{a.forEach(this.setProject),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"hidden",async t=>{try{await P.Projects.hidden(t.id),u(()=>{this.projectRegistry.set(t.id,{...t,isUsed:!t.isUsed})})}catch(a){throw a}});i(this,"setProjectSelect",t=>{let a=this.projectRegistry.get(t);a?this.projectSelected=a:M.navigate("*")});i(this,"setFormBody",t=>{this.formBody=Object.assign(this.formBody,t)});i(this,"clearProjectSelected",()=>this.projectSelected=null);i(this,"clearProjectRegistry",()=>this.projectRegistry.clear());i(this,"clearFormBody",()=>this.formBody=new Gt);i(this,"createProject",async()=>{if(!this.formBody.fileImage)throw"กรุณาอัพโหลดรูปภาพ";if(!this.formBody.filePDF)throw"กรุณาอัพโหลดไฟล์เอกสารงานวิจัย";this.formBody.keyWords=this.formBody.keyWordList.join(),this.submitLoading=!0;try{await P.Projects.create(this.formBody),u(()=>{this.clearFormBody(),this.submitLoading=!1})}catch(t){throw u(()=>this.submitLoading=!1),t}});i(this,"updateProject",async()=>{this.submitLoading=!0,this.formBody.keyWords=this.formBody.keyWordList.join();try{var t=this.projectRegistry.get(this.formBody.id);await P.Projects.edit(this.formBody),u(()=>{this.projectRegistry.set(this.formBody.id,Object.assign(t,{imagePreview:this.formBody.fileImage&&URL.createObjectURL(this.formBody.fileImage)})),this.submitLoading=!1})}catch(a){throw u(()=>this.submitLoading=!1),a}});i(this,"deleteProject",async t=>{this.loading=!0;try{await P.Projects.delete(t),u(()=>{this.projectRegistry.delete(t),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});se(this)}get axiosParams(){const t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class Ol{constructor(){i(this,"lecturerRegistry",new Map);i(this,"positionList",[]);i(this,"predicate",new Map().set("showHidden",!1));i(this,"tableBody",[]);i(this,"loading",!1);i(this,"submitLoading",!1);i(this,"setTable",t=>this.tableBody=t);i(this,"setLecturer",t=>{t.imagePreview=t.image&&A(t.image),this.lecturerRegistry.set(t.id,t)});i(this,"setPositionList",()=>this.positionList=[...new Set(this.lecturerList().map(t=>t.position))]);i(this,"lecturerList",()=>Array.from(this.lecturerRegistry.values()));i(this,"prefixList",()=>[...new Set(this.lecturerList().map(t=>t.prefix))]);i(this,"loadLecturers",async()=>{this.loading=!0;try{this.lecturerRegistry.clear();let t=await P.Lecturers.list(this.axiosParams);u(()=>{t.forEach(this.setLecturer),this.loading=!1})}catch(t){throw u(()=>this.loading=!1),t}});i(this,"addLecturer",async t=>{this.submitLoading=!0;try{await P.Lecturers.create(t),u(()=>this.submitLoading=!1)}catch(a){throw u(()=>this.submitLoading=!1),a}});i(this,"editLecturer",async t=>{this.submitLoading=!0;let a=this.lecturerRegistry.get(t.id);if(!a)return X.error("error",2);try{await P.Lecturers.edit(t),u(()=>{this.lecturerRegistry.set(t.id,Object.assign(a,{})),this.submitLoading=!1})}catch(r){throw u(()=>this.submitLoading=!1),r}});i(this,"removeLecturer",async t=>{this.loading=!0;try{await P.Lecturers.delete(t),u(()=>{this.lecturerRegistry.delete(t),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"setHidden",async t=>{try{await P.Lecturers.hidden(t),u(()=>{let a=this.lecturerRegistry.get(t);this.lecturerRegistry.set(t,Object.assign(a,{hidden:!a.hidden}))})}catch(a){throw a}});se(this)}get axiosParams(){const t=new URLSearchParams;return this.predicate.forEach((a,r)=>{t.append(r,a)}),t}get groupedLecturers(){const t=W.commonStore.json,a=this.lecturerList().reduce((n,l)=>(n[l.position]||(n[l.position]=[]),n[l.position].push(l),n),{});let r={};t["lecturer-order-position"].forEach(n=>{a[n]&&(r[n]=a[n])});for(let n in a)t["lecturer-order-position"].includes(n)||(r[n]=a[n]);return r}}const Vt={0:"subjectGeneral",1:"subjectSpecific",2:"subjectFreeElective"};class Gl{constructor(){i(this,"syllabusRegistry",new Map);i(this,"syllabusSelected",null);i(this,"tableBody",[]);i(this,"yearList",[]);i(this,"formBody",{});i(this,"predicate",new Map().set("showHidden",!1));i(this,"loading",!1);i(this,"submittingLoading",!1);i(this,"SyllabusSumCredit",t=>t.reduce((a,r)=>a+r.credit,0));i(this,"setSyllabus",t=>{t.yearFormat=String(Number(t.year)+543),t.pdfPreview=Ct(t.pdf),Array.from({length:3}).forEach((a,r)=>{t[`${Vt[r]}Sum`]=this.SyllabusSumCredit(t[Vt[r]])}),this.syllabusRegistry.set(t.id,t)});i(this,"setFormBody",t=>this.formBody=Object.assign(this.formBody,t));i(this,"syllabusList",()=>Array.from(this.syllabusRegistry.values()));i(this,"setYearList",()=>{let t=[...new Set(this.syllabusList().map(a=>a.yearFormat))];return t=t.sort((a,r)=>parseInt(r)-parseInt(a)).map(a=>String(a)),this.yearList=t,t});i(this,"getSyllabusByYear",t=>{let a=this.syllabusList().find(r=>r.yearFormat==t);this.syllabusSelected=a});i(this,"setTable",t=>this.tableBody=t);i(this,"loadSyllabuses",async()=>{this.loading=!0;try{let t=await P.Syllabuses.list(this.axiosParams);u(()=>{t.forEach(this.setSyllabus),this.loading=!1})}catch(t){throw u(()=>this.loading=!1),t}});i(this,"loadSyllabusDetail",async t=>{this.loading=!0;try{let a=await P.Syllabuses.getOne(t);u(()=>{a.yearPreview=a.year,a.year="",this.formBody=a,this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"createSyllabus",async()=>{this.submittingLoading=!0;try{await P.Syllabuses.add(this.formBody),u(()=>{this.submittingLoading=!1})}catch(t){throw u(()=>this.submittingLoading=!1),t}});i(this,"editSyllabus",async()=>{this.submittingLoading=!0;try{await P.Syllabuses.edit(this.formBody),u(()=>{this.submittingLoading=!1})}catch(t){throw u(()=>this.submittingLoading=!1),t}});i(this,"clearFormBody",()=>this.formBody={});i(this,"deleteSyllabus",async t=>{this.loading=!0;try{await P.Syllabuses.delete(t),u(()=>{this.syllabusRegistry.delete(t),this.loading=!1})}catch(a){return u(()=>this.loading=!1),a}});i(this,"hidden",async t=>{this.loading=!0;try{let a=this.syllabusRegistry.get(t.id);await P.Syllabuses.hidden(t.id),u(()=>{this.syllabusRegistry.set(t.id,Object.assign(a,{hidden:!(a!=null&&a.hidden)})),this.loading=!1})}catch(a){return u(()=>this.loading=!1),a}});se(this)}get axiosParams(){let t=new URLSearchParams;return this.predicate.forEach((a,r)=>t.append(r,a)),t}}class Vl{constructor(){i(this,"jobHistoryRegistry",new Map);i(this,"tableBody",[]);i(this,"predicate",new Map().set("showAll",!1));i(this,"pagination",null);i(this,"pagingParams",new ze(1,8));i(this,"submittingLoading",!1);i(this,"loading",!1);i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"setJobHistory",t=>{var a;t.user.image=t.user.image&&A(t.user.image),this.jobHistoryRegistry.set((a=t.user)==null?void 0:a.username,t)});i(this,"setTable",t=>this.tableBody=t);i(this,"loadJobHistories",async()=>{this.loading=!0;try{let t=await P.JobHistories.list(this.axiosParams);u(()=>{t.data.forEach(this.setJobHistory),this.setPagination(t.pagination),this.loading=!1})}catch(t){throw u(()=>this.loading=!1),t}});i(this,"updateJobHistory",async t=>{this.submittingLoading=!0;try{await P.JobHistories.updateJobHistory(t),u(()=>{var a=W.userStore.profile;W.userStore.profile=Object.assign(a,{jobHistory:t}),this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"changeIsUse",async t=>{this.loading=!0;try{await P.JobHistories.isUse(t),u(()=>{this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"meRemoveJobHistory",async()=>{this.loading=!0;try{await P.JobHistories.meRemove(),u(()=>{W.userStore.profile.jobHistory=null,this.loading=!1})}catch(t){throw u(()=>this.loading=!1),t}});se(this)}get axiosParams(){let t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class ql{constructor(){i(this,"courseRegistry",new Map);i(this,"courseSelected",null);i(this,"predicate",new Map().set("hostUsername","").set("mode",Ie.generation));i(this,"pagination",null);i(this,"pagingParams",new ze(1,8));i(this,"loading",!1);i(this,"submittingLoading",!1);i(this,"clearCourseSelect",()=>this.courseSelected=null);i(this,"clearRegistry",()=>this.courseRegistry.clear());i(this,"setPredicate",(t,a)=>this.predicate.set(t,a));i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"setCourse",t=>{t.lecturer.image=t.lecturer.image&&A(t.lecturer.image),t.image=t.image&&A(t.image),t.generations.forEach((a,r)=>{t.generations[r].genPhoto=a.genPhoto&&A(a.genPhoto)}),this.courseRegistry.set(t.id,t)});i(this,"loadCourses",async()=>{this.loading=!0;try{this.courseRegistry.clear();var t=await P.Courses.courseList(this.axiosParams);u(()=>{t.data.forEach(this.setCourse),this.setPagination(t.pagination),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"loadCourse",async t=>{this.loading=!0;try{var a=await P.Courses.courseDetail(t);return u(()=>(a.image=a.image&&A(a.image),a.lecturer.image=a.lecturer.image&&A(a.lecturer.image),this.courseSelected=a,this.loading=!1,a))}catch(r){throw u(()=>this.loading=!1),r}});i(this,"createCourse",async t=>{this.submittingLoading=!0;try{await P.Courses.createCourse(t),u(()=>{this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"updateCourse",async t=>{this.submittingLoading=!0;try{await P.Courses.editCourse(t),u(()=>{this.courseSelected=Object.assign(this.courseSelected,t),this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"deleteCourse",async t=>{this.loading=!0;try{await P.Courses.removeCourse(t),u(()=>{this.courseRegistry.delete(t),this.courseSelected=null,this.loading=!1})}catch(a){throw a}});se(this)}get axiosParams(){let t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class Jl{constructor(){i(this,"generationRegistry",new Map);i(this,"generationSelect",null);i(this,"predicate",new Map().set("myCourse",!1));i(this,"pagination",null);i(this,"pagingParams",new ze(1,8));i(this,"loading",!1);i(this,"submittingLoading",!1);i(this,"clearGenerationSelect",()=>this.generationSelect=null);i(this,"setPredicate",(t,a)=>this.predicate.set(t,a));i(this,"setPagination",t=>this.pagination=t);i(this,"setPagingParams",(t,a)=>{this.pagingParams={currentPage:t,pageSize:a},this.setPagination({...this.pagination,currentPage:t})});i(this,"setGeneration",t=>{t.genPhoto=t.genPhoto&&A(t.genPhoto),t.course.image=t.course.image&&A(t.course.image),this.generationRegistry.set(t.id,t)});i(this,"loadGenerations",async()=>{this.loading=!0;try{this.generationRegistry.clear();var t=await P.Courses.generationList(this.axiosParams);u(()=>{t.data.forEach(this.setGeneration),this.setPagination(t.pagination),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"loadingGeneration",async t=>{this.loading=!0;try{var a=await P.Courses.generationDetail(t);return u(()=>{var n,l;var r=W.userStore.user;return(n=a.generation.attendees)==null||n.forEach((o,c)=>{a.generation.attendees[c].image=o.image&&A(o.image)}),a.lecturer.image=a.lecturer.image&&A(a.lecturer.image),a.image=a.image&&A(a.image),a.isJoined=(l=a.generation.attendees)==null?void 0:l.some(o=>o.username==(r==null?void 0:r.username)),this.generationSelect=a,this.loading=!1,a})}catch(r){throw u(()=>this.loading=!1),r}});i(this,"join",async t=>{this.submittingLoading=!0;try{await P.Courses.joinGeneration(t),u(()=>{var n,l,o,c;var a=W.userStore.user,r=(l=(n=this.generationSelect)==null?void 0:n.generation.attendees)==null?void 0:l.find(h=>h.username==(a==null?void 0:a.username));r?(this.generationSelect.generation.attendees=this.generationSelect.generation.attendees.filter(h=>h.username!=(a==null?void 0:a.username)),this.generationSelect.generation.attendeeCount--,this.generationSelect.isJoined=!1):((c=(o=this.generationSelect)==null?void 0:o.generation.attendees)==null||c.push(Object.assign({...a,date:Date.now()})),this.generationSelect.generation.attendeeCount++,this.generationSelect.isJoined=!0),this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"cancel",async t=>{this.loading=!0;try{await P.Courses.cancelGeneration(t),u(()=>{this.generationSelect.generation.isCancelled=!this.generationSelect.generation.isCancelled,this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"newGeneration",async t=>{this.submittingLoading=!0;try{await P.Courses.addGeneration(t),u(()=>{this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"editGeneration",async t=>{this.submittingLoading=!0;try{await P.Courses.editGeneration(t),u(()=>{var r;var a=(r=this.generationSelect)==null?void 0:r.generation;this.generationSelect.generation=Object.assign(a,t),this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});i(this,"deleteGeneration",async t=>{this.submittingLoading=!0;try{await P.Courses.removeGeneration(t),u(()=>{this.generationSelect=null,this.generationRegistry.delete(t),W.courseStore.courseSelected&&(W.courseStore.courseSelected.generations=W.courseStore.courseSelected.generations.filter(a=>a.id!=t)),this.submittingLoading=!1})}catch(a){throw u(()=>this.submittingLoading=!1),a}});se(this)}get axiosParams(){let t=new URLSearchParams;return t.append("currentPage",this.pagingParams.currentPage.toString()),t.append("pageSize",this.pagingParams.pageSize.toString()),this.predicate.forEach((a,r)=>{t.append(r,a)}),t}}class _l{constructor(){i(this,"comments",[]);i(this,"countShown",8);i(this,"hubConnection",null);i(this,"setCountShown",t=>this.countShown=t);i(this,"commentsByDate",()=>this.comments.slice(0,this.countShown).reduce((a,r)=>{const n=Nr(r.createdAt);return a[n]||(a[n]=[]),a[n].push(r),a},{}));i(this,"createHubConnection",t=>{W.generationStore.generationSelect&&(this.hubConnection=new Sa().withUrl(`${xe.chatSocket}?generationId=${t}`,{accessTokenFactory:()=>{var a;return(a=W.userStore.user)==null?void 0:a.token}}).withAutomaticReconnect().build(),this.hubConnection.start().catch(a=>console.log("Error establishing the connection: ",a)),this.hubConnection.on("LoadComments",a=>{u(()=>{this.comments=a})}),this.hubConnection.on("ReceiveComment",a=>{u(()=>{this.comments.unshift(a)})}),this.hubConnection.on("SendRemoveComment",a=>{u(()=>{this.comments=this.comments.filter(r=>r.id!==a)})}))});i(this,"stopHubConnection",()=>{var t;(t=this.hubConnection)==null||t.stop().catch(a=>console.log("Error stopping connection: ",a))});i(this,"clearComments",()=>{this.comments=[],this.stopHubConnection()});i(this,"addComment",async t=>{var a,r;t.generationId=(a=W.generationStore.generationSelect)==null?void 0:a.generation.id;try{await((r=this.hubConnection)==null?void 0:r.invoke("SendComment",t))}catch(n){console.log(n)}});i(this,"removeComment",async t=>{var r,n;let a=(r=W.generationStore.generationSelect)==null?void 0:r.generation;try{return await((n=this.hubConnection)==null?void 0:n.invoke("RemoveComment",{commentId:t,generationId:a==null?void 0:a.id}))}catch(l){console.log(l)}});se(this)}}class Yl{constructor(){i(this,"comsciSubjectRegistry",new Map);i(this,"subjectSelected",null);i(this,"tableBody",[]);i(this,"loading",!1);i(this,"submitLoading",!1);i(this,"setTableBody",t=>this.tableBody=t);i(this,"setSubject",t=>{t.iconPreview=t.icon&&A(t.icon),this.comsciSubjectRegistry.set(t.id,t)});i(this,"clearSelect",()=>this.subjectSelected=null);i(this,"loadSubjects",async()=>{this.loading=!0;try{var t=await P.ComSciSubjects.list();u(()=>{t.forEach(this.setSubject),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});i(this,"loadSubject",async t=>{this.loading=!0;try{var a=await P.ComSciSubjects.detail(t);return u(()=>(a.iconPreview=a.icon&&A(a.icon),a.photos=a.photos.map(r=>({...r,imagePreview:A(r.url)})),this.subjectSelected=a,this.loading=!1,a))}catch(r){throw u(()=>this.loading=!1),r}});i(this,"createSubject",async t=>{this.submitLoading=!0;try{var a=await P.ComSciSubjects.create(t);u(()=>{this.setSubject(Object.assign(a)),this.submitLoading=!1})}catch(r){throw u(()=>this.submitLoading=!1),r}});i(this,"updateSubject",async t=>{this.submitLoading=!0;try{var a=await P.ComSciSubjects.update(t);u(()=>{this.setSubject(Object.assign(a)),this.submitLoading=!1})}catch(r){throw u(()=>this.submitLoading=!1),r}});i(this,"removeSubject",async t=>{this.loading=!0;try{await P.ComSciSubjects.delete(t),u(()=>{this.comsciSubjectRegistry.delete(t),this.loading=!1})}catch(a){throw u(()=>this.loading=!1),a}});se(this)}}const W={commonStore:new Fa,modalStore:new Ra,accountStore:new Dl,userStore:new $l,sideBarStore:new Tl,homePhotoStore:new Bl,settingStore:new Al,newsStore:new Ul,projectStore:new zl,lecturerStore:new Ol,syllabusStore:new Gl,jobHistoryStore:new Vl,courseStore:new ql,generationStore:new Jl,courseCommentStore:new _l,comSciSubject:new Yl},ps=g.createContext(W),w=()=>g.useContext(ps),Wl=()=>{const{modalStore:s}=w();return e.jsx(Ae,{title:s.modal.title,open:s.modal.open,onCancel:s.closeModal,centered:!0,footer:null,children:s.modal.body})},Kl=N(Wl);Ca.register({family:"Kanit",src:xe.baseURL+"fonts/Kanit-Light.ttf"});const Zl=Pa.createRoot(document.getElementById("root"));Zl.render(e.jsx(ka,{locale:La,children:e.jsxs(ps.Provider,{value:W,children:[e.jsx(Ia,{router:M}),e.jsx(Kl,{})]})}));
